<?xml version="1.0" encoding="UTF-8"?>
<package>

	<!-- Styles -->
	<style name="altav_current" color="#00b164" bordercolor="#00b164" />
	<style name="altav_currentbg" color="#0059458d" />

	<!-- Triggers -->
	<trigger name="GameLobbyTooltip"/>
	<trigger name="GameLobbyContextMenu"/>
	<trigger name="GameLobby_StatsFade"/>
	<trigger name="GameLobby_RecentMatchTrigger"/>
	<trigger name="GameLobby_FavHeroTrigger"/>
	<trigger name="GameLobby_NewStats"/>
	<trigger name="GameLobbyHeroPurchase"/>

	<trigger name="HeroSelectInford" />
	<trigger name="HeroSelectInfonormal" />
	<trigger name="HeroSelectInfobd" />
	<trigger name="HeroSelectInfosd" />
	<trigger name="HeroSelectInfoap" />
	<trigger name="HeroSelectInfoar" />
	<trigger name="HeroSelectInfobb" />
	<trigger name="HeroSelectInfobp" />
	<trigger name="HeroSelectInfolp" />
	<trigger name="HeroSelectInfogt" />
	<trigger name="HeroSelectInfofp" />
	<trigger name="HeroSelectInfosp" />
	<trigger name="HeroSelectInfosm" />
	<trigger name="ClearHeroSelectInfo" />
	<trigger name="WalkthroughHighlightReady" />
	<trigger name="RefereeControlPage" />
	<trigger name="CardListRefresh" />
	<template name="AAVButtonState">
		<widgetstate statename="{statename}" x="{x}" y="{y}">
			<image width="132%" height="33@" align="center" valign="center" texture="/ui/fe2/store/promo/storebtn_blank_{stateimage}.tga" noclick="true" />
			<label y="-0.2h" height="100%" textvalign="center" textalign="center" font="dyn_14" color="{labelcolor}" shadow="true" content="{label}" />
		</widgetstate>
	</template>

	<template name="AAVButton">
		<button
			name="{button_name}"
			color="invisible"
			onclicklua="{onclicklua}"
			onevent="{onevent}"
			oneventlua="{oneventlua}"
			onrightclicklua="{onrightclicklua}"
			onmouseover="PlaySound('/shared/sounds/ui/ccpanel/button_over_02.wav'); {onmouseover}"
			onmouseout="{onmouseout}"
			watch="{watch}"
			ontrigger="{ontrigger}"
			watch1="{watch1}"
			ontrigger1="{ontrigger1}"
			enabled="{enabled=true}"
			visible="{visible}"
			x="{x}" y="{y}"
		>
			<instance name="AAVButtonState" label="{label}" statename="up" stateimage="normal" labelcolor="#efa234" />
			<instance name="AAVButtonState" label="{label}" statename="over" stateimage="over" labelcolor="#ffd08d" />
			<instance name="AAVButtonState" label="{label}" statename="down" stateimage="down" labelcolor="#864f00" x="1" y="1" />
			<instance name="AAVButtonState" label="{label}" statename="disabled" stateimage="normal" labelcolor="#414141" />
		</button>
	</template>

	<template name="AAVPrevNextButton">
		<button
			color="invisible"
			align="center" valign="center"
			x="{x}" y="0.2h"
			onclicklua="{onclicklua}"
			onrightclicklua="{onrightclicklua}"
			onmousewheeldownlua="{onmousewheeldownlua}"
			onmousewheeluplua="{onmousewheeluplua}"
			onmouseover="{onmouseover}"
			onmouseout="{onmouseout}"
		>
			<widgetstate statename="up">
				<image texture="/ui/fe2/elements/scroll_arrow.tga" color="#fbc604" width="3.6h" height="2.5h" x="{x=0}" align="center" valign="center" rotation="{rotation}" />
			</widgetstate>
			<widgetstate statename="over">
				<image texture="/ui/fe2/elements/scroll_arrow.tga" color="1 1 1 1" width="3.6h" height="2.5h" x="{x=0}" align="center" valign="center" rotation="{rotation}" />
			</widgetstate>
			<widgetstate statename="down" x="1" y="1">
				<image texture="/ui/fe2/elements/scroll_arrow.tga" color="1 1 1 1" width="3.6h" height="2.5h" x="{x=0}" align="center" valign="center" rotation="{rotation}" />
			</widgetstate>
		</button>
	</template>

	<template name="glb_botpickplate">
		<panel name="glb_botpickplate_{id}" width="100@" height="100%" visible="1"
			onclicklua="UIManager.GetInterface('main'):HoNGameLobbyF('SelectBot', self, {id})"
			onmouseover="Call('glb_botpickplate_border_{id}_hover', 'FadeIn(150);'); ShowWidget('hero_info');"
			onmouseoverlua="UIManager.GetInterface('main'):HoNGameLobbyF('HoverBot', self, {id})"
			onmouseout="Call('glb_botpickplate_border_{id}_hover', 'FadeOut(150);'); HideWidget('hero_info');"
			onmouseoutlua="UIManager.GetInterface('main'):HoNGameLobbyF('LeaveBotHover')"
		>
			<image name="glb_botpickplate_icon_{id}" texture="/ui/fe2/elements/matchmaking_bot_easy.tga" noclick="1"/>
			<frame name="glb_botpickplate_border_{id}" color="invisible" borderthickness="1" bordercolor=".2 .2 .2 1" noclick="1"/>
			<frame name="glb_botpickplate_border_{id}_hover" color="invisible" visible="0" borderthickness="1" bordercolor=".8 .2 .2 1" noclick="1"/>
			<label name="glb_botpickplate_index_{id}" visible="0" noclick="1" />
		</panel>
	</template>

	<!-- Enemy Bot Version -->
	<template name="glb_multibotplate">
		<panel name="glb_multibotplate_{id}" height="{height=7.2h}"
			onmouseover="Call('mb_frame_{id}', 'FadeIn(150)'); ShowWidget('hero_info');"
			onmouseoverlua=""
			onmouseout="Call('mb_frame_{id}', 'FadeOut(150)'); HideWidget('hero_info');"
			onclicklua="UIManager.GetInterface('main'):HoNGameLobbyF('SelectMultiBot', self, {id})"
		>
			<frame texture="/ui/frames/rounded_bg_solid.tga" borderthickness="0.6h" color="0 0 0 1" noclick="true"/>
			<frame texture="/ui/frames/roundframe.tga" color="#183042" borderthickness="0.6h" noclick="true" />
			<frame name="mb_frame_{id}" visible="0" texture="/ui/frames/roundframe.tga" color=".8 .2 .2 1" borderthickness="0.6h" noclick="true" />
			<label name="glb_multibotpickplate_index_{id}" visible="0" noclick="1" />

			<panel width="-1.0h" height="-1.0h" valign="center" align="center" noclick="true">
				<panel width="100@" height="100%" noclick="true">
					<image name="glb_multibotplate_{id}_icon" texture="/heroes/empath/icon.tga" noclick="true"/>
					<frame color="invisible" borderthickness="1" bordercolor=".2 .2 .2 1" noclick="true"/>
				</panel>
				<panel width="-110@" align="right" noclick="true">
					<panel height="2.0h" noclick="true">
						<label name="glb_multibotplate_{id}_name" textalign="left" font="dyn_12" color="#37b2d9" noclick="true"/>
						<label name="glb_multibotplate_{id}_version" textalign="right" font="dyn_10" color=".6 .6 .6 1" noclick="true"/>
					</panel>
					<panel height="-2.4h" valign="bottom" noclick="true">
						<label name="glb_multibotplate_{id}_desc" font="dyn_10" wrap="true" color="1 1 1 1" noclick="true"/>
					</panel>
				</panel>
			</panel>
		</panel>
	</template>

	<!-- For storing the last 10 match IDs -->
	<trigger name="UpdateLastMatchIDs"/>
		<!-- For() wasn't working quite as well as I wish it would for this.  Rewrite later... -->
	<panel color="invisible" noclick="true"
		watch="UpdateLastMatchIDs"
		ontrigger="
			If(
				_last_matchid_1 != Ceil(param),
				Split(
					Cmd('SetSave _last_matchid_10 ' # _last_matchid_9),
					Cmd('SetSave _last_matchid_9 ' # _last_matchid_8),
					Cmd('SetSave _last_matchid_8 ' # _last_matchid_7),
					Cmd('SetSave _last_matchid_7 ' # _last_matchid_6),
					Cmd('SetSave _last_matchid_6 ' # _last_matchid_5),
					Cmd('SetSave _last_matchid_5 ' # _last_matchid_4),
					Cmd('SetSave _last_matchid_4 ' # _last_matchid_3),
					Cmd('SetSave _last_matchid_3 ' # _last_matchid_2),
					Cmd('SetSave _last_matchid_2 ' # _last_matchid_1),
					Cmd('SetSave _last_matchid_1 ' # Ceil(param))
				)
			);
		"
	/>

	<panel noclick="true" color="invisible" name="game_lobby_watch_panel"
		onload="
			CreateInt('_gLobbyLastTotalCoins', 0);
			CreateInt('_gLobbyLastTotalSilverCoins', 0);
			CreateString('_gLobbyHeroPurchaseEntity', '');
		"
		watch0="GoldCoins"
		ontrigger0="Set('_gLobbyLastTotalCoins', param);"
		watch1="gLobbyBuyAvatarResults"
		ontrigger1="
			If(
				param2 gt 0,
				CallEvent('gLobbyBuyAvatarError', 0)
			);
			If(
				param1 == 3,
				Split(
					CallEvent('gLobbyBuyAvatarSuccess', 0),
					ChatRefreshUpgrades(),
					ClientRefreshUpgrades(),
					ServerRefreshUpgrades()
				)
			);
		"
		watch2="gLobbyBuyAvatarStatus"
		ontrigger2="If(param0 == 3, CallEvent('gLobbyBuyAvatarError', 0));"
		watch3="SilverCoins"
		ontrigger3="Set('_gLobbyLastTotalSilverCoins', param);"
		watch4="gLobbyBuyHeroResults"
		ontrigger4="
			If(
				param2 gt 0 or param3 gt 0,
				CallEvent('globbyBuyHeroError', 0)
			);

			If(
				param2 gt 0 or param3 gt 0,
				Set('_gLobbyHeroPurchaseEntity', '')
			);

			If(
				param1 == 3,
				Split(
					CallEvent('gLobbyBuyHeroSuccess', 0),
					ChatRefreshUpgrades(),
					ClientRefreshUpgrades(),
					ServerRefreshUpgrades()
				)
			);
		"
		watch5="MicroStoreResults"
		ontrigger5="
			If(param15 gt 0 and !StringEmpty(_gLobbyHeroPurchaseEntity),
				CallEvent('globbyBuyHeroError', 0)
			);

			If(
				param1 == 3 and !StringEmpty(_gLobbyHeroPurchaseEntity),
				Split(
					CallEvent('gLobbyBuyHeroSuccess', 0),
					ChatRefreshUpgrades(),
					ClientRefreshUpgrades(),
					ServerRefreshUpgrades()
				)
			);
		"
	/>

	<trigger name="gLobbyBuyAvatarStatus"/>
	<trigger name="gLobbyBuyAvatarResults"/>

	<form
		name="gLobbyBuyAvatar"
		host="!masterserver"
		method="post"
		target="/store_requester.php"
		statustrigger="gLobbyBuyAvatarStatus"
		resulttrigger="gLobbyBuyAvatarResults"
		resultparam0="responseCode"
		resultparam1="popupCode"
		resultparam2="errorCode"
		resultparam3="error"
		ssl="false"
	/>

	<trigger name="gLobbyBuyHeroStatus"/>
	<trigger name="gLobbyBuyHeroResults"/>

	<form
		name="gLobbyBuyHero"
		host="!masterserver"
		method="post"
		target="/store_requester.php"
		statustrigger="gLobbyBuyHeroStatus"
		resulttrigger="gLobbyBuyHeroResults"
		resultparam0="responseCode"
		resultparam1="popupCode"
		resultparam2="errorCode"
		resultparam3="error"
		ssl="false"
	/>

	<!-- For updating the text of the spectator tooltip (ARGH) -->
	<trigger name="ModSpectatorTipTrigger" />

	<!-- First Ban Button -->
	<template name="first_ban">
		<instance name="button2" button_name="firstBanButton{team}A"
			x="{x}" y="1h"
			width="10h" height="3h"
			align="center"
			borderthickness="15%"
			label="game_lobby_first_ban"
			enabled="false"
			watch="LobbyTeamInfo{team}"
			ontrigger="SetVisible(param4 and param5);"
		/>
		<instance name="button2" button_name="firstBanButton{team}B"
			x="{x}" y="1h"
			width="10h" height="3h"
			align="center"
			borderthickness="15%"
			label="game_lobby_set_first_ban"
			onclick="PlaySound('/shared/sounds/ui/lobby/button_jointeam.wav'); AssignFirstBanTeam({team});"
			watch="LobbyTeamInfo{team}"
			ontrigger="SetVisible(param4 and !param5);"
		/>
	</template>

	<!-- Player Context menu -->
	<template name="SwapSlot_left">
		<panel width="50%">
			<panel width="80%" height="80%" align="center" valign="center">
				<frame texture="/ui/frames/tooltip_bg.tga" color="0 0 0 .8" borderthickness=".6h" align="left" valign="top" noclick="1"/>
				<frame texture="/ui/frames/roundframe.tga" color="#A0A0A0" borderthickness=".6h" noclick="1"/>
				<panel
					width="70%" height="70%"
					align="center" valign="center"
				>
					<panel color="invisible" watch="LobbyPlayerInfo{player}" ontrigger="SetColor(param2);" />
					<panel
						color="invisible"
						watch="GameLobbyContextMenu"
						ontrigger="
							SetOnclick('RequestSwapPlayerSlots(' # param3 # ', ' # param4 # ', {team}, {slot});
							Trigger(\'GameLobbyContextMenu\', false, 0, 0, 0, 0, -1);');
						"
						onmouseover="SetColor('1 1 1 .5');ShowWidget('game_lobby_swap_tip');"
						onmouseout="SetColor('invisible');HideWidget('game_lobby_swap_tip');"
					/>
				</panel>
			</panel>
		</panel>
	</template>

	<template name="SwapSlot">
		<panel width="50%">
			<panel width="80%" height="80%" align="center" valign="center">
				<frame texture="/ui/frames/tooltip_bg.tga" color="0 0 0 .8" borderthickness=".6h" align="left" valign="top" noclick="1"/>
				<frame texture="/ui/frames/roundframe.tga" color="#A0A0A0" borderthickness=".6h" noclick="1"/>
				<panel
					width="70%" height="70%"
					align="center" valign="center"
				>
					<panel color="invisible" watch="LobbyPlayerInfo{player}" ontrigger="SetColor(param2);" />
					<panel
						color="invisible"
						watch="GameLobbyContextMenu"
						ontrigger="
							SetOnclick('RequestSwapPlayerSlots(' # param3 # ', ' # param4 # ', {team}, {slot});
							Trigger(\'GameLobbyContextMenu\', false, 0, 0, 0, 0, -1);');
						"
						onmouseover="SetColor('1 1 1 .5');ShowWidget('game_lobby_swap_tip');"
						onmouseout="SetColor('invisible');HideWidget('game_lobby_swap_tip');"
					/>
				</panel>
			</panel>
		</panel>
	</template>

	<!-- Spectators -->
	<template name="spectator_list_entry">
		<panel texture="/ui/elements/line_break.tga" color="1 1 1 .1">
			<label x="1.0h" y="0.1h" textvalign="center" font="dyn_12" color="white" shadow="true" content="{username}"/>
			<panel x="-3.0h" width="18%" align="right">
				<instance name="player_action_button"
					align="left"
					width="65@" height="65%"
					onmouseover="ShowWidget('ModSpectatorTip'); Trigger('ModSpectatorTipTrigger', Translate('gamelobby_kick_tip', 'name', '{username}') );"
					onmouseout="HideWidget('ModSpectatorTip');"
					onhide="HideWidget('ModSpectatorTip');"
					texture="kick"
					onclick="PlaySound('/shared/sounds/ui/lobby/button_kick.wav'); Kick({index}); HideWidget('ModSpectatorTip');"
					visible="{cankick}"
				/>
				<instance name="player_action_button"
					align="right"
					width="60@" height="60%"
					onmouseover="ShowWidget('ModSpectatorTip'); Trigger('ModSpectatorTipTrigger', Translate('gamelobby_make_referee_tip', 'name', '{username}') );"
					onmouseout="HideWidget('ModSpectatorTip');"
					onhide="HideWidget('ModSpectatorTip');"
					texture="referee"
					onclick="PlaySound('/shared/sounds/ui/lobby/button_referee.wav'); PromoteRef({index}); HideWidget('ModSpectatorTip');"
					visible="{canpromote}"
				/>
			</panel>
		</panel>

	</template>

	<!-- Spectators -->
	<template name="spectator_list_entry_test">
		<listitem>
			<panel>
				<panel texture="/ui/elements/line_break.tga" color="1 1 1 .1">
					<label x="1.0h" y="0.1h" textvalign="center" font="dyn_12" color="white" shadow="true" content=""/>
					<panel x="-3.0h" width="18%" align="right">
						<instance name="player_action_button"
							align="left"
							width="65@" height="65%"
							onmouseover="ShowWidget('ModSpectatorTip'); Trigger('ModSpectatorTipTrigger', Translate('globby_kick_spec_tip'));"
							onmouseout="HideWidget('ModSpectatorTip');"
							onhide="HideWidget('ModSpectatorTip');"
							texture="kick"
							onclick="PlaySound('/shared/sounds/ui/lobby/button_kick.wav'); Kick(0); HideWidget('ModSpectatorTip');"
							visible="true"
						/>
						<instance name="player_action_button"
							align="right"
							width="60@" height="60%"
							onmouseover="ShowWidget('ModSpectatorTip'); Trigger('ModSpectatorTipTrigger', Translate('globby_make_ref_tip'));"
							onmouseout="HideWidget('ModSpectatorTip');"
							onhide="HideWidget('ModSpectatorTip');"
							texture="referee"
							onclick="PlaySound('/shared/sounds/ui/lobby/button_referee.wav'); PromoteRef(0); HideWidget('ModSpectatorTip');"
							visible="true"
						/>
					</panel>
				</panel>
			</panel>
		</listitem>
	</template>

	<!-- Add As Friend Button -->
	<template name="friend_button">
		<button
			color="invisible"
			watch="LobbyBuddy{index}"
			ontriggerlua="self:SetEnabled(param == '0' and not ViewingStreaming())"
			watch0="LobbyPlayerInfo{index}"
			ontrigger0="SetOnclick('ChatAddBuddy(\'' # param1 # '\');');"
			onmouseover="PlaySound('/shared/sounds/ui/button_over_02.wav'); ShowWidget('globby_addfriend_tip');"
			onmouseout="HideWidget('globby_addfriend_tip');"
		>
			<widgetstate statename="up">
				<frame texture="/ui/info/button.tga" borderthickness="50%" color="1 1 1 1"/>
				<label width="100%" height="100%" textvalign="center" textalign="center" valign="center" align="center" font="dyn_10" color="{color=white}" shadow="true" shadowcolor="black">+</label>
			</widgetstate>

			<widgetstate statename="over">
				<frame texture="/ui/info/button_over.tga" borderthickness="50%" />
				<label width="100%" height="100%" textvalign="center" textalign="center" valign="center" align="center" font="dyn_10" color="{color=white}" shadow="true" shadowcolor="#7F6E00">+</label>
			</widgetstate>

			<widgetstate statename="down" x="1" y="1">
				<frame texture="/ui/info/button_down.tga" borderthickness="50%" color="white"/>
				<label width="100%" height="100%" textvalign="center" textalign="center" valign="center" align="center" font="dyn_10" color="#3f0001" shadow="true" shadowcolor="#7F6E00">+</label>
			</widgetstate>

			<widgetstate statename="disabled">
				<frame texture="/ui/info/button.tga" borderthickness="50%" color="1 1 1 1"/>
				<frame texture="/ui/frames/rounded_button_bg_white.tga" borderthickness="50%" color=".3 .3 .3 .7"/>
				<label width="100%" height="100%" textvalign="center" textalign="center" valign="center" align="center" font="dyn_10" color="#494c5f" shadow="true" shadowcolor="black">+</label>
			</widgetstate>
		</button>
	</template>

	<!-- Stats Button -->
	<template name="stats_button">
		<button
			color="invisible"
			watch="LobbyPlayerInfo{index}"
			ontrigger="
				SetEnabled(!param84);
				if(param10 lt 0,
				SetText('N/A'),
				SetText(Round(param10)));
				if(param22 + param23 + param35 + param36 + param37 + param69 gt 0, Set('_psr_tipShow{index}', 1), Set('_psr_tipShow{index}', param78));
				Set('_psr_tipA{index}', '^444(^666' # Round(param22 / (param22 + param23) * 100) # '%^444) ^w' # param22 # '\\n' # param23 # '\\n' # FtoA(param25 / param27, 2) # ':1\\n' # FtoA(param26 / param27, 2) # ':1\\n' # FtoA((param25 + param26) / param27, 2) # ':1\\n' # FtoA(param31, 1) # '\\n' # FtoA(ceil(param29 * 10) / 10, 1) # '\\n' # FtoA(ceil(param30 * 10) / 10, 1) # '::' # param1 # '::' # param2 # '::' # param78  );
				Set('_psr_tipMatch{index}', param33 # ':' # param34 # ':^g' # param35 # '^w/^r' # param36 # '^w/^y' # param37 # '|' # param38 # ':' # param39 # ':^g' # param40 # '^w/^r' # param41 # '^w/^y' # param42 # '|' # param43 # ':' # param44 # ':^g' # param45 # '^w/^r' # param46 # '^w/^y' # param47 # '|' # param48 # ':' # param49 # ':^g' # param50 # '^w/^r' # param51 # '^w/^y' # param52 # '|' # param53 # ':' # param54 # ':^g' # param55 # '^w/^r' # param56 # '^w/^y' # param57 # '|' # param58 # ':' # param59 # ':^g' # param60 # '^w/^r' # param61 # '^w/^y' # param62 # '|' # param63 # ':' # param64 # ':^g' # param65 # '^w/^r' # param66 # '^w/^y' # param67);
				Set('_psr_tipHero{index}', param68 # ':' # param69 # ':null|' # param70 # ':' # param71 # ':null|' # param72 # ':' # param73 # ':null|' # param74 # ':' # param75 # ':null|' # param76 # ':' # param77 # ':null');
				SetOnclick('If(GamePhase le 3, Split
				(
					Set(\'_player_stats_searchname\', \'' # StripClanTag(param1) # '\'),
					CallEvent(\'player_stats_submit\'),
					Call(ui_autocompleteTextBox, \'EraseInputLine();\'),
					Set(\'_mainmenu_currentpanel\', \'player_stats\'),
					CallEvent(\'MainMenuPanelSwitcher\')
				))');
			"
			onmouseover="
			If(GamePhase le 3, Split
			(
			PlaySound('/shared/sounds/ui/button_over_02.wav'),
			ExplodeTrigger('GameLobby_NewStats', _psr_tipA{index}, '|', '::'),
			Trigger('GameLobby_StatsFade', _psr_tipShow{index}),
			ExplodeTrigger('GameLobby_RecentMatchTrigger', _psr_tipMatch{index}),
			ExplodeTrigger('GameLobby_FavHeroTrigger', _psr_tipHero{index}),
			ShowWidget('globby_viewstats_tip')
			));"
			onmouseout="
			HideWidget('globby_viewstats_tip');
			Trigger('GameLobby_StatsFade', 0);"
			onload="
			createstring('_psr_tipA{index}', '');
			createstring('_psr_tipMatch{index}', '');
			createstring('_psr_tipHero{index}', '');
			createbool('_psr_tipShow{index}', 0);"
		>
			<widgetstate statename="up">
				<frame texture="/ui/info/button.tga" borderthickness="50%" color="1 1 1 1"/>
				<image y="0.1h" texture="mainmenu/icons/stats.tga" noclick="true" />
			</widgetstate>
			<widgetstate statename="over">
				<frame texture="/ui/info/button_over.tga" borderthickness="50%" />
				<image texture="mainmenu/icons/stats_over.tga" noclick="true" />
			</widgetstate>
			<widgetstate statename="down" x="1" y="1">
				<frame texture="/ui/info/button_down.tga" borderthickness="50%" color="white"/>
				<image texture="mainmenu/icons/stats_over.tga" noclick="true" />
			</widgetstate>
			<widgetstate statename="disabled">
				<frame texture="/ui/info/button.tga" borderthickness="50%" color="1 1 1 1"/>
				<frame texture="/ui/frames/rounded_button_bg_white.tga" borderthickness="50%" color=".3 .3 .3 .7"/>
				<image texture="mainmenu/icons/stats_over.tga" rendermode="grayscale" noclick="true" />
			</widgetstate>
		</button>
	</template>

	<!-- Repick Button -->
	<template name="repick_button">
		<panel
			x="57%" y="23.4%"
			width="18@" height="18%"
			watch="HeroSelectPlayerInfo{index}"
			ontrigger="SetVisible(param0 != -1);"
			noclick="true">
				<panel noclick="true"
					watch="LobbyGameInfo"
					ontriggerlua="
						self:SetVisible(param15 ~= 'devowars')
					"
				>
				<button
					texture="lobby/repick_hero.tga"
					onclick="
						RepickHero();
						HideWidget('globby_repick_hero_tip');
						PlaySound('/shared/sounds/ui/hero_select/button_repick.wav');
						cg_avatarHero = '';
					"
					watch="HeroSelectPlayerInfo{index}"
					ontrigger="SetEnabled(param1 and param7);"
					onmouseover="
						PlaySound('/shared/sounds/ui/button_over_02.wav');
						ShowWidget('globby_repick_hero_tip');
					"
					onmouseout="HideWidget('globby_repick_hero_tip');"
				>
					<widgetstate statename="up">
						<image texture="lobby/repick_hero_up.tga" />
					</widgetstate>

					<widgetstate statename="over">
						<image texture="lobby/repick_hero_over.tga" />
					</widgetstate>

					<widgetstate statename="down">
						<image texture="lobby/repick_hero_down.tga" />
					</widgetstate>

					<widgetstate statename="disabled">
						<image texture="lobby/repick_hero_disabled.tga" />
					</widgetstate>
				</button>
			</panel>
		</panel>
	</template>

	<!-- Repick Button -->
	<template name="repick_button_right">
		<panel
			x="33.8%" y="23.4%"
			width="18@" height="18%"
			watch="HeroSelectPlayerInfo{index}"
			ontrigger="SetVisible(param0 != -1);"
			noclick="true">
				<panel noclick="true"
					watch="LobbyGameInfo"
					ontriggerlua="
						self:SetVisible(param15 ~= 'devowars')
					"
				>
				<button
					texture="lobby/repick_hero.tga"
					onclick="RepickHero(); HideWidget('globby_repick_hero_tip'); PlaySound('/shared/sounds/ui/hero_select/button_repick.wav');"
					watch="HeroSelectPlayerInfo{index}"
					ontrigger="SetEnabled(param1 and param7);"
					onmouseover="PlaySound('/shared/sounds/ui/button_over_02.wav'); ShowWidget('globby_repick_hero_tip');"
					onmouseout="HideWidget('globby_repick_hero_tip');"
				>
					<widgetstate statename="up">
						<image texture="lobby/repick_hero_up.tga" />
					</widgetstate>

					<widgetstate statename="over">
						<image texture="lobby/repick_hero_over.tga" />
					</widgetstate>

					<widgetstate statename="down">
						<image texture="lobby/repick_hero_down.tga" />
					</widgetstate>

					<widgetstate statename="disabled">
						<image texture="lobby/repick_hero_disabled.tga" />
					</widgetstate>
				</button>
			</panel>
		</panel>
	</template>

	<!-- Player side disc(Left)-->
	<template name="player_side_disc">
		<panel name="player_side_disc{index}" x="0" width="100@" height="100%">
			<!-- Color bubble -->
			<image
				name="color_slot_left_{index}"
				x="-21.5%" y="-2.5%"
				width="27%" height="27%"
				align="center" valign="center"
				texture="lobby/slot_color.tga"
				watch="LobbyPlayerInfo{index}"
				ontrigger="
						SetColor(param2);
				"
			/>

			<!--
			<image
				name="color_slot_left_click_{index}"
				x="-21.5%" y="-2.5%"
				width="27%" height="27%"
				align="center" valign="center"
				texture="lobby/slot_color.tga"
				watch1="GamePhase"
				ontrigger1="SetVisible(param0 == 1)"
				onclick="Trigger('GameLobbyContextMenu', false, 0, 0, 0, 0, -1);"
				watch="LobbyPlayerInfo{index}"
				ontrigger="
							SetColor(param2);
							If(param17,
								SetOnrightclick(
									'Trigger(\'GameLobbyContextMenu\', true, GetCursorPosX(), GetCursorPosY(), 1, {slot}, ' # param0 # ');'
								),
								SetOnrightclick('')
							);
				"

			/>
			-->

			<!-- Voice Button -->
			<panel name="player_slot_mute_button{index}" x="-21.5%" y="-2.5%" align="center" valign="center" width="18@" height="18%" noclick="false" visible="0">
				<instance name="voice_button" index="{index}"/>
			</panel>

			<!-- Add Friend Button  -->
			<panel x="-13.5%" y="-19.5%" width="15%" height="15%" align="center" valign="center">
				<instance name="friend_button" team="1" index="{index}"/>
			</panel>

			<!-- Stats Button -->
			<panel x="-17.5%" y="15.0%" width="15%" height="15%" align="center" valign="center">
				<instance name="stats_button" index="{index}"/>
			</panel>
			<image name="player_side_disc_frame{index}" texture="lobby/mastery/sd_frame_iron.tga" noclick="true"
				   watch="HeroSelectMastery{index}"
				   ontriggerlua="self:SetTexture('/ui/fe2/lobby/mastery/sd_frame_'..param0..'.tga')"/>
			<image texture="lobby/mastery/sd_gear_iron.tga" width="25%" height="25%" y="15.6%" x="1.2%" align="center" valign="center" noclick="true"
			       watch="HeroSelectMastery{index}"
				   ontriggerlua="self:SetTexture('/ui/fe2/lobby/mastery/sd_gear_'..param0..'.tga')" />
		</panel>
	</template>

	<!-- Player side disc(Right)-->
	<template name="player_side_disc_right">
		<panel name="player_side_disc{index}" align="right" x="0" width="100@" height="100%">
			<!-- Color bubble -->
			<image
				name="color_slot_right_{index}"
				x="21.5%" y="-2.5%"
				width="27%" height="27%"
				align="center" valign="center"
				texture="lobby/slot_color.tga"
				watch="LobbyPlayerInfo{index}"
				ontrigger="
						SetColor(param2);
						if(param22 + param23 + param35 + param36 + param37 + param69 gt 0, Set('_psr_tipShow{index}', 1), Set('_psr_tipShow{index}', param78));
						Set('_psr_tipA{index}', '^444(^666' # Round(param22 / (param22 + param23) * 100) # '%^444) ^w' # param22 # '\\n' # param23 # '\\n' # FtoA(param25 / param27, 2) # ':1\\n' # FtoA(param26 / param27, 2) # ':1\\n' # FtoA((param25 + param26) / param27, 2) # ':1\\n' # FtoA(param31, 1) # '\\n' # FtoA(ceil(param29 * 10) / 10, 1) # '\\n' # FtoA(ceil(param30 * 10) / 10, 1) # '::' # param1 # '::' # param2 # '::' # param78  );
						Set('_psr_tipMatch{index}', param33 # ':' # param34 # ':^g' # param35 # '^w/^r' # param36 # '^w/^y' # param37 # '|' # param38 # ':' # param39 # ':^g' # param40 # '^w/^r' # param41 # '^w/^y' # param42 # '|' # param43 # ':' # param44 # ':^g' # param45 # '^w/^r' # param46 # '^w/^y' # param47 # '|' # param48 # ':' # param49 # ':^g' # param50 # '^w/^r' # param51 # '^w/^y' # param52 # '|' # param53 # ':' # param54 # ':^g' # param55 # '^w/^r' # param56 # '^w/^y' # param57 # '|' # param58 # ':' # param59 # ':^g' # param60 # '^w/^r' # param61 # '^w/^y' # param62 # '|' # param63 # ':' # param64 # ':^g' # param65 # '^w/^r' # param66 # '^w/^y' # param67);
						Set('_psr_tipHero{index}', param68 # ':' # param69 # ':null|' # param70 # ':' # param71 # ':null|' # param72 # ':' # param73 # ':null|' # param74 # ':' # param75 # ':null|' # param76 # ':' # param77 # ':null');
				"
				onmouseover="
						ExplodeTrigger('GameLobby_NewStats', _psr_tipA{index}, '|', '::');
						Trigger('GameLobby_StatsFade', _psr_tipShow{index});
						ExplodeTrigger('GameLobby_RecentMatchTrigger', _psr_tipMatch{index});
						ExplodeTrigger('GameLobby_FavHeroTrigger', _psr_tipHero{index});
				"
				onmouseout="
						Trigger('GameLobby_StatsFade', 0);
				"
				onload="
						createstring('_psr_tipA{index}', '');
						createstring('_psr_tipMatch{index}', '');
						createstring('_psr_tipHero{index}', '');
						createbool('_psr_tipShow{index}', false);
				"
			/>

			<!--
			<image
				name="color_slot_right_click_{index}"
				x="21.5%" y="-2.5%"
				width="27%" height="27%"
				align="center" valign="center"
				texture="lobby/slot_color.tga"
				watch1="GamePhase"
				ontrigger1="SetVisible(param0 == 1)"
				onclick="Trigger('GameLobbyContextMenu', false, 0, 0, 0, 0, -1);"
				watch="LobbyPlayerInfo{index}"
				ontrigger="
							SetColor(param2);
							If(param17,
							SetOnrightclick(
								'Trigger(\'GameLobbyContextMenu\', true, GetCursorPosX()-100, GetCursorPosY(), 2, {slot}, ' # param0 # ');'
							),
							SetOnrightclick('')
						);
					"
			/>
			-->

			<!-- Voice Button -->
			<panel name="player_slot_mute_button{index}" x="21.5%" y="-2.5%" align="center" valign="center" width="18@" height="18%" noclick="false" visible="0">
				<instance name="voice_button" index="{index}"/>
			</panel>

			<!-- Add Friend Button  -->
			<panel x="13.5%" y="-19.5%" width="15%" height="15%" align="center" valign="center">
				<instance name="friend_button" team="1" index="{index}"/>
			</panel>

			<!-- Stats Button -->
			<panel x="17.5%" y="15.0%" width="15%" height="15%" align="center" valign="center">
				<instance name="stats_button" index="{index}"/>
			</panel>

			<image name="player_side_disc_frame{index}" texture="lobby/mastery/sd_frame_iron.tga" noclick="true" hflip="1"
				   watch="HeroSelectMastery{index}"
				   ontriggerlua="self:SetTexture('/ui/fe2/lobby/mastery/sd_frame_'..param0..'.tga')"/>
			<image texture="lobby/mastery/sd_gear_iron.tga" width="25%" height="25%" y="15.6%" x="-1.2%" align="center" valign="center" noclick="true"
				   watch="HeroSelectMastery{index}"
				   ontriggerlua="self:SetTexture('/ui/fe2/lobby/mastery/sd_gear_'..param0..'.tga')"/>
		</panel>
	</template>

	<!-- Voice chat indicator/mute button -->
	<template name="voice_icon">
		<image
			texture="/ui/common/chat.tga"
			watch="LobbyVoice{index}"
			ontrigger="
				If(param == -2, Split(SetRenderMode('grayscale'), SetColor('.5 .5 .5')),
				If(param == -1, Split(SetRenderMode('normal'), SetColor('red')),
				If(param == 0, Split(SetRenderMode('normal'), SetColor('white')),
				If(param == 1, Split(SetRenderMode('normal'), SetColor('green'))
				))));
			"
		/>
	</template>

	<panel
		watch="PlayerCanBan" noclick="1"
		ontrigger="if(param0, SleepWidget(2200, 'PlaySound(\'/shared/sounds/announcer/lobby/ban_hero.wav\')'));"
		watch1="PlayerCanPick"
		ontrigger1="if(param0, SleepWidget(2200, 'PlaySound(\'/shared/sounds/announcer/lobby/pick_hero.wav\')'));"
	/>

	<template name="voice_button">
		<button
			onmouseover="PlaySound('/shared/sounds/ui/button_over_02.wav'); ShowWidget('globby_voice_tip');"
			onmouseout="HideWidget('globby_voice_tip');"
			color="invisible"
			watch="LobbyPlayerInfo{index}"
			ontrigger="
				SetOnclick('ToggleVoiceMute(' # param0 # ');');
				SetEnabled(!param8 and param18 and !ViewingStreaming());
			"
		>
			<widgetstate statename="up">
				<instance name="voice_icon" index="{index}"/>
			</widgetstate>
			<widgetstate statename="over" align="center" valign="center" width="110%" height="110%">
				<instance name="voice_icon" index="{index}"/>
			</widgetstate>
			<widgetstate statename="down" x="1" y="1">
				<instance name="voice_icon" index="{index}"/>
			</widgetstate>
		</button>
	</template>

	<!-- Lock Button -->
	<template name="lock_icon">
		<image
			watch="LobbyPlayerInfo{index}"
			ontrigger="
				If(param15, SetTexture('/ui/elements/lobby/lock.tga'), SetTexture('/ui/elements/lobby/unlock.tga'));
			"
		/>
	</template>

	<template name="lock_button">
		<panel x="2.75h" y="3.8h" width="3.25h" height="6.5h" noclick="true" watch="GamePhase" ontrigger="SetVisible(param0 == 1);">
			<panel watch="LobbyStatus" ontrigger="SetVisible(param1);" noclick="true">
				<button
					x="0.1h" y="-0.6h"
					width="2.25h" height="2.25h"
					align="center" valign="bottom"
					color="invisible"
					watch="LobbyPlayerInfo{index}"
					ontrigger="SetEnabled(param17);
					if(!param21,
						SetOnclick('PlaySound(\'/shared/sounds/ui/lobby/button_lock.wav\'); RequestToggleSlotLock({team}, {slot});'),
						SetOnclick('PlaySound(\'/shared/sounds/ui/lobby/button_lock.wav\');')
					);

					if(param17,
						if(!param21,
							if(param15,
								Setonmouseover('ShowWidget(\'globby_unlock_tip\'); PlaySound(\'/shared/sounds/ui/button_over_02.wav\');'),
								Setonmouseover('ShowWidget(\'globby_lock_tip\'); PlaySound(\'/shared/sounds/ui/button_over_02.wav\');')
							),
							Setonmouseover('ShowWidget(\'globby_disabled_tip\'); PlaySound(\'/shared/sounds/ui/button_over_02.wav\');')
						)
					);
					"
					onmouseout="HideWidget('globby_lock_tip'); HideWidget('globby_unlock_tip'); HideWidget('globby_disabled_tip');"
				>
					<widgetstate statename="up">
						<instance name="lock_icon" index="{index}"/>
					</widgetstate>
					<widgetstate statename="over" x="-5%" y="-5%" width="110%" height="110%">
						<instance name="lock_icon" index="{index}"/>
						<image texture="mainmenu/grad_glow2.tga" color=".25 .25 0" rendermode="additive"/>
					</widgetstate>
					<widgetstate statename="down" x="1" y="1">
						<instance name="lock_icon" index="{index}"/>
						<image texture="mainmenu/grad_glow2.tga" color=".125 .125 0" rendermode="additive"/>
					</widgetstate>
					<widgetstate statename="disabled">
						<instance name="lock_icon" index="{index}"/>
					</widgetstate>
				</button>

				<image texture="lobby/legion_lock_frame.tga" noclick="true"/>
			</panel>
		</panel>
	</template>

	<template name="lock_button_right">
		<panel x="-2.75h" y="3.8h" width="3.25h" height="6.5h" noclick="true" watch="GamePhase" align="right" ontrigger="SetVisible(param0 == 1);">
			<panel watch="LobbyStatus" ontrigger="SetVisible(param1);" noclick="true">
				<button
					x="-0.1h" y="-0.6h"
					width="2.25h" height="2.25h"
					align="center" valign="bottom"
					color="invisible"
					watch="LobbyPlayerInfo{index}"
					ontrigger="SetEnabled(param17);
					if(!param21,
						SetOnclick('PlaySound(\'/shared/sounds/ui/lobby/button_lock.wav\'); RequestToggleSlotLock({team}, {slot});'),
						SetOnclick('PlaySound(\'/shared/sounds/ui/lobby/button_lock.wav\');')
					);

					if(param17,
						if(!param21,
							if(param15,
								Setonmouseover('ShowWidget(\'globby_unlock_tip\'); PlaySound(\'/shared/sounds/ui/button_over_02.wav\');'),
								Setonmouseover('ShowWidget(\'globby_lock_tip\'); PlaySound(\'/shared/sounds/ui/button_over_02.wav\');')
							),
							Setonmouseover('ShowWidget(\'globby_disabled_tip\'); PlaySound(\'/shared/sounds/ui/button_over_02.wav\');')
						)
					);
					"
					onmouseout="HideWidget('globby_lock_tip'); HideWidget('globby_unlock_tip'); HideWidget('globby_disabled_tip');"
				>
					<widgetstate statename="up">
						<instance name="lock_icon" index="{index}"/>
					</widgetstate>
					<widgetstate statename="over" x="-5%" y="-5%" width="110%" height="110%">
						<instance name="lock_icon" index="{index}"/>
						<image texture="mainmenu/grad_glow2.tga" color=".25 .25 0" rendermode="additive"/>
					</widgetstate>
					<widgetstate statename="down" x="1" y="1">
						<instance name="lock_icon" index="{index}"/>
						<image texture="mainmenu/grad_glow2.tga" color=".125 .125 0" rendermode="additive"/>
					</widgetstate>
					<widgetstate statename="disabled">
						<instance name="lock_icon" index="{index}"/>
					</widgetstate>
				</button>

				<image texture="lobby/hellbourne_lock_frame.tga" noclick="true"/>
			</panel>
		</panel>
	</template>

	<!-- Right Hero Slot -->
	<template name="hero_slot_right">
		<panel
			height="19%"
			noclick="true" sticky="true" stickytoinvis="false"
			watch0="GamePhase"
			ontrigger0="
				If(param0 gt 1,
					Split(
						SetWatch('HeroSelectPlayerInfo{index}'),
						SetOntrigger('SetVisible(param2 != -1);')
					),
					Split(
						SetWatch('LobbyTeamInfo{team}'),
						SetOntrigger('SetVisible({slot} lt param2);')
					)
				);
			"
		>
			<!-- Slot Indication -->
			<panel width="30h" height="16h" x="0h" y="1h" align="right" valign="center" watch="GamePhase" ontrigger="SetVisible(param0 gt 1 and param0 lt 4)" noclick="1" color="invisible" visible="0">

				<modelpanel
					watch="HeroSelectPlayerInfo{index}"
					ontrigger="SetVisible(param1);"

					valign="center"
					align="center"

					ortho="false"
					noclick="true"
					model="mainmenu/bg_effects/debug.mdf"
					effect="mainmenu/bg_effects/slot_right.effect"
					anim="idle"

					camerapos="0 -950 00"
					cameraangles="0 0 0"
					camerafov="35"
					modelangles="0 0 0"
					modelpos="0 50 0"
					lookat="0"
				/>
			</panel>

			<panel x="-2.0h" height="11.8h" align="right" noclick="true">
				<!-- Lower Panels -->
				<panel x="-58.5@"  y="33.9%" height="50%" noclick="true">
					<!-- Panel 2 -->
					<image name="player_slot_panel2{index}"   x="110.0@"  width="200@" height="100%" valign="bottom" align="right" noclick="true" hflip="1"
						resourcecontext="lobby" watch9="MainRegisterTextures"
						ontrigger9lua="ResourceManager.RegisterTexture('/ui/fe2/lobby/mastery/panel2_iron.tga', 'lobby', self)"
						watch="HeroSelectMastery{index}"
				  		ontriggerlua="self:SetTexture('/ui/fe2/lobby/mastery/panel2_'..param0..'.tga')"
					/>

					<!-- Panel 3  -->
					<panel name="player_slot_panel3_slide{index}" x="160.0@" y="100%" width="400@" height="200%" noclick="true" valign="bottom" align="right" >
						<image name="player_slot_panel3{index}" noclick="true" onload="Rotate(90, 1);" hflip="1"
							resourcecontext="lobby" watch9="MainRegisterTextures"
							ontrigger9lua="ResourceManager.RegisterTexture('/ui/fe2/lobby/mastery/panel3_iron.tga', 'lobby', self)"
							watch="HeroSelectMastery{index}"
				  			ontriggerlua="self:SetTexture('/ui/fe2/lobby/mastery/panel3_'..param0..'.tga')"
						/>
					</panel>

					<!-- Panel 1 / right Door-->
					<panel width="200@" height="100%"  valign="bottom" align="right" noclick="true">
						<image name="player_slot_panel1{index}" x="50.0%" noclick="true" hflip="1"
							resourcecontext="lobby" watch9="MainRegisterTextures"
							ontrigger9lua="ResourceManager.RegisterTexture('/ui/fe2/lobby/mastery/panel1_iron.tga', 'lobby', self)"
							watch="HeroSelectMastery{index}"
				  		   	ontriggerlua="self:SetTexture('/ui/fe2/lobby/mastery/panel1_'..param0..'.tga')"
						/>
						<image name="player_slot_left_door{index}" y="3%" height="-3.0%" x="50.0%" noclick="true" hflip="1"
							resourcecontext="lobby" watch9="MainRegisterTextures"
							ontrigger9lua="ResourceManager.RegisterTexture('/ui/fe2/lobby/mastery/near_door_iron.tga', 'lobby', self)"
							watch="HeroSelectMastery{index}"
				  		   	ontriggerlua="self:SetTexture('/ui/fe2/lobby/mastery/near_door_'..param0..'.tga')"
						/>
					</panel>

					<!-- Right Door / Panel 3 Cover / Bolt  -->
					<panel name="player_slot_panel3extras_container{index}" x="160.0@" y="100%" width="400@" height="200%" valign="bottom" align="right" noclick="true" >
						<panel name="player_slot_right_door_slide{index}" y="2%" height="-6.0%" noclick="true">
							<image name="player_slot_right_door{index}" noclick="true" onload="Rotate(90, 1);" hflip="1"
								resourcecontext="lobby" watch9="MainRegisterTextures"
								ontrigger9lua="ResourceManager.RegisterTexture('/ui/fe2/lobby/mastery/far_door_iron.tga', 'lobby', self)"
								watch="HeroSelectMastery{index}"
				  		   		ontriggerlua="self:SetTexture('/ui/fe2/lobby/mastery/far_door_'..param0..'.tga')"
							/>
						</panel>

						<image texture="/ui/fe2/lobby/mastery/panel3_cover_iron.tga" name="player_slot_panel3_cover{index}" noclick="true" onload="Rotate(90, 1);"  hflip="1"
							resourcecontext="lobby" watch9="MainRegisterTextures"
							ontrigger9lua="ResourceManager.RegisterTexture('/ui/fe2/lobby/mastery/panel3_cover_iron.tga', 'lobby', self)"
							watch="HeroSelectMastery{index}"
				  		   	ontriggerlua="self:SetTexture('/ui/fe2/lobby/mastery/panel3_cover_'..param0..'.tga')"
						/>
						<image texture="/ui/fe2/lobby/bolt.tga" name="player_slot_bolt{index}" y="-4.0%" x="0.5@" width="12.5@" height="12.5%" align="center" valign="center" noclick="true" onload="Rotate(0, 1);"
							resourcecontext="lobby" watch9="MainRegisterTextures"
							ontrigger9lua="ResourceManager.RegisterTexture('/ui/fe2/lobby/bolt.tga', 'lobby', self)"
						/>

						<!-- Leave Team Button -->
						<panel noclick="true" watch="GamePhase" ontrigger="SetVisible(param0 le 1);">
							<panel name="player_slot_leave_button{index}" visible="0" x="22.3%" y="23.4%" width="18@" height="18%" noclick="true">
								<button
									texture="/ui/elements/kick.tga"
									watch="LobbyPlayerInfo{index}"
									ontrigger="SetVisible(param8);"
									onclick="PlaySound('/shared/sounds/ui/lobby/iris_panel_close.wav'); Team(-1);"
									onmouseover="PlaySound('/shared/sounds/ui/button_over_02.wav'); ShowWidget('globby_leave_team_tip');"
									onmouseout="HideWidget('globby_leave_team_tip');"
								/>
							</panel>
						</panel>

						<!-- Kick Bot Button -->
						<panel name="play_slot_kick_bot_button{index}" visible="0" x="22.3%" y="23.4%" width="18@" height="18%" noclick="true">
							<button
								texture="/ui/elements/kick.tga"
								watch="LobbyPlayerInfo{index}"
								ontrigger="If(param84 and IsHost(),
											Split(
												SetOnClick('
													PlaySound(\'/shared/sounds/ui/lobby/iris_panel_close.wav\');
													Kick('#param0#');
												'),
												SetVisible(1)
											),
											SetVisible(0)
										   );"
								ontriggerlua="local name = param1
												self:SetCallback('onclick', function() Game_Lobby:WatchBotKicked(nil, name) end)
												self:RefreshCallbacks()"
								onmouseover="PlaySound('/shared/sounds/ui/button_over_02.wav');
											Trigger('genericMainFloatingTip', true, '9h', '', '', 'game_lobby_kick_bot_tip', '', '', '3h', '-2h');"
								onmouseout="HideWidget('genericMainFloatingTip');"
							/>
						</panel>

						<panel name="player_slot_repick_buttons{index}" visible="0" noclick="true" watch="GamePhase" ontriggerlua="if tonumber(param0) >= 4 then self:SetVisible(0) end">
							<!-- Repick Button -->
							<instance name="repick_button_right" index="{index}" team="{team}" slot="{slot}"/>

							<!-- Swap Button -->
							<panel name="player_slot_swap_button{index}" visible="1" x="22.3%" y="23.4%" width="18@" height="18%" noclick="true" >
								<button
									texture="lobby/swap_hero.tga"
									watch="HeroSelectPlayerInfo{index}"
									onmouseover="PlaySound('/shared/sounds/ui/button_over_02.wav'); ShowWidget('globby_swap_hero_tip');"
									onmouseout="HideWidget('globby_swap_hero_tip');"
									ondisable="HideWidget('globby_swap_hero_tip'); HideWidget('globby_swap_hero_noeap_tip');"
									onmouseoverdisabled=""
									onmouseoutdisabled="HideWidget('globby_swap_hero_noeap_tip');"
									disabledmouseover="1"
									disabledmouseout="1"
									ontrigger="If(!param1 and param8 and !param9 and param11 and !param12, SetEnabled(1), SetEnabled(0));
										If(param29,
											SetOnMouseOverDisabled('PlaySound(\'/shared/sounds/ui/button_over_02.wav\'); ShowWidget(\'globby_swap_hero_noeap_tip\');'),
											SetOnMouseOverDisabled('')
										);
									"
									watch1="LobbyGameInfo"
									ontrigger1lua="self:SetVisible(param15 ~= 'devowars')"
									onclick="SwapHeroRequest({index} % 5); PlaySound('/shared/sounds/ui/button_click_02.wav'); HideWidget('globby_swap_hero_tip');"
								/>
							</panel>
						</panel>

					</panel>
				</panel>
				<!-- closed width="15%" x="-5h" open width="68%" -->
				<panel name="hero_name_container_left{index}" x="-5h"  y="14%" width="15%" height="22%" align="right" noclick="true"  >
					<image texture="lobby/mastery/hero_track_iron.tga"
						   watch="HeroSelectMastery{index}"
				  		   ontriggerlua="self:SetTexture('/ui/fe2/lobby/mastery/hero_track_'..param0..'.tga')"/>
					<image width="200@" x="-100@" align="left" hflip="1" texture="lobby/mastery/slideout_1_iron.tga"
						   watch="HeroSelectMastery{index}"
				  		   ontriggerlua="self:SetTexture('/ui/fe2/lobby/mastery/slideout_1_'..param0..'.tga')"/>

					<panel watch="GamePhase" ontrigger="SetVisible(param0 gt 1)" noclick="1">
						<panel  width="72%" height="60%" x="1.1h" valign="center" align="right"
								noclick="1"
								watch="HeroSelectPlayerInfo{index}"
								ontrigger="SetVisible(param30 or (param14 and !param26) or (param14 and (param41 == 6) and (param40 == 2)) or (param14 and (param40 == 11)));"
								visible="0"
						>
							<panel x="9.2%" float="right" padding="0" >
								<panel watch="GamePhaseExtended" ontrigger="If(param0 == 2, SetColor('1 0 0 .4'), If(param0 == 8, SetColor('1 0.7 0 .4'), If(param0 == 9, SetColor('1 1 0 .4'), SetColor('0 1 0 .4'))));" texture="lobby/arrow_right.tga" width="100@" color="0 1 0 .4" visible="1"/>
								<panel watch="GamePhaseExtended" ontrigger="If(param0 == 2, SetColor('1 0 0 .4'), If(param0 == 8, SetColor('1 0.7 0 .4'), If(param0 == 9, SetColor('1 1 0 .4'), SetColor('0 1 0 .4'))));" texture="lobby/arrow_right.tga" width="100@" color="0 1 0 .4" visible="1"/>
								<panel watch="GamePhaseExtended" ontrigger="If(param0 == 2, SetColor('1 0 0 .4'), If(param0 == 8, SetColor('1 0.7 0 .4'), If(param0 == 9, SetColor('1 1 0 .4'), SetColor('0 1 0 .4'))));" texture="lobby/arrow_right.tga" width="100@" color="0 1 0 .4" visible="1"/>
								<panel watch="GamePhaseExtended" ontrigger="If(param0 == 2, SetColor('1 0 0 .4'), If(param0 == 8, SetColor('1 0.7 0 .4'), If(param0 == 9, SetColor('1 1 0 .4'), SetColor('0 1 0 .4'))));" texture="lobby/arrow_right.tga" width="100@" color="0 1 0 .4" visible="1"/>
								<panel watch="GamePhaseExtended" ontrigger="If(param0 == 2, SetColor('1 0 0 .4'), If(param0 == 8, SetColor('1 0.7 0 .4'), If(param0 == 9, SetColor('1 1 0 .4'), SetColor('0 1 0 .4'))));" texture="lobby/arrow_right.tga" width="100@" color="0 1 0 .4" visible="1" />
							</panel>

							<panel x="9.2%" float="right" padding="0" >
								<panel watch="GamePhaseExtended" ontrigger="If(param0 == 2, SetColor('1 0 0 1'), If(param0 == 8, SetColor('1 0.7 0 1'), If(param0 == 9, SetColor('1 1 0 1'), SetColor('0 1 0 1')))); SleepWidget(200,'Call(\'arrow_2_{index}\', \'setvisible(0); setvisible(1);\')'); fadeout(600);" onshow="SleepWidget(200,'Call(\'arrow_2_{index}\', \'setvisible(0); setvisible(1);\')'); fadeout(600);" texture="lobby/arrow_right.tga" name="arrow_1_{index}" width="100@" color="0 1 0 1" visible="1"/>
								<panel watch="GamePhaseExtended" ontrigger="If(param0 == 2, SetColor('1 0 0 1'), If(param0 == 8, SetColor('1 0.7 0 1'), If(param0 == 9, SetColor('1 1 0 1'), SetColor('0 1 0 1'))));" onshow="SleepWidget(200,'Call(\'arrow_3_{index}\', \'setvisible(0); setvisible(1);\')'); fadeout(600);" texture="lobby/arrow_right.tga" name="arrow_2_{index}" width="100@" color="0 1 0 1" visible="0"/>
								<panel watch="GamePhaseExtended" ontrigger="If(param0 == 2, SetColor('1 0 0 1'), If(param0 == 8, SetColor('1 0.7 0 1'), If(param0 == 9, SetColor('1 1 0 1'), SetColor('0 1 0 1'))));" onshow="SleepWidget(200,'Call(\'arrow_4_{index}\', \'setvisible(0); setvisible(1);\')'); fadeout(600);" texture="lobby/arrow_right.tga" name="arrow_3_{index}" width="100@" color="0 1 0 1" visible="0"/>
								<panel watch="GamePhaseExtended" ontrigger="If(param0 == 2, SetColor('1 0 0 1'), If(param0 == 8, SetColor('1 0.7 0 1'), If(param0 == 9, SetColor('1 1 0 1'), SetColor('0 1 0 1'))));" onshow="SleepWidget(200,'Call(\'arrow_5_{index}\', \'setvisible(0); setvisible(1);\')'); fadeout(600);" texture="lobby/arrow_right.tga" name="arrow_4_{index}" width="100@" color="0 1 0 1" visible="0"/>
								<panel watch="GamePhaseExtended" ontrigger="If(param0 == 2, SetColor('1 0 0 1'), If(param0 == 8, SetColor('1 0.7 0 1'), If(param0 == 9, SetColor('1 1 0 1'), SetColor('0 1 0 1'))));" onshow="SleepWidget(200,'Call(\'arrow_1_{index}\', \'setvisible(0); setvisible(1);\')'); fadeout(600);" texture="lobby/arrow_right.tga" name="arrow_5_{index}" width="100@" color="0 1 0 1" visible="1" />
							</panel>

							<label 	x="-68%" height="100%" font="dyn_10" textvalign="center" textalign="center" color="0 1 0 1" shadow="1" content="???"
								watch="HeroSelectPlayerInfo{index}"
								ontrigger="
									If(param40 == 2,
										Split(
											SetColor('1 0 0 1'),
											SetText(Translate('game_lobby_banning'))
										)
									,
										If(param40 == 9,
											Split(
												SetColor('1 0.7 0 1'),
												SetText(Translate('game_lobby_hidden_banning'))
											)
										,
											If(param40 == 11,
												Split(
													SetColor('1 1 0 1'),
													SetText(Translate('game_lobby_locking'))
												)
											,
												If(param40 == 12,
													Split(
														SetColor('0 1 0 1'),
														SetText(Translate('game_lobby_shuffle_picking'))
													)
												,
													If(param40 == 13,
														Split(
															SetColor('1 0.7 0 1'),
															SetText(Translate('game_lobby_vote_banning'))
														)
													,
														If(param30,
															Split(
																SetColor('0 1 0 1'),
																SetText(Translate('game_lobby_captains_pick'))
															)
														,
															Split(
																SetColor('0 1 0 1'),
																SetText(Translate('game_lobby_picking'))
															)
														)
													)
												)
											)
										)
									);
								"
							/>
						</panel>

						<panel width="72%" x="-5.4h" align="right" noclick="true">
							<label textalign="right" watch="HeroSelectPlayerInfo{index}" ontrigger="SetText(param5)" height="100%" font="dyn_9" textvalign="center" color="white" outline="1" content=""/>
						</panel>
					</panel>
				</panel>
				<!-- Player Side Disc-->
				<instance name="player_side_disc_right" index="{index}" slot="{slot}"/>

				<!-- Round Pod -->
				<panel width="100@" height="100%" align="right" noclick="true">

					<!-- ASSET LOADING BAR 	need to move the x with the percent		-->
					<panel watch="GamePhase" ontrigger="SetVisible(param0 == 4);" name="asset_loading_bar_{index}" x="-50%" align="right" width="48h" y="-6%" height="3.4h" valign="center" color="invisible" noclick="true">
						<panel
							watch="HeroSelectPlayerInfo{index}"
							ontriggerlua=
							"
								if(AtoN(param18) >= 1) then
									if( not AtoB(param20) and GetWidget('race_result_{index}'):GetText() == '') then
										GetWidget('race_result_{index}'):SetText(GetCvarString('_raceResult') )
										Set('_raceResult', GetCvarInt('_raceResult') + 1)
									end
								else
									GetWidget('race_result_{index}'):SetText('')
								end
							"
						/>

						<panel width="100%" align="right"
							name="asset_loading_bar_controller{index}"
							group="asset_loading_bars"
							watch="HeroSelectPlayerInfo{index}"
							ontrigger="SetWidth(FtoP(param18));"
							noclick="true"
						>
							<panel valign="center" height="110%" texture="lobby/hero_track.tga" noclick="true"/>
							<panel
								watch="HeroSelectPlayerInfo{index}"
								color=".24 .24 .24 1"
								height="2.5h"
								valign="center"
								width="100%"
								noclick="true"
							/>

							<image
								width="100%"
								watch="HeroSelectPlayerInfo{index}"
								ontrigger="SetColor(param4);"
								height="2.5h"
								valign="center"
								texture="/ui/elements/hero_bar.tga"
								rendermode="overlay"
								noclick="true"
							>
							</image>

							<panel
								color="white"
								height="2.5h"
								valign="center"
								width="100%"
								noclick="true"
							/>

							<image
								width="100%"
								watch="HeroSelectPlayerInfo{index}"
								ontrigger="SetColor(param4);"
								height="2.5h"
								valign="center"
								texture="/ui/elements/hero_bar.tga"
								rendermode="overlay"
								noclick="true"
							/>

							<panel height="12.5h" width="12.5h" x="-6.25h"  valign="center" align="left" noclick="1" >
								<image width="33.5%" height="32.5%" align="center" valign="center" texture="/ui/fe2/mainmenu/avatar.tga" noclick="1"
									watch="HeroSelectPlayerInfo{index}"
									ontriggerlua="
										if (NotEmpty(param6)) then
											self:SetTexture(param6)
										else
											self:SetTexture('/ui/common/ability_coverup.tga')
										end

										if AtoB(param25) then
											self:SetColor('0.7 0.7 0.7 0.8')
										else
											self:SetColor('1.0 1.0 1.0 1.0')
										end
									"
									resourcecontext="lobby"
								/>

								<panel color="white" valign="center" align="left" texture="lobby/pod_race_gear.tga" noclick="1"/>
								<panel color="white" valign="center" align="left" texture="lobby/portrait_race_frame.tga" noclick="1"/>

							</panel>
						</panel>
					</panel>

					<image x="6.5%" width="25%" texture="lobby/mastery/arch_iron.tga" align="left" hflip="1" noclick="true"
					       watch="HeroSelectMastery{index}"
				  		   ontriggerlua="self:SetTexture('/ui/fe2/lobby/mastery/arch_'..param0..'.tga')" />

					<panel x="-2.75%" y="-6.5%" noclick="true">
						<panel x="0" y="0" width="43%" height="43%" align="center" valign="center" noclick="true">
							<panel watch="GamePhase" ontrigger="SetVisible(param0 == 1)" noclick="1">
								<!-- Avatar -->
								<avatar
									name="LobbyPlayerAvatar{index}"
									texture="/ui/common/ability_coverup.tga"
									watch="LobbyPlayerInfo{index}"
									ontrigger="
										SetTexture('/ui/common/ability_coverup.tga');
										If(!StringEmpty(param82),
											SetTexture(param82),
											If(param9 gt 0, SetAvatar('http://www.heroesofnewerth.com/getAvatar.php?id=' # param9))
										);
									"
									resourcecontext="lobby"
								/>
							</panel>

							<panel watch="GamePhase" ontrigger="SetVisible(param0 gt 1)" noclick="1">

								<!-- Hero (Right) -->
								<image x="0" y="0" width="110%" height="110%" valign="center" align="center" visible="0"
									watch="HeroSelectPlayerInfo{index}"
									ontrigger="
										If(param25,
											SetRenderMode('grayscale'),
											SetRenderMode('normal')
										);
										SetOnmouseover('ShowWidget(\'hero_info\'); GetHeroInfo(\'' # param13 # '\', \'' # param2 # '\');');
										If((param25 or param26) and param27 and !ViewingStreaming(),
											SetOnclick('CallEventParamsX(\'altav_full\', 0, 2); cg_avatarHero = \'' # param13 # '\';'),
											SetOnclick('')
										);
									"
									ontriggerlua="
										self:SetVisible(AtoB(param15))
										if AtoB(param28) then
											self:SetTexture('/ui/fe2/lobby/mystery.tga')
										else
											self:SetTexture(param6)
										end
									"
									onmouseout="HideWidget('hero_info');"
									texture="$checker"
									resourcecontext="lobby"
								/>
								<panel noclick="1" watch="GamePhase" ontrigger="SetVisible(param0 lt 4);">
									<!-- Ready Effect -->
									<panel name="hero_ready_effect{index}"  visible="0" y="-2%" valign="center" color="invisible" align="center"
										noclick="true" passivechildren="true"
										watch="HeroSelectPlayerInfo{index}"
										ontrigger="SetVisible(param10);"
									>
										<modelpanel
											onshow="SetEffect('/ui/common/models/hero_select/hero_ready.effect'); PlaySound('/shared/sounds/ui/hero_select/button_ready.wav')"
											model="/ui/common/models/hero_select/circle.mdf"
											anim="idle"
											camerapos="0 1700 0"
											cameraangles="0 0 180"
											camerafov="2.0"
											cameranear="1"
											carmerafar="7000"
											depthclear="false"
											depthcompress="true"
											sunazimuth="140"
											sunaltitude="10"
											suncolor="1.4 1.3 1"
										/>
									</panel>
								</panel>
								<!-- Swap Effect -->
								<panel
									visible="0" y="-2%" valign="center" color="invisible" align="center"
									noclick="true" passivechildren="true"
									watch="HeroSelectPlayerInfo{index}"
									ontrigger="SetVisible(param9 and param11);"
								>
									<modelpanel
										onshow="SetEffect('/ui/common/models/hero_select/hero_swap.effect');"
										model="/ui/common/models/hero_select/select.mdf"
										anim="idle"
										camerapos="0 1700 0"
										cameraangles="0 0 180"
										camerafov="2.0"
										cameranear="1"
										carmerafar="7000"
										depthclear="false"
										depthcompress="true"
										sunazimuth="140"
										sunaltitude="10"
										suncolor="1.4 1.3 1"
									/>
								</panel>
							</panel>

							<panel watch="GamePhase" ontrigger="SetVisible(param0 == 1)" noclick="1">
								<image align="center" x="7%" noclick="true" texture="lobby/lock2.tga" watch="LobbyPlayerInfo{index}" ontrigger="SetVisible(param15);"/>
							</panel>

							<panel watch="LobbyPlayerInfo{index}"  ontrigger="
								If(param0 gt -1,
									Split(
										call('iris_open{index}','setVisible(1)'),
										call('iris_close{index}','setVisible(0)')
									),
									Split(
										call('iris_open{index}','setVisible(0)'),
										call('iris_close{index}','setVisible(1)')
									)
								);"
								noclick="true"
							/>

							<animatedimage visible="1" name="iris_close{index}"
								onshow="StartAnim(1); Call('iris_open{index}','setVisible(0);');"  startframe="8" numframes="8" align="center" valign="center" texture="/ui/fe2/mainmenu/iris/open.tga" noclick="true" loop="1" loopbackframe="-1"  fps="30"
							/>
							<animatedimage visible="0" name="iris_open{index}"
								onshow="StartAnim(1);  Call('iris_close{index}','setVisible(0);');"  numframes="8" align="center" valign="center" texture="/ui/fe2/mainmenu/iris/open.tga" noclick="true" loop="1" loopbackframe="-1"  fps="30"
							/>

							<image  name="iris_cover_{index}" visible="1" onshow="SleepWidget(400, 'SetVisible(0);');" numframes="8" align="center" valign="center" texture="/ui/fe2/mainmenu/iris/open0000.tga" noclick="true" loop="1" loopbackframe="-1"  fps="30"
							/>

							<panel watch="GamePhase" ontrigger="SetVisible(param0 gt 1)" noclick="1">
								<animatedimage visible="0"  name="iris_close_phase_2_3_{index}"
									watch="HeroSelectPlayerInfo{index}" ontrigger="If(param15, setVisible(0)); If(param15, call('iris_open_phase_2_3_{index}','setVisible(1)'), call('iris_close_phase_2_3_{index}','setVisible(1)') );" onshow="StartAnim(1); call('iris_open_phase_2_3_{index}','setVisible(0)');"  startframe="8" numframes="8" align="center" valign="center" texture="/ui/fe2/mainmenu/iris/open.tga" noclick="true" loop="1" loopbackframe="-1"  fps="30"
								/>
								<animatedimage visible="0"  name="iris_open_phase_2_3_{index}"
									onshow="StartAnim(1); call('iris_close_phase_2_3_{index}','setVisible(0)');" numframes="8" align="center" valign="center" texture="/ui/fe2/mainmenu/iris/open.tga" noclick="true" loop="1" loopbackframe="-1"  fps="30"
								/>
							</panel>
						</panel>

						<image watch="LobbyPlayerInfo{index}"
							ontrigger="SetColor(param2);"
							texture="lobby/team_color.tga"
							align="center"
							valign="center"
							noclick="true"
						/>

					</panel>

					<image texture="lobby/mastery/pod_face_iron.tga" hflip="1" noclick="true"
						   watch="HeroSelectMastery{index}"
						   ontriggerlua="self:SetTexture('/ui/fe2/lobby/mastery/pod_face_'..param0..'.tga')" />

					<panel noclick="true" color="invisible" onload="CreateBool('_lobby_player{index}_locked', false);" />

					<!-- swap accept button -->
					<button
						x="-2%" y="-5%"
						width="64%" height="64.0%"
						align="center"
						valign="center"
						color="invisible"
						watch1="HeroSelectPlayerInfo{index}"
						ontrigger1="SetVisible(!param1 and param9 and param11);"
						onclick="SwapHeroRequest({index} % 5, 0, 0); PlaySound('/shared/sounds/ui/hero_select/button_swap.wav');"
						watch2="LobbyPlayerInfo{index}"
						ontrigger2="
							If(param17,
								SetOnrightclick(
									'Trigger(\'GameLobbyContextMenu\', true, GetCursorPosX(), GetCursorPosY(), 2, {slot}, ' # param0 # ');'
								),
								SetOnrightclick('')
							);
							if(param22 + param23 + param35 + param36 + param37 + param69 gt 0, Set('_psr_tipShow{index}', 1), Set('_psr_tipShow{index}', param78));
							Set('_psr_tipA{index}', '^444(^666' # Round(param22 / (param22 + param23) * 100) # '%^444) ^w' # param22 # '\\n' # param23 # '\\n' # FtoA(param25 / param27, 2) # ':1\\n' # FtoA(param26 / param27, 2) # ':1\\n' # FtoA((param25 + param26) / param27, 2) # ':1\\n' # FtoA(param31, 1) # '\\n' # FtoA(ceil(param29 * 10) / 10, 1) # '\\n' # FtoA(ceil(param30 * 10) / 10, 1) # '::' # param1 # '::' # param2 # '::' # param78  );
							Set('_psr_tipMatch{index}', param33 # ':' # param34 # ':^g' # param35 # '^w/^r' # param36 # '^w/^y' # param37 # '|' # param38 # ':' # param39 # ':^g' # param40 # '^w/^r' # param41 # '^w/^y' # param42 # '|' # param43 # ':' # param44 # ':^g' # param45 # '^w/^r' # param46 # '^w/^y' # param47 # '|' # param48 # ':' # param49 # ':^g' # param50 # '^w/^r' # param51 # '^w/^y' # param52 # '|' # param53 # ':' # param54 # ':^g' # param55 # '^w/^r' # param56 # '^w/^y' # param57 # '|' # param58 # ':' # param59 # ':^g' # param60 # '^w/^r' # param61 # '^w/^y' # param62 # '|' # param63 # ':' # param64 # ':^g' # param65 # '^w/^r' # param66 # '^w/^y' # param67);
							Set('_psr_tipHero{index}', param68 # ':' # param69 # ':null|' # param70 # ':' # param71 # ':null|' # param72 # ':' # param73 # ':null|' # param74 # ':' # param75 # ':null|' # param76 # ':' # param77 # ':null');
						"
						onmouseover="
							ExplodeTrigger('GameLobby_NewStats', _psr_tipA{index}, '|', '::');
							Trigger('GameLobby_StatsFade', _psr_tipShow{index});
							ExplodeTrigger('GameLobby_RecentMatchTrigger', _psr_tipMatch{index});
							ExplodeTrigger('GameLobby_FavHeroTrigger', _psr_tipHero{index});
						"
						onmouseout="
							Trigger('GameLobby_StatsFade', 0);
						"
						onload="
							createstring('_psr_tipA{index}', '');
							createstring('_psr_tipMatch{index}', '');
							createstring('_psr_tipHero{index}', '');
							createbool('_psr_tipShow{index}', false);
						"
					/>

					<!-- join overlay so you can click anywhere on the pod -->
					<button
						name="join_overlay_left{index}"
						color="invisible"
						x="-2%" y="-5%"
						width="64%" height="64.0%"
						align="center"
						valign="center"
						onclick="PlaySound('/shared/sounds/ui/lobby/button_jointeam.wav'); Team({team}, {slot});"
						watch1="LobbyPlayerInfo{index}"
						ontrigger1="SetVisible(param0 == -1 and !param15);"
						labelwatch="LobbyPlayerInfo{index}"
						watch2="LobbyPlayerInfo{index}"
						ontrigger2="
							If(param17,
								SetOnrightclick(
									'Trigger(\'GameLobbyContextMenu\', true, GetCursorPosX(), GetCursorPosY(), 2, {slot}, ' # param0 # ');'
								),
								SetOnrightclick('')
							);
						"
					/>

					<!-- Open Button -->
					<instance name="button2" button_name="lobbyJoinTeamButton{team}{slot}"
						x="-3%" y="67.0%"
						width="43%" height="13.0%"
						align="center"
						borderthickness="15%"
						label="general_join"
						onclick="
							PlaySound('/shared/sounds/ui/lobby/button_jointeam.wav'); Team({team}, {slot});
							Trigger('RefereeControlPage', 0)
						"
						watch="LobbyPlayerInfo{index}"
						ontrigger="SetEnabled(param0 == -1 and !param15);"
						watch1="GamePhase"
						ontrigger1="SetVisible(param0 &lt;= 3)"
						labelwatch="LobbyPlayerInfo{index}"
						labelontrigger="
							If(param15,
								SetText(Translate('globby_spot_locked')),
								SetText(Translate('general_join'))
							);
							If(param15 and !(_lobby_player{index}_locked), Set('_lobby_player{index}_locked',true));
							If(!param15 and (_lobby_player{index}_locked), Set('_lobby_player{index}_locked',false));
						"
					/>

					<panel watch="GamePhase" ontrigger="SetVisible(param0 gt 1)" noclick="1">
						<instance name="button2" button_name="ready_button_{team}_{slot}"
							x="-3%" y="67.0%"
							width="43%" height="13.0%"
							align="center"
							borderthickness="15%"
							label="general_ready"
							visible="0"
							onclick="Ready();"
							watch="HeroSelectPlayerInfo{index}"
							ontrigger="
								SetVisible(param1 and !param10);
								SetEnabled(param26);
							"
						/>

						<panel
							watch="GamePhase" ontrigger="SetVisible(param0 == 3)" noclick="1"
							x="-3%" y="67.0%"
							width="43%" height="13.0%"
							align="center"
							borderthickness="15%"					>

							<frame
								noclick="1"
								watch="HeroSelectPlayerInfo{index}"
								ontrigger="
									SetVisible(!param1 or param10);
									If(param10,
										SetBorderColor('0.4 1 0.4'),
										SetBorderColor('0.4 .4 0.4'));

									If(param10,
										SetColor('0.4 0.4 0.4'),
										SetColor('0.0 1 0.0'));
									"

								texture="/ui/info/button.tga" borderthickness="15%">
								<label
									watch="HeroSelectPlayerInfo{index}"
									ontrigger="
										If(param10,
											SetColor('0.2 1 0.2'),
											SetColor('0.4 .4 .4'));
									"
								width="100%" height="100%" textvalign="center" textalign="center" valign="center" align="center" font="dyn_9" color="0 0.75 0" shadow="true" shadowcolor="black" noclick="1" content="general_ready"/>
							</frame>
						</panel>
					</panel>
				</panel>

				<!-- Right Player Name -->
				<panel name="HeroSelectPlayerInfoName{index}" y="37%" x="-37%" height="15%" width="54%" align="right" visible="0"
				>
					<label
						font="dyn_10" textalign="right" textvalign="center" color="white" outline="1"
						onclick="Trigger('GameLobbyContextMenu', false, 0, 0, 0, 0, -1);"
						watch="LobbyPlayerInfo{index}"
						ontriggerlua="
							Game_Lobby:BotJoinHelper(param1)

							local font, color = NotEmpty(param87) and param87..'_10' or 'dyn_10', 'white'
							if NotEmpty(param81) then
								color = param81
							elseif AtoB(param19) then
								color = '#FF0000'
							elseif AtoB(param20) then
								color = '#DBBF4A'
							end

							self:SetFont(font)
							self:SetColor(color)
							self:SetGlow(AtoB(param83))
							self:SetGlowColor(param85)
							if font == '8bit_10' then
								self:SetText(string.upper(param1))
								self:SetY('.1h')
							else
								self:SetText(param1)
								self:SetY('0h')
							end
						"
					/>
					<button
					   width="-100@"
					   align="right"
					   color="invisible"
					   onclick="Trigger('GameLobbyContextMenu', false, 0, 0, 0, 0, -1);"
					   watch1="GamePhase"
					   ontrigger1="SetVisible(param0 == 1)"
					   watch="LobbyPlayerInfo{index}"
					   ontrigger="
							If(param17,
								SetOnrightclick(
									'Trigger(\'GameLobbyContextMenu\', true, GetCursorPosX(), GetCursorPosY(), 2, {slot}, ' # param0 # ');'
								),
								SetOnrightclick('')
							);
							if(param22 + param23 + param35 + param36 + param37 + param69 gt 0, Set('_psr_tipShow{index}', 1), Set('_psr_tipShow{index}', param78));
							Set('_psr_tipA{index}', '^444(^666' # Round(param22 / (param22 + param23) * 100) # '%^444) ^w' # param22 # '\\n' # param23 # '\\n' # FtoA(param25 / param27, 2) # ':1\\n' # FtoA(param26 / param27, 2) # ':1\\n' # FtoA((param25 + param26) / param27, 2) # ':1\\n' # FtoA(param31, 1) # '\\n' # FtoA(ceil(param29 * 10) / 10, 1) # '\\n' # FtoA(ceil(param30 * 10) / 10, 1) # '::' # param1 # '::' # param2 # '::' # param78  );
							Set('_psr_tipMatch{index}', param33 # ':' # param34 # ':^g' # param35 # '^w/^r' # param36 # '^w/^y' # param37 # '|' # param38 # ':' # param39 # ':^g' # param40 # '^w/^r' # param41 # '^w/^y' # param42 # '|' # param43 # ':' # param44 # ':^g' # param45 # '^w/^r' # param46 # '^w/^y' # param47 # '|' # param48 # ':' # param49 # ':^g' # param50 # '^w/^r' # param51 # '^w/^y' # param52 # '|' # param53 # ':' # param54 # ':^g' # param55 # '^w/^r' # param56 # '^w/^y' # param57 # '|' # param58 # ':' # param59 # ':^g' # param60 # '^w/^r' # param61 # '^w/^y' # param62 # '|' # param63 # ':' # param64 # ':^g' # param65 # '^w/^r' # param66 # '^w/^y' # param67);
							Set('_psr_tipHero{index}', param68 # ':' # param69 # ':null|' # param70 # ':' # param71 # ':null|' # param72 # ':' # param73 # ':null|' # param74 # ':' # param75 # ':null|' # param76 # ':' # param77 # ':null');

							If(param10 == -1,
								SetOnMouseover(''),
								SetOnMouseover('
									ExplodeTrigger(\'GameLobby_NewStats\', _psr_tipA{index}, \'|\', \'::\');
									Trigger(\'GameLobby_StatsFade\', _psr_tipShow{index});
									ExplodeTrigger(\'GameLobby_RecentMatchTrigger\', _psr_tipMatch{index});
									ExplodeTrigger(\'GameLobby_FavHeroTrigger\', _psr_tipHero{index});
								')
							);
						"
						onmouseover="
							ExplodeTrigger('GameLobby_NewStats', _psr_tipA{index}, '|', '::');
							Trigger('GameLobby_StatsFade', _psr_tipShow{index});
							ExplodeTrigger('GameLobby_RecentMatchTrigger', _psr_tipMatch{index});
							ExplodeTrigger('GameLobby_FavHeroTrigger', _psr_tipHero{index});
						"
						onmouseout="
							Trigger('GameLobby_StatsFade', 0);
						"
						onload="
							createstring('_psr_tipA{index}', '');
							createstring('_psr_tipMatch{index}', '');
							createstring('_psr_tipHero{index}', '');
							createbool('_psr_tipShow{index}', false);
						"
					 />
				</panel>

				<!-- Unit Name -->
				<panel y="58%" x="-36%" height="17%" width="35%" noclick="1" align="right" visible="0">
					<label watch="HeroSelectPlayerInfo{index}" ontrigger="SetText(param5);" height="100%" font="dyn_9" textalign="center" textvalign="center" color="white" outline="1" content=""/>
				</panel>

				<!-- Enable for NAEU only -->
				<if condition="!cl_GarenaEnable">
					<!-- PSR/MMR -->
					<panel name="HeroSelectPlayerPSR{index}" y="62.0%" x="-34.0%" align="right" height="13%" width="15.0%" noclick="1" visible="0">
						<label
							watch="LobbyPlayerInfo{index}"
							ontrigger="if(param10 lt 0, SetText('N/A'), SetText(Round(param10)));"
							onmouseover="
							if (IsArrangedMatch(),
								ShowWidget('globby_rsr1_tip'),
								ShowWidget('globby_psr1_tip')
							);"
							onmouseout="
							if (IsArrangedMatch(),
								HideWidget('globby_rsr1_tip'),
								HideWidget('globby_psr1_tip')
							);"
							height="100%" font="dyn_8" align="center"  valign="center" textalign="center" textvalign="center" color="white" shadow="1" content=""/>
					</panel>

					<!-- PSR -->
					<panel name="HeroSelectPlayerPSRChange{index}" y="62.0%" x="-49.0%" align="right" height="14%" width="22.0%" noclick="1" visible="0">
						<label
							watch="LobbyPlayerInfo{index}"
							onmouseover="if (!IsArrangedMatch() and !IsCampaignMatch(),
											ShowWidget('globby_psr2_tip')
										 );"
							onmouseout="if (!IsArrangedMatch() and !IsCampaignMatch(),
											HideWidget('globby_psr2_tip')
										);"
							ontrigger="
								If(!param21,
									Split(SetVisible(param10 != -1 and param11), SetText('+' # param12 # ' / ' # param13)),
									Split(SetVisible(param10 != -1 and param11), SetText(''))
								);"
							height="100%" font="dyn_7" textalign="center" textvalign="center" color="white" shadow="1" content=""/>
					</panel>
				</if>

				<!-- Gold Count -->
				<panel x="5.0%" y="-1.0%" width="50@" height="50%" align="left" noclick="true" visible="false" name="PlayerGoldCount{index}">
					<image texture="lobby/hellbourne_gold.tga" noclick="true" />
					<label y="-3.0%" height="100%" textalign="center" textvalign="center" font="dyn_8" color="white" content="850" watch="HeroSelectPlayerInfo{index}" ontrigger="SetText(param17);"/>
				</panel>

				<!-- Rank -->
				<panel name="HeroSelectPlayerRank{index}" align="right" x="-33.2%" y="52%" width="38%" height="32i" visible="0" noclick="1" >
					<panel watch="LobbyPlayerInfo{index}" ontriggerlua="self:SetVisible(IsCampaignMatch())" noclick="0"/>
					<panel visible="0" align="right" noclick="1"
						watch="LobbyPlayerInfo{index}"
						ontriggerlua="Game_Lobby:SetupCampainLevel(self, {index}, param0, param11, param86)"
					>
						<image name="HeroSelectPlayerRankBgImage{index}" align="center" x="-1i" y="-6i" width="256i" height="34i" valign="center" hflip="true" noclick="1" />
						<image name="HeroSelectPlayerRankImage{index}" align="center" x="10i" y="0" width="50i" height="50i" valign="center" noclick="1" />
						<label name="HeroSelectPlayerRankLabel{index}" align="right" x="-54%" y="-16%" width="-25%" textvalign="center" font="dyn_8" color="white" shadow="true" shadowcolor="#000000" outline="true" outlinecolor="#000000" textalign="right" noclick="1" />
					</panel>
				</panel>

			</panel>

			<!-- Lock Button -->
			<instance name="lock_button_right" index="{index}" team="{team}" slot="{slot}"/>

			<!-- Add bot 3.0 RMM CanHaveBots -->
			<panel group="glb_bot_buttons" name="glb_add_bot_{index}" x="-10.55h" y="3.8h" width="3.25h" height="6.5h" align="right" noclick="1"
				onshowlua="
					UIManager.GetInterface('main'):HoNGameLobbyF('PopulateBotPickList')
				"
				watch="LobbyPlayerInfo{index}"
				ontrigger=" If(param15 and !(_lobby_player{index}_locked), Set('_lobby_player{index}_locked',true));
							If(!param15 and (_lobby_player{index}_locked), Set('_lobby_player{index}_locked',false));
							DoEvent(5);"
				onevent5lua="
					if GetCvarBool('ui_isBotMatch') and (GetCvarString('_left_pod_lobby{index}_open') == 'Closed') and IsHost() and (not GetCvarBool('_lobby_player{index}_locked')) then
						self:SetVisible(Empty(param1))
					else
						self:SetVisible(false)
					end
				"
			>
				<image texture="lobby/hellbourne_lock_frame.tga" hflip="true" noclick="true"/>
				<panel x="0.15h" y="-0.65h" width="2.25h" height="2.25h" align="center" valign="bottom"
					onclick="Call('glb_invite_bot', 'FadeIn(100);');"
					onclicklua="PlaySound('/shared/sounds/ui/button_click_01.ogg') UIManager.GetInterface('main'):HoNGameLobbyF('RepickBot', self, {slot}, '{team}')"
					ondoubleclicklua="PlaySound('/shared/sounds/ui/button_click_01.ogg') UIManager.GetInterface('main'):HoNGameLobbyF('SelectBot', self, 1)"
				>
					<image texture="/ui/icons/botmatch.tga" noclick="1"/>
				</panel>
			</panel>

			<panel
				name="event_left_pod_master{index}"
				noclick="1"
				watch="LobbyPlayerInfo{index}"
				ontrigger="
					If(param0 != -2,
						If(param0 != -1,
							CallEvent('event_left_pod_lobby{index}', 1),
							CallEvent('event_left_pod_lobby{index}', 0)
						)
					);
				"
			/>

			<!-- Use this for resetting all POD stuff on disconnect etc-->
			<panel
				name="event_phase_0_check_{index}"
				noclick="true"
				watch="GamePhase"
				ontrigger="if(param0 == 0, CallEvent('event_left_pod_lobby{index}',6)); "
			/>

			<panel
				name="event_phase_2_check_{index}"
				noclick="true"
				watch="GamePhase"
				ontrigger="if(param0 == 2, CallEvent('event_left_pod_lobby{index}',2)); "
				watch1="LobbyCountDown"
				ontrigger1=""
			/>
			<panel
				name="event_phase_3_check_{index}"
				noclick="true"
				watch="GamePhase"
				ontrigger="if(param0 == 3, CallEvent('event_left_pod_lobby{index}',3)); "
			/>
			<panel
				name="event_phase_4_check_{index}"
				noclick="true"
				watch="GamePhase"
				ontrigger="if(param0 == 4, CallEvent('event_left_pod_lobby{index}',4)); "
			/>

			<panel
				name="event_left_pod_lobby{index}"
				noclick="1"
				onload="CreateString('_left_pod_lobby{index}_open', 'Closed');"
				onevent0="
					Set('_left_pod_lobby{index}_open', 'Closed');
					Call('pod_stage_6_{index}_close','SleepWidget(0,\'CallEvent(name,0);\');');
					Call('pod_stage_5_{index}_close','SleepWidget(100,\'CallEvent(name,0);\');');

					Call('pod_stage_3_{index}_close','SleepWidget(300,\'CallEvent(name,0);\');');
					Call('pod_stage_2_{index}_close','SleepWidget(500,\'CallEvent(name,0);\');');
					Call('pod_stage_1_{index}_close','SleepWidget(600,\'CallEvent(name,0);\');');

					Call('pod_stage_1_{index}','SleepWidget(0,\'\');');
					Call('pod_stage_2_{index}','SleepWidget(0,\'\');');
					Call('pod_stage_3_{index}','SleepWidget(0,\'\');');

					Call('pod_stage_5_{index}','SleepWidget(0,\'\');');
					Call('pod_stage_6_{index}','SleepWidget(0,\'\');');
					Call('player_slot_mute_button{index}', 'FadeOut(1);');
					Call('hero_name_container_left{index}', 'SetWidth(\'15%\');');
					Call('glb_add_bot_{index}', 'DoEvent(5);')
				"

				onevent1="
					Set('_left_pod_lobby{index}_open', 'Open');
					Call('pod_stage_1_{index}','SleepWidget(0,\'CallEvent(name,0);\');');
					Call('pod_stage_2_{index}','SleepWidget(100,\'CallEvent(name,0);\');');
					Call('pod_stage_3_{index}','SleepWidget(300,\'CallEvent(name,0);\');');

					Call('pod_stage_5_{index}','SleepWidget(600,\'CallEvent(name,0);\');');
					Call('pod_stage_6_{index}','SleepWidget(850,\'CallEvent(name,0);\');');

					Call('pod_stage_6_{index}_close','SleepWidget(0,\'\');');
					Call('pod_stage_5_{index}_close','SleepWidget(0,\'\');');

					Call('pod_stage_3_{index}_close','SleepWidget(0,\'\');');
					Call('pod_stage_2_{index}_close','SleepWidget(0,\'\');');
					Call('pod_stage_1_{index}_close','SleepWidget(0,\'\');');

					Call('hero_name_container_left{index}', 'SetWidth(\'15%\');');
					Call('glb_add_bot_{index}', 'DoEvent(5);')
				"

				onevent2="
					call('iris_close_phase_2_3_{index}', 'SetVisible(1);');

					Call('lobby_transition_timer','SleepWidget(400,\'SetVisible(0);\');');
					Call('lobby_status','SleepWidget(400,\'SetVisible(1);\');');

					CallEvent('toggle_latch', 1);
					CallEvent('toggle_latch', 0);

					Call('pod_stage_1_{index}_picker','SleepWidget(0,\'CallEvent(name,0);\');');
					Call('pod_stage_2_{index}_picker','SleepWidget(100,\'CallEvent(name,0);\');');
					Call('pod_stage_3_{index}_picker','SleepWidget(300,\'CallEvent(name,0);\');');

					Call('pod_stage_5_{index}_picker','SleepWidget(600,\'CallEvent(name,0);\');');
					Call('pod_stage_6_{index}_picker','SleepWidget(850,\'CallEvent(name,0);\');');
					Call('pod_stage_7_{index}_picker','SleepWidget(850,\'CallEvent(name,0);\');');
				"
				onevent3="
					Call('player_slot_mute_button{index}', 'FadeIn(250);');
					call('iris_close_phase_2_3_{index}', 'SetVisible(1);');

					Call('lobby_transition_timer','SleepWidget(400,\'SetVisible(0);\');');
					Call('lobby_status','SleepWidget(400,\'SetVisible(1);\');');
					CallEvent('toggle_latch', 0);

					Call('pod_stage_1_{index}_picker','SleepWidget(0,\'CallEvent(name,0);\');');
					Call('pod_stage_2_{index}_picker','SleepWidget(100,\'CallEvent(name,0);\');');
					Call('pod_stage_3_{index}_picker','SleepWidget(300,\'CallEvent(name,0);\');');

					Call('pod_stage_5_{index}_picker','SleepWidget(600,\'CallEvent(name,0);\');');
					Call('pod_stage_6_{index}_picker','SleepWidget(850,\'CallEvent(name,0);\');');
					Call('pod_stage_7_{index}_picker','SleepWidget(850,\'CallEvent(name,0);\');');
				"

				onevent4="
					Set('_left_pod_lobby{index}_open', 'Closed');
					Call('pod_stage_6_{index}_close','SleepWidget(0,\'CallEvent(name,0);\');');
					Call('pod_stage_5_{index}_close','SleepWidget(100,\'CallEvent(name,0);\');');

					Call('pod_stage_3_{index}_close','SleepWidget(300,\'CallEvent(name,0);\');');
					Call('pod_stage_2_{index}_close','SleepWidget(500,\'CallEvent(name,0);\');');
					Call('pod_stage_1_{index}_close','SleepWidget(600,\'CallEvent(name,0);\');');

					Call('asset_loading_bar_{index}','SleepWidget(400,\'SetVisible(1);\');');
				"

				onevent6="
					Call('player_side_disc_frame{index}', 'Rotate(0, 1);');

					Call('player_side_disc{index}', 'SetX(0);');
					Call('hero_name_container_left{index}', 'SetWidth(\'15%\');');

					Call('player_slot_left_door{index}', 'SetX(\'50.0%\');');
					Call('player_slot_right_door_slide{index}', 'SetX(\'0%\');');

					Call('HeroSelectPlayerPSR{index}', 'FadeOut(1);');
					Call('HeroSelectPlayerPSRChange{index}', 'FadeOut(1);');
					Call('HeroSelectPlayerInfoName{index}', 'FadeOut(1);');
					Call('HeroSelectPlayerRank{index}', 'FadeOut(1);');

					Call('player_slot_mute_button{index}', 'FadeOut(1);');
					Call('player_slot_leave_button{index}', 'FadeOut(1);');
					Call('play_slot_kick_bot_button{index}', 'FadeOut(1);');

					Call('player_slot_repick_buttons{index}', 'FadeOut(1);');

					Call('player_slot_panel3{index}', 'Rotate(90, 1);');
					Call('player_slot_bolt{index}', 'Rotate(0, 1);');
					Call('player_slot_panel3_cover{index}', 'Rotate(90, 1);');
					Call('player_slot_right_door{index}', 'Rotate(90, 1);');

					Call('player_slot_panel2{index}', 'SetX(\'110.0@\');');
					Call('player_slot_panel3_slide{index}', 'SetX(\'160@\');');
					Call('player_slot_panel3extras_container{index}', 'SetX(\'160@\');');

					Call('player_slot_panel1{index}', 'SetX(\'50.0%\');');
					Call('hero_name_container_left{index}', 'SetVisible(0);');

					Call('asset_loading_bar_controller{index}', 'SetWidth(\'0%\');');
				"
			/>

			<!-- ========= PLAYER SLOT OPEN ========= -->

			<!-- Panel 1 -->
			<panel
				noclick="1"
				name="pod_stage_1_{index}"
				onevent0="

					Call('player_slot_panel1{index}', 'SlideX(0, 200);');
					Call('hero_name_container_left{index}', 'SetVisible(1);');
				"
			/>
			<!-- Panel 2/3 Reveal -->
			<panel
				noclick="1"
				name="pod_stage_2_{index}"
				onevent0="
					Call('player_slot_panel2{index}', 'SlideX(\'-91.0@\', 200);');
					Call('player_slot_panel3_slide{index}', 'SlideX(\'-36.5@\', 100);');
					Call('player_slot_panel3extras_container{index}', 'SlideX(\'-36.5@\', 100);');
				"
			/>
			<!-- Rotate 3 Down -->
			<panel
				noclick="1"
				name="pod_stage_3_{index}"
				onevent0="
					Call('player_slot_panel3{index}', 'Rotate(0, 100);');
					Call('player_slot_bolt{index}', 'Rotate(0, 100);');
					Call('player_slot_panel3_cover{index}', 'Rotate(0, 100);');
					Call('player_slot_right_door{index}', 'Rotate(0, 100);');
				"
			/>

			<!-- Doors -->
			<panel
				noclick="1"
				name="pod_stage_5_{index}"
				onevent0="
					Call('player_slot_left_door{index}', 'SlideX(\'-8.0@\', 200);');

					Call('player_slot_right_door_slide{index}', 'SlideX(\'21%\', 200);');

					Call('HeroSelectPlayerPSR{index}', 'FadeIn(400);');
					Call('HeroSelectPlayerPSRChange{index}', 'FadeIn(400);');
					Call('HeroSelectPlayerInfoName{index}', 'FadeIn(400);');
					Call('HeroSelectPlayerRank{index}', 'FadeIn(400);');
					Call('player_slot_mute_button{index}', 'FadeIn(300);');
					Call('player_slot_leave_button{index}', 'FadeIn(400);');
					Call('play_slot_kick_bot_button{index}', 'FadeIn(400);');
				"
			/>

			<panel
				noclick="1"
				name="pod_stage_6_{index}"
				onevent0="
					Call('player_side_disc{index}', 'SlideX(\'33.6@\', 200);');
				"
			/>
			<panel
				noclick="1"
				name="pod_stage_7_{index}"
				onevent0="
					Call('player_side_disc_frame{index}', 'Rotate(180, 200);');
				"
			/>

			<!-- ========= PLAYER SLOT CLOSE ========= -->

			<!-- ALL MODES HERE-->
			<panel
				noclick="1"
				name="pod_stage_7_{index}_close"
				onevent0="
					Call('player_side_disc_frame{index}', 'Rotate(0, 200);');
				"
			/>
			<!-- Player / Single Draft Disc -->
			<panel
				noclick="1"
				name="pod_stage_6_{index}_close"
				onevent0="
					Call('player_side_disc{index}', 'SlideX(0, 200);');
					Call('hero_name_container_left{index}', 'ScaleWidth(\'15%\', 200);');
				"
			/>
			<!-- Doors -->

			<panel
				noclick="1"
				name="pod_stage_5_{index}_close"
				onevent0="
					Call('player_slot_left_door{index}', 'SlideX(\'50.0%\', 200);');
					Call('player_slot_right_door_slide{index}', 'SlideX(\'0%\', 200);');

					Call('HeroSelectPlayerPSR{index}', 'FadeOut(201);');
					Call('HeroSelectPlayerPSRChange{index}', 'FadeOut(201);');
					Call('HeroSelectPlayerInfoName{index}', 'FadeOut(201);');
					Call('HeroSelectPlayerRank{index}', 'FadeOut(201);');

					Call('player_slot_mute_button{index}', 'FadeOut(201);');
					Call('player_slot_leave_button{index}', 'FadeOut(201);');
					Call('play_slot_kick_bot_button{index}', 'FadeOut(201);');

					Call('player_slot_repick_buttons{index}', 'FadeOut(201);');
				"
			/>

			<!-- Rotate 3 Down -->
			<panel
				noclick="1"
				name="pod_stage_3_{index}_close"
				onevent0="
					Call('player_slot_panel3{index}', 'Rotate(90, 200);');
					Call('player_slot_bolt{index}', 'Rotate(0, 200);');
					Call('player_slot_panel3_cover{index}', 'Rotate(90, 200);');
					Call('player_slot_right_door{index}', 'Rotate(90, 200);');
				"
			/>
			<!-- Panel 2/3 Reveal -->
			<panel
				noclick="1"
				name="pod_stage_2_{index}_close"
				onevent0="
					Call('player_slot_panel2{index}', 'SlideX(\'110.0@\', 200);');
					Call('player_slot_panel3_slide{index}', 'SlideX(\'160@\', 200);');
					Call('player_slot_panel3extras_container{index}', 'SlideX(\'160@\', 200);');
				"
			/>
			<!-- Panel 1 -->
			<panel
				noclick="1"
				name="pod_stage_1_{index}_close"
				onevent0="
					Call('player_slot_panel1{index}', 'SlideX(\'50.0%\', 100);');
					Call('hero_name_container_left{index}', 'SetVisible(0);');
				"
			/>

			<!-- ========= PLAYER PICKER TRANSFORMATION TO PICKER ========= -->

			<!-- Panel 1 -->
			<panel
				noclick="1"
				name="pod_stage_1_{index}_picker"
				onevent0=""
			/>
			<!-- Panel 2/3 Reveal -->
			<panel
				noclick="1"
				name="pod_stage_2_{index}_picker"
				onevent0=""
			/>
			<!-- Rotate 3 Down -->
			<panel
				noclick="1"
				name="pod_stage_3_{index}_picker"
				onevent0=""
			/>
			<!-- Ready Button -->
			<panel
				noclick="1"
				name="pod_stage_4_{index}_picker"
				oneventX=""
			/>

			<!-- Doors -->
			<panel
				noclick="1"
				name="pod_stage_5_{index}_picker"
				onevent0="
					Call('player_slot_repick_buttons{index}', 'FadeIn(300);');
					Call('hero_name_container_left{index}', 'ScaleWidth(\'68%\', 200);');
				"
			/>

			<panel
				noclick="1"
				name="pod_stage_6_{index}_picker"
				onevent0=""
			/>

			<panel
				noclick="1"
				name="pod_stage_7_{index}_picker"
				onevent0=""
			/>

		</panel>
	</template>

	<!-- Left  Hero Slot -->
	<template name="hero_slot_left">
		<panel
			height="19%"
			noclick="true" sticky="true" stickytoinvis="false"
			watch0="GamePhase"
			ontrigger0="
				If(param0 gt 1,
					Split(
						SetWatch('HeroSelectPlayerInfo{index}'),
						SetOntrigger('SetVisible(param2 != -1);')
					),
					Split(
						SetWatch('LobbyTeamInfo{team}'),
						SetOntrigger('SetVisible({slot} lt param2);')
					)
				);
			"
		>
			<!-- Slot Indication -->
			<panel 	width="30h" height="16h" x="0h" y="1h" align="left" valign="center" watch="GamePhase"   ontrigger="SetVisible(param0 gt 1 and param0 lt 4)" noclick="1" color="invisible" visible="0">

				<modelpanel
					watch="HeroSelectPlayerInfo{index}"
					ontrigger="SetVisible(param1);"

					valign="center"
					align="center"

					ortho="false"
					noclick="true"
					model="mainmenu/bg_effects/debug.mdf"
					effect="mainmenu/bg_effects/slot_left.effect"
					anim="idle"

					camerapos="0 -950 00"
					cameraangles="0 0 0"
					camerafov="35"
					modelangles="0 0 0"
					modelpos="0 50 0"
					lookat="0"

				/>

			</panel>

			<panel x="2.0h" height="11.8h" align="left" noclick="true">
				<!-- Lower Panels -->
				<panel x="58.5@"  y="33.9%" height="50%" noclick="true">
					<!-- Panel 2 -->
					<image name="player_slot_panel2{index}"   x="-110.0@"  width="200@" height="100%" valign="bottom" align="left" noclick="true"
						ontrigger9lua="ResourceManager.RegisterTexture('/ui/fe2/lobby/mastery/panel2_iron.tga', 'lobby', self)" resourcecontext="lobby" watch9="MainRegisterTextures"
						watch="HeroSelectMastery{index}"
				  		ontriggerlua="self:SetTexture('/ui/fe2/lobby/mastery/panel2_'..param0..'.tga')"
					/>

					<!-- Panel 3  -->
					<panel name="player_slot_panel3_slide{index}" x="-160.0@" y="100%" width="400@" height="200%" noclick="true" valign="bottom" align="left" >
						<image name="player_slot_panel3{index}" noclick="true" onload="Rotate(-90, 1);"
							ontrigger9lua="ResourceManager.RegisterTexture('/ui/fe2/lobby/mastery/panel3_iron.tga', 'lobby', self)" resourcecontext="lobby" watch9="MainRegisterTextures"
							watch="HeroSelectMastery{index}"
				  			ontriggerlua="self:SetTexture('/ui/fe2/lobby/mastery/panel3_'..param0..'.tga')"
						/>
					</panel>

					<!-- Panel 1 / Left Door-->
					<panel width="200@" height="100%"  valign="bottom" align="left" noclick="true">
							<image name="player_slot_panel1{index}" x="-50.0%" noclick="true"
							ontrigger9lua="ResourceManager.RegisterTexture('/ui/fe2/lobby/mastery/panel1_iron.tga', 'lobby', self)" resourcecontext="lobby" watch9="MainRegisterTextures"
							watch="HeroSelectMastery{index}"
				  		   	ontriggerlua="self:SetTexture('/ui/fe2/lobby/mastery/panel1_'..param0..'.tga')"
						/>
						<image name="player_slot_left_door{index}" y="3%" height="-3.0%" x="-50.0%" noclick="true"
							ontrigger9lua="ResourceManager.RegisterTexture('/ui/fe2/lobby/mastery/near_door_iron.tga', 'lobby', self)" resourcecontext="lobby" watch9="MainRegisterTextures"
							watch="HeroSelectMastery{index}"
				  		   	ontriggerlua="self:SetTexture('/ui/fe2/lobby/mastery/near_door_'..param0..'.tga')"
						/>
					</panel>

					<!-- Right Door / Panel 3 Cover / Bolt  -->
					<panel name="player_slot_panel3extras_container{index}" x="-160.0@" y="100%" width="400@" height="200%" valign="bottom" align="left" noclick="true">
						<panel name="player_slot_right_door_slide{index}" y="2%" height="-6.0%" noclick="true" >
							<image name="player_slot_right_door{index}" noclick="true" onload="Rotate(-90, 1);"
								ontrigger9lua="ResourceManager.RegisterTexture('/ui/fe2/lobby/mastery/far_door_iron.tga', 'lobby', self)" resourcecontext="lobby" watch9="MainRegisterTextures"
								watch="HeroSelectMastery{index}"
				  		   		ontriggerlua="self:SetTexture('/ui/fe2/lobby/mastery/far_door_'..param0..'.tga')"
							/>
						</panel>

						<image name="player_slot_panel3_cover{index}" noclick="true" onload="Rotate(-90, 1);"
							ontrigger9lua="ResourceManager.RegisterTexture('/ui/fe2/lobby/mastery/panel3_cover_iron.tga', 'lobby', self)" resourcecontext="lobby" watch9="MainRegisterTextures"
							watch="HeroSelectMastery{index}"
				  			ontriggerlua="self:SetTexture('/ui/fe2/lobby/mastery/panel3_cover_'..param0..'.tga')"
						/>
						<image name="player_slot_bolt{index}" texture="/ui/fe2/lobby/bolt.tga" y="-4.0%" x="0.5@" width="12.5@" height="12.5%" align="center" valign="center" noclick="true" onload="Rotate(0, 1);"
							ontrigger9lua="ResourceManager.RegisterTexture('/ui/fe2/lobby/bolt.tga', 'lobby', self)" resourcecontext="lobby" watch9="MainRegisterTextures"
						/>

						<!-- Leave Team Button -->
						<panel noclick="true" watch="GamePhase" ontrigger="SetVisible(param0 le 1);">
							<panel name="player_slot_leave_button{index}" visible="0" x="69%" y="23.4%" width="18@" height="18%" noclick="true">
								<button
									texture="/ui/elements/kick.tga"
									watch="LobbyPlayerInfo{index}"
									ontrigger="SetVisible(param8);"
									onclick="PlaySound('/shared/sounds/ui/lobby/iris_panel_close.wav'); Team(-1);"
									onmouseover="PlaySound('/shared/sounds/ui/button_over_02.wav'); ShowWidget('globby_leave_team_tip');"
									onmouseout="HideWidget('globby_leave_team_tip');"
								/>
							</panel>
						</panel>

						<!-- Kick Bot Button -->
						<panel name="play_slot_kick_bot_button{index}" visible="0" x="69%" y="23.4%" width="18@" height="18%" noclick="true">
							<button
								texture="/ui/elements/kick.tga"
								watch="LobbyPlayerInfo{index}"
								ontrigger="
									If(param84 and IsHost(),
										Split(
											SetOnClick('
												PlaySound(\'/shared/sounds/ui/lobby/iris_panel_close.wav\');
												Kick('#param0#');
											'),
											SetVisible(1)
										),
										SetVisible(0)
									);
								"
								ontriggerlua="
									local name = param1
									self:SetCallback('onclick', function() Game_Lobby:WatchBotKicked(nil, name) end)
									self:RefreshCallbacks()
								"
								onmouseover="
									PlaySound('/shared/sounds/ui/button_over_02.wav');
									Trigger('genericMainFloatingTip', true, '9h', '', '', 'game_lobby_kick_bot_tip', '', '', '3h', '-2h');
								"
								onmouseout="HideWidget('genericMainFloatingTip');"
							/>
						</panel>

						<panel name="player_slot_repick_buttons{index}" visible="0" noclick="true" watch="GamePhase" ontriggerlua="if tonumber(param0) >= 4 then self:SetVisible(0) end">
							<!-- Repick Button -->
							<instance name="repick_button" index="{index}" team="{team}" slot="{slot}"/>

							<!-- Swap Button -->
							<panel name="player_slot_swap_button{index}" visible="1" x="69%" y="23.4%" width="18@" height="18%" noclick="true">
								<button
									texture="lobby/swap_hero.tga"
									onmouseover="PlaySound('/shared/sounds/ui/button_over_02.wav'); ShowWidget('globby_swap_hero_tip');"
									onmouseout="HideWidget('globby_swap_hero_tip');"
									ondisable="HideWidget('globby_swap_hero_tip'); HideWidget('globby_swap_hero_noeap_tip');"
									onmouseoverdisabled=""
									onmouseoutdisabled="HideWidget('globby_swap_hero_noeap_tip');"
									disabledmouseover="1"
									disabledmouseout="1"
									watch="HeroSelectPlayerInfo{index}"
									ontrigger="If(!param1 and param8 and !param9 and param11 and !param12, SetEnabled(1), SetEnabled(0));
										If(param29,
											SetOnMouseOverDisabled('PlaySound(\'/shared/sounds/ui/button_over_02.wav\'); ShowWidget(\'globby_swap_hero_noeap_tip\');'),
											SetOnMouseOverDisabled('')
										);
									"
									watch1="LobbyGameInfo"
									ontrigger1lua="self:SetVisible(param15 ~= 'devowars')"
									onclick="SwapHeroRequest({index} % 5); PlaySound('/shared/sounds/ui/button_click_02.wav'); HideWidget('globby_swap_hero_tip');  HideWidget('globby_swap_hero_noeap_tip');"
								/>
							</panel>
						</panel>

					</panel>
				</panel>
				<!-- closed width="15%" open width="68%"   -->
				<panel name="hero_name_container_left{index}" x="5h" y="14%" width="15%" height="22%" align="left"  noclick="true">
					<image texture="lobby/mastery/hero_track_iron.tga" noclick="true"
						   watch="HeroSelectMastery{index}"
				  		   ontriggerlua="self:SetTexture('/ui/fe2/lobby/mastery/hero_track_'..param0..'.tga')"/>
					<image width="200@" x="100@" align="right" texture="lobby/mastery/slideout_1_iron.tga" noclick="true"
						   watch="HeroSelectMastery{index}"
				  		   ontriggerlua="self:SetTexture('/ui/fe2/lobby/mastery/slideout_1_'..param0..'.tga')"	/>

					<panel watch="GamePhase" ontrigger="SetVisible(param0 gt 1)" noclick="1">
						<!-- 									-->
						<panel width="72%" height="60%" x="-0.7h" valign="center" align="right"
							noclick="1"
							watch="HeroSelectPlayerInfo{index}"
							ontrigger="SetVisible(param30 or (param14 and !param26) or (param14 and (param41 == 6) and (param40 == 2)) or (param14 and (param40 == 11)));"
							visible="0"
						>
							<panel x="-2.4%" float="right" padding="0" noclick="true">
								<panel watch="GamePhaseExtended" ontrigger="If(param0 == 2, SetColor('1 0 0 .4'), If(param0 == 8, SetColor('1 0.7 0 .4'), If(param0 == 9, SetColor('1 1 0 .4'), SetColor('0 1 0 .4'))));" texture="lobby/arrow.tga" width="100@" color="0 1 0 .4" visible="1"/>
								<panel watch="GamePhaseExtended" ontrigger="If(param0 == 2, SetColor('1 0 0 .4'), If(param0 == 8, SetColor('1 0.7 0 .4'), If(param0 == 9, SetColor('1 1 0 .4'), SetColor('0 1 0 .4'))));" texture="lobby/arrow.tga" width="100@" color="0 1 0 .4" visible="1"/>
								<panel watch="GamePhaseExtended" ontrigger="If(param0 == 2, SetColor('1 0 0 .4'), If(param0 == 8, SetColor('1 0.7 0 .4'), If(param0 == 9, SetColor('1 1 0 .4'), SetColor('0 1 0 .4'))));" texture="lobby/arrow.tga" width="100@" color="0 1 0 .4" visible="1"/>
								<panel watch="GamePhaseExtended" ontrigger="If(param0 == 2, SetColor('1 0 0 .4'), If(param0 == 8, SetColor('1 0.7 0 .4'), If(param0 == 9, SetColor('1 1 0 .4'), SetColor('0 1 0 .4'))));" texture="lobby/arrow.tga" width="100@" color="0 1 0 .4" visible="1"/>
								<panel watch="GamePhaseExtended" ontrigger="If(param0 == 2, SetColor('1 0 0 .4'), If(param0 == 8, SetColor('1 0.7 0 .4'), If(param0 == 9, SetColor('1 1 0 .4'), SetColor('0 1 0 .4'))));" texture="lobby/arrow.tga" width="100@" color="0 1 0 .4" visible="1"/>
							</panel>

							<panel x="-2.4%" float="right" padding="0" noclick="true">
								<panel watch="GamePhaseExtended" ontrigger="If(param0 == 2, SetColor('1 0 0 1'), If(param0 == 8, SetColor('1 0.7 0 1'), If(param0 == 9, SetColor('1 1 0 1'), SetColor('0 1 0 1')))); SleepWidget(200,'Call(\'arrow_1_{index}\', \'setvisible(0); setvisible(1);\')'); fadeout(600);" onshow="SleepWidget(200,'Call(\'arrow_1_{index}\', \'setvisible(0); setvisible(1);\')'); fadeout(600);" texture="lobby/arrow.tga" name="arrow_5_{index}" width="100@" color="0 1 0 1" visible="1"/>
								<panel watch="GamePhaseExtended" ontrigger="If(param0 == 2, SetColor('1 0 0 1'), If(param0 == 8, SetColor('1 0.7 0 1'), If(param0 == 9, SetColor('1 1 0 1'), SetColor('0 1 0 1'))));" onshow="SleepWidget(200,'Call(\'arrow_5_{index}\', \'setvisible(0); setvisible(1);\')'); fadeout(600);" texture="lobby/arrow.tga" name="arrow_4_{index}" width="100@" color="0 1 0 1" visible="0"/>
								<panel watch="GamePhaseExtended" ontrigger="If(param0 == 2, SetColor('1 0 0 1'), If(param0 == 8, SetColor('1 0.7 0 1'), If(param0 == 9, SetColor('1 1 0 1'), SetColor('0 1 0 1'))));" onshow="SleepWidget(200,'Call(\'arrow_4_{index}\', \'setvisible(0); setvisible(1);\')'); fadeout(600);" texture="lobby/arrow.tga" name="arrow_3_{index}" width="100@" color="0 1 0 1" visible="0"/>
								<panel watch="GamePhaseExtended" ontrigger="If(param0 == 2, SetColor('1 0 0 1'), If(param0 == 8, SetColor('1 0.7 0 1'), If(param0 == 9, SetColor('1 1 0 1'), SetColor('0 1 0 1'))));" onshow="SleepWidget(200,'Call(\'arrow_3_{index}\', \'setvisible(0); setvisible(1);\')'); fadeout(600);" texture="lobby/arrow.tga" name="arrow_2_{index}" width="100@" color="0 1 0 1" visible="0"/>
								<panel watch="GamePhaseExtended" ontrigger="If(param0 == 2, SetColor('1 0 0 1'), If(param0 == 8, SetColor('1 0.7 0 1'), If(param0 == 9, SetColor('1 1 0 1'), SetColor('0 1 0 1'))));" onshow="SleepWidget(200,'Call(\'arrow_2_{index}\', \'setvisible(0); setvisible(1);\')'); fadeout(600);" texture="lobby/arrow.tga" name="arrow_1_{index}" width="100@" color="0 1 0 1" visible="1" />
							</panel>

							<label x="28%" height="100%" font="dyn_10" textvalign="center" textalign="center" color="0 1 0 1" shadow="1" content="???" noclick="true"
								watch="HeroSelectPlayerInfo{index}"
								ontrigger="
									If(param40 == 2,
										Split(
											SetColor('1 0 0 1'),
											SetText(Translate('game_lobby_banning'))
										)
									,
										If(param40 == 9,
											Split(
												SetColor('1 0.7 0 1'),
												SetText(Translate('game_lobby_hidden_banning'))
											)
										,
											If(param40 == 11,
												Split(
													SetColor('1 1 0 1'),
													SetText(Translate('game_lobby_locking'))
												)
											,
												If(param40 == 12,
													Split(
														SetColor('0 1 0 1'),
														SetText(Translate('game_lobby_shuffle_picking'))
													)
												,
													If(param40 == 13,
														Split(
															SetColor('1 0.7 0 1'),
															SetText(Translate('game_lobby_vote_banning'))
														)
													,
														If(param30,
															Split(
																SetColor('0 1 0 1'),
																SetText(Translate('game_lobby_captains_pick'))
															)
														,
															Split(
																SetColor('0 1 0 1'),
																SetText(Translate('game_lobby_picking'))
															)
														)
													)
												)
											)
										)
									);
								"
							/>
						</panel>
						<panel width="72%" x="-.4h" align="right" noclick="true">
							<label watch="HeroSelectPlayerInfo{index}" ontrigger="SetText(param5);" height="100%" font="dyn_9" textvalign="center" color="white" outline="1" content="" noclick="true"/>
						</panel>
					</panel>
				</panel>

				<!-- Player Side Disc -->
				<instance name="player_side_disc" index="{index}" slot="{slot}"/>

				<!-- Round Pod -->
				<panel width="100@" height="100%" align="left" noclick="true">

					<!-- ASSET LOADING BAR  -->

					<panel  watch="GamePhase" ontrigger="SetVisible(param0 == 4);" name="asset_loading_bar_{index}" x="50%" width="48h" y="-6%" height="3.4h" valign="center" color="invisible" noclick="true" >

						<panel
							watch="HeroSelectPlayerInfo{index}"
							ontriggerlua=
							"
								if(AtoN(param18) >= 1) then
									if( not AtoB(param20) and GetWidget('race_result_{index}'):GetText() == '') then
										GetWidget('race_result_{index}'):SetText(GetCvarString('_raceResult') )
										Set('_raceResult', GetCvarInt('_raceResult') + 1)
									end
								else
									GetWidget('race_result_{index}'):SetText('')
								end
							"
							noclick="true"
						/>

						<panel width="100%"
							name="asset_loading_bar_controller{index}"
							group="asset_loading_bars"
							watch="HeroSelectPlayerInfo{index}"
							ontrigger="SetWidth(FtoP(param18));"
						>
							<panel  valign="center" height="110%" texture="lobby/hero_track.tga"/>

							<panel
								watch="HeroSelectPlayerInfo{index}"
								color=".24 .24 .24 1"
								height="2.5h"
								valign="center"
								width="100%"
							/>

							<image
								width="100%"
								watch="HeroSelectPlayerInfo{index}"
								ontrigger="SetColor(param4);"
								height="2.5h"
								valign="center"
								texture="/ui/elements/hero_bar.tga"
								rendermode="overlay"
							/>

							<panel
								color="white"
								height="2.5h"
								valign="center"
								width="100%"
							/>

							<image
								width="100%"
								watch="HeroSelectPlayerInfo{index}"
								ontrigger="SetColor(param4);"
								height="2.5h"
								valign="center"
								texture="/ui/elements/hero_bar.tga"
								rendermode="overlay"
							/>

							<panel height="12.5h" width="12.5h" x="6.25h"  valign="center" align="right" noclick="1" >
								<image width="33.5%" height="32.5%" align="center" valign="center" texture="/ui/fe2/mainmenu/avatar.tga" noclick="1"
									watch="HeroSelectPlayerInfo{index}"
									ontriggerlua="
										if (NotEmpty(param6)) then
											self:SetTexture(param6)
										else
											self:SetTexture('/ui/common/ability_coverup.tga')
										end

										if AtoB(param25) then
											self:SetColor('0.7 0.7 0.7 0.8')
										else
											self:SetColor('1.0 1.0 1.0 1.0')
										end
									"
									resourcecontext="lobby"
								/>

								<panel color="white" valign="center" align="right"   texture="lobby/pod_race_gear.tga" noclick="1"/>
								<panel color="white" valign="center" align="right"  texture="lobby/portrait_race_frame.tga" noclick="1"/>

							</panel>
						</panel>
					</panel>

					<image x="-6.5%" width="25%" texture="lobby/mastery/arch_iron.tga" align="right" noclick="true"
					       watch="HeroSelectMastery{index}"
				  		   ontriggerlua="self:SetTexture('/ui/fe2/lobby/mastery/arch_'..param0..'.tga')" />
					<panel x="2.75%" y="-6.5%" noclick="true">

						<panel x="0" y="0" width="43%" height="43%" align="center" valign="center" noclick="true">

							<panel watch="GamePhase" ontrigger="SetVisible(param0 == 1)" noclick="1">
								<!-- avatar -->
								<avatar
									name="LobbyPlayerAvatar{index}"
									texture="/ui/common/ability_coverup.tga"
									watch="LobbyPlayerInfo{index}"
									ontrigger="
										SetTexture('/ui/common/ability_coverup.tga');
										If(!StringEmpty(param82),
											SetTexture(param82),
											If(param9 gt 0, SetAvatar('http://www.heroesofnewerth.com/getAvatar.php?id=' # param9))
										);
									"
									resourcecontext="lobby"
								/>
							</panel>

							<panel watch="GamePhase" ontrigger="SetVisible(param0 gt 1)" noclick="1">

								<!-- Hero (Left)-->
								<image x="0" y="0" width="110%" height="110%" valign="center" align="center" visible="0"
									watch="HeroSelectPlayerInfo{index}"
									ontrigger="
										If(param25,
											SetRenderMode('grayscale'),
											SetRenderMode('normal')
										);
										SetOnmouseover('ShowWidget(\'hero_info\'); GetHeroInfo(\'' # param13 # '\', \'' # param2 # '\');');
										If((param25 or param26) and param27 and !ViewingStreaming(),
											SetOnclick('CallEventParamsX(\'altav_full\', 0, 2); cg_avatarHero = \'' # param13 # '\';'),
											SetOnclick('')
										);
									"
									ontriggerlua="
										self:SetVisible(AtoB(param15))
										if AtoB(param28) then
											self:SetTexture('/ui/fe2/lobby/mystery.tga')
										else
											self:SetTexture(param6)
										end
									"
									onmouseout="HideWidget('hero_info');"
									texture="$checker"
									resourcecontext="lobby"
								/>
								<panel noclick="1" watch="GamePhase" ontrigger="SetVisible(param0 lt 4);">
									<!-- Ready Effect -->
									<panel name="hero_ready_effect{index}"  visible="0" y="-2%"  valign="center"  color="invisible" align="center"
										noclick="true" passivechildren="true"
										watch="HeroSelectPlayerInfo{index}"
										ontrigger="SetVisible(param10);"
									>
										<modelpanel
											onshow="SetEffect('/ui/common/models/hero_select/hero_ready.effect'); PlaySound('/shared/sounds/ui/hero_select/button_ready.wav')"
											model="/ui/common/models/hero_select/circle.mdf"
											anim="idle"
											camerapos="0 1700 0"
											cameraangles="0 0 180"
											camerafov="2.0"
											cameranear="1"
											carmerafar="7000"
											depthclear="false"
											depthcompress="true"
											sunazimuth="140"
											sunaltitude="10"
											suncolor="1.4 1.3 1"
										/>
									</panel>
								</panel>

								<!-- Swap Effect -->
								<panel
									visible="0" y="-2%" valign="center" color="invisible" align="center"
									noclick="true" passivechildren="true"
									watch="HeroSelectPlayerInfo{index}"
									ontrigger="SetVisible(param9 and param11);"
								>
									<modelpanel
										onshow="SetEffect('/ui/common/models/hero_select/hero_swap.effect');"
										model="/ui/common/models/hero_select/select.mdf"
										anim="idle"
										camerapos="0 1700 0"
										cameraangles="0 0 180"
										camerafov="2.0"
										cameranear="1"
										carmerafar="7000"
										depthclear="false"
										depthcompress="true"
										sunazimuth="140"
										sunaltitude="10"
										suncolor="1.4 1.3 1"
									/>

								</panel>
							</panel>

							<panel watch="GamePhase" ontrigger="SetVisible(param0 == 1)" noclick="1">
								<image align="center" x="7%" noclick="true" texture="lobby/lock2.tga" watch="LobbyPlayerInfo{index}" ontrigger="SetVisible(param15);"/>
							</panel>

							<panel watch="LobbyPlayerInfo{index}"  ontrigger="
								If(param0 gt -1,
										Split(
											call('iris_open{index}','setVisible(1)'),
											call('iris_close{index}','setVisible(0)')
										),
										Split(
											call('iris_open{index}','setVisible(0)'),
											call('iris_close{index}','setVisible(1)')
										)
									);"
								noclick="true"
							/>
							<animatedimage visible="1"  name="iris_close{index}"
								onshow="StartAnim(1); Call('iris_open{index}','setVisible(0);');"  startframe="8" numframes="8" align="center" valign="center" texture="/ui/fe2/mainmenu/iris/open.tga" noclick="true" loop="1" loopbackframe="-1"  fps="30"/>
							<animatedimage visible="0"  name="iris_open{index}"
								onshow="StartAnim(1);  Call('iris_close{index}','setVisible(0);');"  numframes="8" align="center" valign="center" texture="/ui/fe2/mainmenu/iris/open.tga" noclick="true" loop="1" loopbackframe="-1"  fps="30"/>
							<image  name="iris_cover_{index}" visible="1" onshow="SleepWidget(400, 'SetVisible(0);');" numframes="8" align="center" valign="center" texture="/ui/fe2/mainmenu/iris/open0000.tga" noclick="true" loop="1" loopbackframe="-1"  fps="30"/>
							<panel watch="GamePhase" ontrigger="SetVisible(param0 gt 1)" noclick="1">
								<animatedimage visible="0"  name="iris_close_phase_2_3_{index}"
									watch="HeroSelectPlayerInfo{index}" ontrigger="If(param15, setVisible(0)); If(param15, call('iris_open_phase_2_3_{index}','setVisible(1)'), call('iris_close_phase_2_3_{index}','setVisible(1)') );" onshow="StartAnim(1); call('iris_open_phase_2_3_{index}','setVisible(0)');"  startframe="8" numframes="8" align="center" valign="center" texture="/ui/fe2/mainmenu/iris/open.tga" noclick="true" loop="1" loopbackframe="-1"  fps="30"
								/>
								<animatedimage visible="0"  name="iris_open_phase_2_3_{index}"
									onshow="StartAnim(1); call('iris_close_phase_2_3_{index}','setVisible(0)');" numframes="8" align="center" valign="center" texture="/ui/fe2/mainmenu/iris/open.tga" noclick="true" loop="1" loopbackframe="-1"  fps="30"
								/>
							</panel>

						</panel>

						<image watch="LobbyPlayerInfo{index}"
							ontrigger="SetColor(param2);"
							texture="lobby/team_color.tga"
							align="center"
							valign="center"
							noclick="true"
						/>

					</panel>

					<image texture="lobby/mastery/pod_face_iron.tga" noclick="true"
						   watch="HeroSelectMastery{index}"
						   ontriggerlua="self:SetTexture('/ui/fe2/lobby/mastery/pod_face_'..param0..'.tga')" />

					<panel noclick="true" color="invisible" onload="CreateBool('_lobby_player{index}_locked', false);" />

					<!-- swap accept button -->
					<button
						x="2%" y="-5%"
						width="64%" height="64.0%"
						align="center"
						valign="center"
						color="invisible"
						watch="HeroSelectPlayerInfo{index}"
						ontrigger="SetVisible(!param1 and param9 and param11);"
						onclick="SwapHeroRequest({index} % 5, 0, 0);  PlaySound('/shared/sounds/ui/hero_select/button_swap.wav'); cg_avatarHero = '';"
						watch2="LobbyPlayerInfo{index}"
						ontrigger2="
									If(param17,
										SetOnrightclick(
											'Trigger(\'GameLobbyContextMenu\', true, GetCursorPosX(), GetCursorPosY(), 1, {slot}, ' # param0 # ');'
										),
										SetOnrightclick('')
									);
									if(param22 + param23 + param35 + param36 + param37 + param69 gt 0, Set('_psr_tipShow{index}', 1), Set('_psr_tipShow{index}', param78));
									Set('_psr_tipA{index}', '^444(^666' # Round(param22 / (param22 + param23) * 100) # '%^444) ^w' # param22 # '\\n' # param23 # '\\n' # FtoA(param25 / param27, 2) # ':1\\n' # FtoA(param26 / param27, 2) # ':1\\n' # FtoA((param25 + param26) / param27, 2) # ':1\\n' # FtoA(param31, 1) # '\\n' # FtoA(ceil(param29 * 10) / 10, 1) # '\\n' # FtoA(ceil(param30 * 10) / 10, 1) # '::' # param1 # '::' # param2 # '::' # param78  );
									Set('_psr_tipMatch{index}', param33 # ':' # param34 # ':^g' # param35 # '^w/^r' # param36 # '^w/^y' # param37 # '|' # param38 # ':' # param39 # ':^g' # param40 # '^w/^r' # param41 # '^w/^y' # param42 # '|' # param43 # ':' # param44 # ':^g' # param45 # '^w/^r' # param46 # '^w/^y' # param47 # '|' # param48 # ':' # param49 # ':^g' # param50 # '^w/^r' # param51 # '^w/^y' # param52 # '|' # param53 # ':' # param54 # ':^g' # param55 # '^w/^r' # param56 # '^w/^y' # param57 # '|' # param58 # ':' # param59 # ':^g' # param60 # '^w/^r' # param61 # '^w/^y' # param62 # '|' # param63 # ':' # param64 # ':^g' # param65 # '^w/^r' # param66 # '^w/^y' # param67);
									Set('_psr_tipHero{index}', param68 # ':' # param69 # ':null|' # param70 # ':' # param71 # ':null|' # param72 # ':' # param73 # ':null|' # param74 # ':' # param75 # ':null|' # param76 # ':' # param77 # ':null');
						"
						onmouseover="
									ExplodeTrigger('GameLobby_NewStats', _psr_tipA{index}, '|', '::');
									Trigger('GameLobby_StatsFade', _psr_tipShow{index});
									ExplodeTrigger('GameLobby_RecentMatchTrigger', _psr_tipMatch{index});
									ExplodeTrigger('GameLobby_FavHeroTrigger', _psr_tipHero{index});
						"
						onmouseout="
									Trigger('GameLobby_StatsFade', 0);
						"
						onload="
									createstring('_psr_tipA{index}', '');
									createstring('_psr_tipMatch{index}', '');
									createstring('_psr_tipHero{index}', '');
									createbool('_psr_tipShow{index}', false);
						"
					/>

					<!-- join overlay so you can click anywhere on the pod -->
					<button
						name="join_overlay_left{index}"
						color="invisible"
						x="2%" y="-5%"
						width="64%" height="64.0%"
						align="center"
						valign="center"
						onclick="
							PlaySound('/shared/sounds/ui/lobby/button_jointeam.wav');
							Team({team}, {slot});
							Trigger('RefereeControlPage', 0);
							"						watch1="LobbyPlayerInfo{index}"
						ontrigger1="SetVisible(param0 == -1 and !param15);"
						labelwatch="LobbyPlayerInfo{index}"
						watch2="LobbyPlayerInfo{index}"
						ontrigger2="
									If(param17,
										SetOnrightclick(
											'Trigger(\'GameLobbyContextMenu\', true, GetCursorPosX(), GetCursorPosY(), 1, {slot}, ' # param0 # ');'
										),
										SetOnrightclick('')
									);
							"
					/>

					<!-- Open Button -->
					<instance name="button2" button_name="lobbyJoinTeamButton{team}{slot}"
						x="3%" y="67.0%"
						width="43%" height="13.0%"
						align="center"
						borderthickness="15%"
						label="general_join"
						onclick="PlaySound('/shared/sounds/ui/lobby/button_jointeam.wav'); Team({team}, {slot});"
						watch="LobbyPlayerInfo{index}"
						ontrigger="SetEnabled(param0 == -1 and !param15);"
						watch1="GamePhase"
						ontrigger1="SetVisible(param0 &lt;= 3)"
						labelwatch="LobbyPlayerInfo{index}"
						labelontrigger="If(param15, SetText(Translate('globby_spot_locked')), SetText(Translate('general_join'))); If(param15 and !(_lobby_player{index}_locked), Set('_lobby_player{index}_locked',true)); If(!param15 and (_lobby_player{index}_locked), Set('_lobby_player{index}_locked',false));"
					/>

					<panel watch="GamePhase" ontrigger="SetVisible(param0 gt 1)" noclick="1">
						<instance name="button2" button_name="lobbyButtonReady{team}{slot}"
							x="3%" y="67.0%"
							width="43%" height="13.0%"
							align="center"
							borderthickness="15%"
							label="general_ready"
							visible="0"
							onclick="Ready();"
							watch="HeroSelectPlayerInfo{index}"
							ontrigger="
								SetVisible(param1 and !param10);
								SetEnabled(param26);
							"
							watch2="WalkthroughHighlightReady"
							ontrigger2lua=
							"
								if('{team}' == '1' and '{slot}' == '0') then
									Main_Walkthrough.PointAtWidgetSleep(self, true, '', '4', 1200)
								end
							"
						/>

						<panel
							watch="GamePhase" ontrigger="SetVisible(param0 == 3)" noclick="1"
							x="3%" y="67.0%"
							width="43%" height="13.0%"
							align="center"
							borderthickness="15%"					>

							<frame
								noclick="1"
								watch="HeroSelectPlayerInfo{index}"
								ontrigger="
									SetVisible(!param1 or param10);
									If(param10,
										SetBorderColor('0.4 1 0.4'),
										SetBorderColor('0.4 .4 0.4'));

									If(param10,
										SetColor('0.4 0.4 0.4'),
										SetColor('0.0 1 0.0'));
									"

								texture="/ui/info/button.tga" borderthickness="15%">
								<label
									watch="HeroSelectPlayerInfo{index}"
									ontrigger="
									If(param10,
										SetColor('0.2 1 0.2'),
										SetColor('0.4 .4 .4'));
									"
								width="100%" height="100%" textvalign="center" textalign="center" valign="center" align="center" font="dyn_9" color="0 0.75 0" shadow="true" shadowcolor="black" noclick="1">general_ready</label>
							</frame>
						</panel>
					</panel>
				</panel>

				<!-- Left Player Name -->
				<panel name="HeroSelectPlayerInfoName{index}" y="37%" x="37%" height="15%" width="54%" visible="0">
					<label
						font="dyn_10" textvalign="center" color="white" outline="1" content=""
						onclick="Trigger('GameLobbyContextMenu', false, 0, 0, 0, 0, -1);"
						watch="LobbyPlayerInfo{index}"
						ontriggerlua="
							Game_Lobby:BotJoinHelper(param1)

							local font, color = NotEmpty(param87) and param87..'_10' or 'dyn_10', 'white'
							if NotEmpty(param81) then
								color = param81
							elseif AtoB(param19) then
								color = '#FF0000'
							elseif AtoB(param20) then
								color = '#DBBF4A'
							end

							self:SetFont(font)
							self:SetColor(color)
							self:SetGlow(AtoB(param83))
							self:SetGlowColor(param85)
							if font == '8bit_10' then
								self:SetText(string.upper(param1))
								self:SetY('.1h')
							else
								self:SetText(param1)
								self:SetY('0h')
							end
						"
					/>
					<button
					   width="-100@"
					   align="left"
					   color="invisible"
					   onclick="Trigger('GameLobbyContextMenu', false, 0, 0, 0, 0, -1);"
					   watch1="GamePhase"
					   ontrigger1="SetVisible(param0 == 1)"
					   watch="LobbyPlayerInfo{index}"
					   ontrigger="
							If(param17,
								SetOnrightclick(
									'Trigger(\'GameLobbyContextMenu\', true, GetCursorPosX(), GetCursorPosY(), 1, {slot}, ' # param0 # ');'
								),
								SetOnrightclick('')
							);
							if(param22 + param23 + param35 + param36 + param37 + param69 gt 0, Set('_psr_tipShow{index}', 1), Set('_psr_tipShow{index}', param78));
							Set('_psr_tipA{index}', '^444(^666' # Round(param22 / (param22 + param23) * 100) # '%^444) ^w' # param22 # '\\n' # param23 # '\\n' # FtoA(param25 / param27, 2) # ':1\\n' # FtoA(param26 / param27, 2) # ':1\\n' # FtoA((param25 + param26) / param27, 2) # ':1\\n' # FtoA(param31, 1) # '\\n' # FtoA(ceil(param29 * 10) / 10, 1) # '\\n' # FtoA(ceil(param30 * 10) / 10, 1) # '::' # param1 # '::' # param2 # '::' # param78  );
							Set('_psr_tipMatch{index}', param33 # ':' # param34 # ':^g' # param35 # '^w/^r' # param36 # '^w/^y' # param37 # '|' # param38 # ':' # param39 # ':^g' # param40 # '^w/^r' # param41 # '^w/^y' # param42 # '|' # param43 # ':' # param44 # ':^g' # param45 # '^w/^r' # param46 # '^w/^y' # param47 # '|' # param48 # ':' # param49 # ':^g' # param50 # '^w/^r' # param51 # '^w/^y' # param52 # '|' # param53 # ':' # param54 # ':^g' # param55 # '^w/^r' # param56 # '^w/^y' # param57 # '|' # param58 # ':' # param59 # ':^g' # param60 # '^w/^r' # param61 # '^w/^y' # param62 # '|' # param63 # ':' # param64 # ':^g' # param65 # '^w/^r' # param66 # '^w/^y' # param67);
							Set('_psr_tipHero{index}', param68 # ':' # param69 # ':null|' # param70 # ':' # param71 # ':null|' # param72 # ':' # param73 # ':null|' # param74 # ':' # param75 # ':null|' # param76 # ':' # param77 # ':null');
							If(param10 == -1,
								SetOnMouseover(''),
								SetOnMouseover('
									ExplodeTrigger(\'GameLobby_NewStats\', _psr_tipA{index}, \'|\', \'::\');
									Trigger(\'GameLobby_StatsFade\', _psr_tipShow{index});
									ExplodeTrigger(\'GameLobby_RecentMatchTrigger\', _psr_tipMatch{index});
									ExplodeTrigger(\'GameLobby_FavHeroTrigger\', _psr_tipHero{index});
								')
							);
						"
						onmouseover="
							ExplodeTrigger('GameLobby_NewStats', _psr_tipA{index}, '|', '::');
							Trigger('GameLobby_StatsFade', _psr_tipShow{index});
							ExplodeTrigger('GameLobby_RecentMatchTrigger', _psr_tipMatch{index});
							ExplodeTrigger('GameLobby_FavHeroTrigger', _psr_tipHero{index});
						"
						onmouseout="
							Trigger('GameLobby_StatsFade', 0);
						"
						onload="
							createstring('_psr_tipA{index}', '');
							createstring('_psr_tipMatch{index}', '');
							createstring('_psr_tipHero{index}', '');
							createbool('_psr_tipShow{index}', false);
						"
					 />
				</panel>

				<!-- Unit Name -->
				<panel y="58%" x="36%" height="17%" width="35%" noclick="1" visible="0">
					<label watch="HeroSelectPlayerInfo{index}" ontrigger="SetText(param5);" height="100%" font="dyn_9" textalign="center" textvalign="center" color="white" outline="1" content=""/>
				</panel>
				
				<!-- Enable for NAEU only -->
				<if condition="!cl_GarenaEnable">
					<!-- PSR/MMR -->
					<panel name="HeroSelectPlayerPSR{index}" y="62.0%" x="34.0%" height="13%" width="15.0%" noclick="1" visible="0">
						<label
							watch="LobbyPlayerInfo{index}"
							ontrigger="if(param10 lt 0, SetText(''), SetText(Round(param10)));"
							onmouseover="ShowWidget('globby_psr1_tip');"
							onmouseout="HideWidget('globby_psr1_tip');"
							height="100%" font="dyn_8" textalign="center" textvalign="center" color="white" shadow="1" content=""/>
					</panel>

					<!-- PSR -->
					<panel name="HeroSelectPlayerPSRChange{index}" y="62.0%" x="49.0%" height="14%" width="22.0%" noclick="1" visible="0">
						<label
							watch="LobbyPlayerInfo{index}"
							onmouseover="ShowWidget('globby_psr2_tip');"
							onmouseout="HideWidget('globby_psr2_tip');"
							ontrigger="
								If(!param21,
									Split(SetVisible(param10 != -1 and param11), SetText('+' # param12 # ' / ' # param13)),
									Split(SetVisible(param10 != -1 and param11), SetText(''))
								)
							"
							height="100%" font="dyn_7" textalign="center" textvalign="center" color="white" shadow="1" content=""
						/>
					</panel>
				</if>

				<!-- Gold Count -->
				<panel x="-5.0%" y="-1.0%" width="50@" height="50%" align="right" noclick="true" visible="false" name="PlayerGoldCount{index}">
					<image texture="lobby/legion_gold.tga" noclick="true" />
					<label y="-3.0%" height="100%" textalign="center" textvalign="center" font="dyn_8" color="white" content="850" watch="HeroSelectPlayerInfo{index}" ontrigger="SetText(param17);"/>
				</panel>

				<!-- Rank -->
				<panel name="HeroSelectPlayerRank{index}" align="left" x="33.2%" y="52%" width="38%" height="32i" visible="0" noclick="1">
					<panel watch="LobbyPlayerInfo{index}" ontriggerlua="self:SetVisible(IsCampaignMatch())" noclick="0"/>
					<panel visible="0" noclick="1"
						watch="LobbyPlayerInfo{index}"
						ontriggerlua="
							Game_Lobby:SetupCampainLevel(self, {index}, param0, param18, param86)
						"
					>
						<image name="HeroSelectPlayerRankBgImage{index}" align="center" x="0" y="-6i" width="256i" height="34i" valign="center" noclick="1" />
						<image name="HeroSelectPlayerRankImage{index}" align="center" x="-10i" y="0" width="50i" height="50i" valign="center" noclick="1" />
						<label name="HeroSelectPlayerRankLabel{index}" align="left" x="54%" y="-16%"  width="-25%" textvalign="center" font="dyn_8" color="white" shadow="true" shadowcolor="#000000" outline="true" outlinecolor="#000000" noclick="1" />
					</panel>
				</panel>

			</panel>

			<!-- Lock Button -->
			<instance name="lock_button" index="{index}" team="{team}" slot="{slot}"/>

			<!-- Add bot 3.0 RMM CanHaveBots -->
			<panel group="glb_bot_buttons" name="glb_add_bot_{index}" x="10.55h" y="3.8h" width="3.25h" height="6.5h" noclick="1"
				watch="LobbyPlayerInfo{index}"
				ontrigger=" If(param15 and !(_lobby_player{index}_locked), Set('_lobby_player{index}_locked',true));
							If(!param15 and (_lobby_player{index}_locked), Set('_lobby_player{index}_locked',false));
							DoEvent(5);"
				onevent5lua="
					if GetCvarBool('ui_isBotMatch') and (GetCvarString('_left_pod_lobby{index}_open') == 'Closed') and IsHost() and (not GetCvarBool('_lobby_player{index}_locked')) then
						self:SetVisible(Empty(param1))
					else
						self:SetVisible(false)
					end
				"
			>
				<image texture="lobby/legion_lock_frame.tga" hflip="true" noclick="true"/>
				<panel x="-0.15h" y="-0.65h" width="2.25h" height="2.25h" align="center" valign="bottom"
					onclick="Call('glb_invite_bot', 'FadeIn(100);');"
					onclicklua="PlaySound('/shared/sounds/ui/button_click_01.ogg') UIManager.GetInterface('main'):HoNGameLobbyF('RepickBot', self, {slot}, '{team}')"
					ondoubleclicklua="PlaySound('/shared/sounds/ui/button_click_01.ogg') UIManager.GetInterface('main'):HoNGameLobbyF('SelectBot', self, 1)"
					onshowlua="
						UIManager.GetInterface('main'):HoNGameLobbyF('PopulateBotPickList')
					"
				>
					<image texture="/ui/icons/botmatch.tga" noclick="1"/>
				</panel>
			</panel>

			<panel
				name="event_left_pod_master{index}"
				noclick="1"
				watch="LobbyPlayerInfo{index}"
				ontrigger="
					If (param0 != -2,
						If(param0 != -1,CallEvent('event_left_pod_lobby{index}',1), CallEvent('event_left_pod_lobby{index}',0))
					);
				"
			/>

			<!-- Use this for resetting all POD stuff on disconnect etc-->
			<panel
				name="event_phase_0_check_{index}"
				noclick="true"
				watch="GamePhase"
				ontrigger="if(param0 == 0, CallEvent('event_left_pod_lobby{index}',6)); "
			/>

			<panel
				name="event_phase_2_check_{index}"
				noclick="true"
				watch="GamePhase"
				ontrigger="if(param0 == 2, CallEvent('event_left_pod_lobby{index}',2)); "

				watch1="LobbyCountDown"
				ontrigger1=""
			/>

			<panel
				name="event_phase_3_check_{index}"
				noclick="true"
				watch="GamePhase"
				ontrigger="if(param0 == 3, CallEvent('event_left_pod_lobby{index}',3)); "
			/>
			<panel
				name="event_phase_4_check_{index}"
				noclick="true"
				watch="GamePhase"
				ontrigger="if(param0 == 4, CallEvent('event_left_pod_lobby{index}',4)); "
			/>

			<panel
				name="event_left_pod_lobby{index}"
				noclick="1"
				onload="CreateString('_left_pod_lobby{index}_open', 'Closed');"
				onevent0="
					Set('_left_pod_lobby{index}_open', 'Closed');
					Call('pod_stage_6_{index}_close','SleepWidget(0,\'CallEvent(name,0);\');');
					Call('pod_stage_5_{index}_close','SleepWidget(100,\'CallEvent(name,0);\');');

					Call('pod_stage_3_{index}_close','SleepWidget(300,\'CallEvent(name,0);\');');
					Call('pod_stage_2_{index}_close','SleepWidget(500,\'CallEvent(name,0);\');');
					Call('pod_stage_1_{index}_close','SleepWidget(600,\'CallEvent(name,0);\');');

					Call('pod_stage_1_{index}','SleepWidget(0,\'\');');
					Call('pod_stage_2_{index}','SleepWidget(0,\'\');');
					Call('pod_stage_3_{index}','SleepWidget(0,\'\');');

					Call('pod_stage_5_{index}','SleepWidget(0,\'\');');
					Call('pod_stage_6_{index}','SleepWidget(0,\'\');');
					Call('hero_name_container_left{index}', 'SetWidth(\'15%\');');
					Call('glb_add_bot_{index}', 'DoEvent(5);')
				"

				onevent1="
					Set('_left_pod_lobby{index}_open', 'Open');
					Call('pod_stage_1_{index}','SleepWidget(0,\'CallEvent(name,0);\');');
					Call('pod_stage_2_{index}','SleepWidget(100,\'CallEvent(name,0);\');');
					Call('pod_stage_3_{index}','SleepWidget(300,\'CallEvent(name,0);\');');

					Call('pod_stage_5_{index}','SleepWidget(600,\'CallEvent(name,0);\');');
					Call('pod_stage_6_{index}','SleepWidget(850,\'CallEvent(name,0);\');');

					Call('pod_stage_6_{index}_close','SleepWidget(0,\'\');');
					Call('pod_stage_5_{index}_close','SleepWidget(0,\'\');');

					Call('pod_stage_3_{index}_close','SleepWidget(0,\'\');');
					Call('pod_stage_2_{index}_close','SleepWidget(0,\'\');');
					Call('pod_stage_1_{index}_close','SleepWidget(0,\'\');');

					Call('hero_name_container_left{index}', 'SetWidth(\'15%\');');
					Call('glb_add_bot_{index}', 'DoEvent(5);')
				"

				onevent2="
					call('iris_close_phase_2_3_{index}', 'SetVisible(1);');

					Call('lobby_transition_timer','SleepWidget(400,\'SetVisible(0);\');');
					Call('lobby_status','SleepWidget(400,\'SetVisible(1);\');');

					CallEvent('toggle_latch', 0);


					Call('pod_stage_1_{index}_picker','SleepWidget(0,\'CallEvent(name,0);\');');
					Call('pod_stage_2_{index}_picker','SleepWidget(100,\'CallEvent(name,0);\');');
					Call('pod_stage_3_{index}_picker','SleepWidget(300,\'CallEvent(name,0);\');');

					Call('pod_stage_5_{index}_picker','SleepWidget(600,\'CallEvent(name,0);\');');
					Call('pod_stage_6_{index}_picker','SleepWidget(850,\'CallEvent(name,0);\');');
					Call('pod_stage_7_{index}_picker','SleepWidget(850,\'CallEvent(name,0);\');');
				"
				onevent3="
					call('iris_close_phase_2_3_{index}', 'SetVisible(1);');

					Call('lobby_transition_timer','SleepWidget(400,\'SetVisible(0);\');');
					Call('lobby_status','SleepWidget(400,\'SetVisible(1);\');');

					CallEvent('toggle_latch', 0);
					Call('player_slot_mute_button{index}', 'FadeIn(250);');

					Call('pod_stage_1_{index}_picker','SleepWidget(0,\'CallEvent(name,0);\');');
					Call('pod_stage_2_{index}_picker','SleepWidget(100,\'CallEvent(name,0);\');');
					Call('pod_stage_3_{index}_picker','SleepWidget(300,\'CallEvent(name,0);\');');

					Call('pod_stage_5_{index}_picker','SleepWidget(600,\'CallEvent(name,0);\');');
					Call('pod_stage_6_{index}_picker','SleepWidget(850,\'CallEvent(name,0);\');');
					Call('pod_stage_7_{index}_picker','SleepWidget(850,\'CallEvent(name,0);\');');
				"

				onevent4="
					Set('_left_pod_lobby{index}_open', 'Closed');
					Call('pod_stage_6_{index}_close','SleepWidget(0,\'CallEvent(name,0);\');');
					Call('pod_stage_5_{index}_close','SleepWidget(100,\'CallEvent(name,0);\');');

					Call('pod_stage_3_{index}_close','SleepWidget(300,\'CallEvent(name,0);\');');
					Call('pod_stage_2_{index}_close','SleepWidget(500,\'CallEvent(name,0);\');');
					Call('pod_stage_1_{index}_close','SleepWidget(600,\'CallEvent(name,0);\');');

					Call('asset_loading_bar_{index}','SleepWidget(400,\'SetVisible(1);\');');
				"

				onevent6="
					Call('player_side_disc_frame{index}', 'Rotate(0, 1);');

					Call('player_side_disc{index}', 'SetX(0);');
					Call('hero_name_container_left{index}', 'SetWidth(\'15%\');');

					Call('player_slot_left_door{index}', 'SetX(\'-50.0%\');');
					Call('player_slot_right_door_slide{index}', 'SetX(\'0%\');');

					Call('HeroSelectPlayerPSR{index}', 'FadeOut(1);');
					Call('HeroSelectPlayerPSRChange{index}', 'FadeOut(1);');
					Call('HeroSelectPlayerInfoName{index}', 'FadeOut(1);');
					Call('HeroSelectPlayerRank{index}', 'FadeOut(1);');

					Call('player_slot_mute_button{index}', 'FadeOut(1);');
					Call('player_slot_mute_button{index}', 'FadeOut(1);');

					Call('player_slot_leave_button{index}', 'FadeOut(1);');
					Call('play_slot_kick_bot_button{index}', 'FadeOut(1);');

					Call('player_slot_repick_buttons{index}', 'FadeOut(1);');

					Call('player_slot_panel3{index}', 'Rotate(-90, 1);');
					Call('player_slot_bolt{index}', 'Rotate(0, 1);');
					Call('player_slot_panel3_cover{index}', 'Rotate(-90, 1);');
					Call('player_slot_right_door{index}', 'Rotate(-90, 1);');

					Call('player_slot_panel2{index}', 'SetX(\'-110.0@\');');
					Call('player_slot_panel3_slide{index}', 'SetX(\'-160@\');');
					Call('player_slot_panel3extras_container{index}', 'SetX(\'-160@\');');

					Call('player_slot_panel1{index}', 'SetX(\'-50.0%\');');
					Call('hero_name_container_left{index}', 'SetVisible(0);');

					Call('asset_loading_bar_controller{index}', 'SetWidth(\'0%\');');
				"
			/>

			<!-- ========= PLAYER SLOT OPEN ========= -->

			<!-- Panel 1 -->
			<panel
				noclick="1"
				name="pod_stage_1_{index}"
				onevent0="
					Call('player_slot_panel1{index}', 'SlideX(0, 200);');
					Call('hero_name_container_left{index}', 'SetVisible(1);');
				"
			/>
			<!-- Panel 2/3 Reveal -->
			<panel
				noclick="1"
				name="pod_stage_2_{index}"
				onevent0="
					Call('player_slot_panel2{index}', 'SlideX(\'91.0@\', 200);');
					Call('player_slot_panel3_slide{index}', 'SlideX(\'36.5@\', 100);');
					Call('player_slot_panel3extras_container{index}', 'SlideX(\'36.5@\', 100);');
				"
			/>
			<!-- Rotate 3 Down -->
			<panel
				noclick="1"
				name="pod_stage_3_{index}"
				onevent0="
					Call('player_slot_panel3{index}', 'Rotate(0, 100);');
					Call('player_slot_bolt{index}', 'Rotate(90, 100);');
					Call('player_slot_panel3_cover{index}', 'Rotate(0, 100);');
					Call('player_slot_right_door{index}', 'Rotate(0, 100);');
				"
			/>

			<!-- Doors -->
			<panel
				noclick="1"
				name="pod_stage_5_{index}"
				onevent0="
					Call('player_slot_left_door{index}', 'SlideX(\'8.0@\', 200);');
					Call('player_slot_right_door_slide{index}', 'SlideX(\'-21%\', 200);');

					Call('HeroSelectPlayerPSR{index}', 'FadeIn(400);');
					Call('HeroSelectPlayerPSRChange{index}', 'FadeIn(400);');
					Call('HeroSelectPlayerInfoName{index}', 'FadeIn(400);');
					Call('HeroSelectPlayerRank{index}', 'FadeIn(400);');
					Call('player_slot_mute_button{index}', 'FadeIn(300);');
					Call('player_slot_leave_button{index}', 'FadeIn(400);');
					Call('play_slot_kick_bot_button{index}', 'FadeIn(400);');
				"
			/>

			<panel
				noclick="1"
				name="pod_stage_6_{index}"
				onevent0="
					Call('player_side_disc{index}', 'SlideX(\'-33.6@\', 200);');
				"
			/>
			<panel
				noclick="1"
				name="pod_stage_7_{index}"
				onevent0="
					Call('player_side_disc_frame{index}', 'Rotate(-180, 200);');
				"
			/>

			<!-- ========= PLAYER SLOT CLOSE ========= -->

			<!-- ALL MODES HERE-->
			<panel
				noclick="1"
				name="pod_stage_7_{index}_close"
				onevent0="
					Call('player_side_disc_frame{index}', 'Rotate(0, 200);');
				"
			/>
			<!-- Player / Single Draft Disc -->
			<panel
				noclick="1"
				name="pod_stage_6_{index}_close"
				onevent0="
					Call('player_side_disc{index}', 'SlideX(0, 200);');
					Call('hero_name_container_left{index}', 'ScaleWidth(\'15%\', 200);');
				"
			/>
			<!-- Doors -->

			<panel
				noclick="1"
				name="pod_stage_5_{index}_close"
				onevent0="
					Call('player_slot_left_door{index}', 'SlideX(\'-50.0%\', 200);');
					Call('player_slot_right_door_slide{index}', 'SlideX(\'0%\', 200);');

					Call('HeroSelectPlayerPSR{index}', 'FadeOut(201);');
					Call('HeroSelectPlayerPSRChange{index}', 'FadeOut(201);');
					Call('HeroSelectPlayerInfoName{index}', 'FadeOut(201);');
					Call('HeroSelectPlayerRank{index}', 'FadeOut(201);');

					Call('player_slot_mute_button{index}', 'FadeOut(201);');
					Call('player_slot_leave_button{index}', 'FadeOut(201);');
					Call('play_slot_kick_bot_button{index}', 'FadeOut(201);');

					Call('player_slot_repick_buttons{index}', 'FadeOut(201);');
				"
			/>

			<!-- Rotate 3 Down -->
			<panel
				noclick="1"
				name="pod_stage_3_{index}_close"
				onevent0="
					Call('player_slot_panel3{index}', 'Rotate(-90, 200);');
					Call('player_slot_bolt{index}', 'Rotate(0, 200);');
					Call('player_slot_panel3_cover{index}', 'Rotate(-90, 200);');
					Call('player_slot_right_door{index}', 'Rotate(-90, 200);');
				"
			/>
			<!-- Panel 2/3 Reveal -->
			<panel
				noclick="1"
				name="pod_stage_2_{index}_close"
				onevent0="
					Call('player_slot_panel2{index}', 'SlideX(\'-110.0@\', 200);');
					Call('player_slot_panel3_slide{index}', 'SlideX(\'-160@\', 200);');
					Call('player_slot_panel3extras_container{index}', 'SlideX(\'-160@\', 200);');
				"
			/>
			<!-- Panel 1 -->
			<panel
				noclick="1"
				name="pod_stage_1_{index}_close"
				onevent0="
					Call('player_slot_panel1{index}', 'SlideX(\'-50.0%\', 100);');
					Call('hero_name_container_left{index}', 'SetVisible(0);');
				"
			/>

			<!-- ========= PLAYER PICKER TRANSFORMATION TO PICKER ========= -->

			<!-- Panel 1 -->
			<panel
				noclick="1"
				name="pod_stage_1_{index}_picker"
				onevent0=""
			/>
			<!-- Panel 2/3 Reveal -->
			<panel
				noclick="1"
				name="pod_stage_2_{index}_picker"
				onevent0=""
			/>
			<!-- Rotate 3 Down -->
			<panel
				noclick="1"
				name="pod_stage_3_{index}_picker"
				onevent0=""
			/>
			<!-- Ready Button -->
			<panel
				noclick="1"
				name="pod_stage_4_{index}_picker"
				oneventX=""
			/>

			<!-- Doors -->
			<panel
				noclick="1"
				name="pod_stage_5_{index}_picker"
				onevent0="
					Call('player_slot_repick_buttons{index}', 'FadeIn(300);');
					Call('hero_name_container_left{index}', 'ScaleWidth(\'68%\', 200);');
				"
			/>

			<panel
				noclick="1"
				name="pod_stage_6_{index}_picker"
				onevent0=""
			/>

			<panel
				noclick="1"
				name="pod_stage_7_{index}_picker"
				onevent0=""
			/>
		</panel>
	</template>

	<!-- SD Hero list -->
	<template name="hero_icon_sd">
		<panel noclick="1" height="{height=100%}" width="{width=100%}" align="{align=left}" valign="{valign=left}" >
			<image
				color="white"
				watch0="ClearHeroSelectInfo" ontrigger0="SetWatch('');" watch7="HeroSelectInfo{gameMode}"
				ontrigger7lua="
					if (param2 == 'sd') then
						Game_Lobby.RegisterHeroIconSD(self, '{infotrigger=HeroSelectHeroList}', param13, {slot}, {offset})
					end
				"
				resourcecontext="lobby"
				onhidelua=""
			/>
		</panel>
	</template>

	<template name="hero_button_sd">
		<panel
			width="7.12h" height="7.12h"
			valign="center"
			noclick="true"
		>
			<button
				valign="center"
				color="invisible"
				watch0="ClearHeroSelectInfo" ontrigger0="SetWatch('');" watch7="HeroSelectInfo{gameMode}"
				ontrigger7="
					SetWatch('{infotrigger=HeroSelectHeroList}' # Round(((param13 - 1) * 15) + ({slot} * 3) + {offset}));
					SetEnabled(param14 == {slot});
				"
				ontrigger="
					If(param4,
						If(StringEquals(param29, 'SpawnHero') orStringEquals(param29, 'BanHero') or StringEquals(param29, 'VoteBanHero') or param43,
							Split(
								If(StringEquals(param29, 'SpawnHero'),
									If(!param36  and !param37,
										SetOnclick(param29 # '(\'' # param0 # '\'); cg_avatarHero = \'' # param0 # '\'; If(' # (!ui_lobby_localPlayerCaptain) # ' and (HeroSelectTimer ge 7000), CallEventParamsX(\'altav_full\', 0, 0)); PlaySound(\'/shared/sounds/ui/hero_select/button_select.wav\');'),
										SetOnclick(param29 # '(\'' # param0 # '\'); cg_avatarHero = \'' # param0 # '\'; PlaySound(\'/shared/sounds/ui/hero_select/button_select.wav\');')
									),
									SetOnclick(param29 # '(\'' # param0 # '\'); PlaySound(\'/shared/sounds/ui/hero_select/button_select.wav\');')
								),
								SetOnrightclick('
									PotentialHero(\''#param0#'\');
									cg_avatarHero = \'' # param0 # '\';
								')
							),
							Split(
								SetOnclick(''),
								SetOnrightclick('PotentialHero(\''#param0#'\');')
							)
						),
						Split(
							SetOnclick(''),
							SetOnrightclick('PotentialHero(\''#param0#'\');')
						)
					);
					If(!StringEmpty(param0), SetOnmouseover('ShowWidget(\'hero_info\'); GetHeroInfo(\'' # param0 # '\');'), SetOnMouseover(''));
				"
				onmouseout="HideWidget('hero_info');"
			>
				<widgetstate statename="up">

					<!-- Hero Icon (EAP) -->
					<panel width="100%" height="100%" noclick="1"
							watch0="ClearHeroSelectInfo" ontrigger0="SetWatch('');" watch7="HeroSelectInfo{gameMode}" ontrigger7="SetWatch('{infotrigger=HeroSelectHeroList}' # Round(((param13 - 1) * 15) + ({slot} * 3) + {offset}));"
							ontrigger="SetVisible(param34);"
					>
						<frame x="0" color="invisible" bordercolor="1 0.74 0 0.3" borderthickness="2" visible="1" clip="1" noclick="1" >
							<image texture="/ui/specui/shinegradient.png"  color="1 1 1 1" width="150%" height="150%" valign="center" align="center" visible="1" noclick="1"
								onshow="SetWatch('HostTime');" onhide="SetWatch('');"
								watch="" ontrigger="If(GetRotation() ge 360, SetRotation(0), SetRotation(GetRotation() + 1));"
							/>
							<instance name="hero_icon_sd" gameMode="{gameMode}"  slot="{slot}" offset="{offset}" width="-4" height="-4" valign="center" align="center" />
							<panel texture="/ui/specui/shinegradient.png" y="100%" rotation="0" vscale="2" vspeed="-1.4" color="1 1 1 0.1" width="100%" height="400%" valign="center" align="center" noclick="1" />
						</frame>
					</panel>

					<panel noclick="1" watch0="ClearHeroSelectInfo" ontrigger0="SetWatch('');" watch7="HeroSelectInfo{gameMode}" ontrigger7="SetWatch('{infotrigger=HeroSelectHeroList}' # Round(((param13 - 1) * 15) + ({slot} * 3) + {offset}));"
							ontrigger="SetVisible(!param34);"
					>
						<instance name="hero_icon_sd" gameMode="{gameMode}"  slot="{slot}" offset="{offset}"/>
						<image
							texture="/ui/elements/button_bevel_sml_up.tga"
							color="1 1 1 1"
							watch0="ClearHeroSelectInfo" ontrigger0="SetWatch('');" watch7="HeroSelectInfo{gameMode}"
							ontrigger7="SetWatch('{infotrigger=HeroSelectHeroList}' # Round(((param13 - 1) * 15) + ({slot} * 3) + {offset}));"
							ontrigger="
								If(param3,
									If(param2 != -2,
										SetTexture('/ui/elements/button_bevel_sml' # If(param35 and param2 gt 0, '_free', '') # '_up.tga'),
										SetTexture('/ui/elements/button_bevel_sml' # If(param35 and param2 gt 0, '_free', '') # '_down.tga')
									),
									If({team=-1} ge -1 and {team=-1} le 1,
										SetTexture('/ui/elements/button_bevel_sml' #If(param35 and param2 gt 0, '_free', '') # '_down.tga')
									)
								);
							"
							resourcecontext="lobby"
						/>
					</panel>

				</widgetstate>
				<widgetstate statename="over" align="center" valign="center" width="110%" height="110%"
					watch0="ClearHeroSelectInfo" ontrigger0="SetWatch('');" watch7="HeroSelectInfo{gameMode}"
					ontrigger7="SetWatch('{infotrigger=HeroSelectHeroList}' # Round(((param13 - 1) * 15) + ({slot} * 3) + {offset}));"
					ontrigger="
						If(param3 and param2 != -2,
							Split(
								SetWidth('110%'),
								SetHeight('110%')
							),
							Split(
								SetWidth('100%'),
								SetHeight('100%')
							)
						);
					"
				>
					<instance name="hero_icon_sd" gameMode="{gameMode}"  slot="{slot}" offset="{offset}"/>
					<image texture="/ui/elements/button_bevel_sml_over.tga"
						watch0="ClearHeroSelectInfo" ontrigger0="SetWatch('');" watch7="HeroSelectInfo{gameMode}"
						ontrigger7="SetWatch('{infotrigger=HeroSelectHeroList}' # Round(((param13 - 1) * 15) + ({slot} * 3) + {offset}));"
						ontrigger="
							If(param3 and param2 != -2,
								SetTexture('/ui/elements/button_bevel_sml_over.tga'),
								SetTexture('/ui/elements/button_bevel_sml_down.tga')
							);
						"
						resourcecontext="lobby"
					/>
				</widgetstate>
				<widgetstate statename="down" align="center" valign="center" width="90%" height="90%"
					watch0="ClearHeroSelectInfo" ontrigger0="SetWatch('');" watch7="HeroSelectInfo{gameMode}"
					ontrigger7="SetWatch('{infotrigger=HeroSelectHeroList}' # Round(((param13 - 1) * 15) + ({slot} * 3) + {offset}));"
					ontrigger="
						If(param3 and param2 != -2,
							Split(
								SetWidth('90%'),
								SetHeight('90%')
							),
							Split(
								SetWidth('100%'),
								SetHeight('100%')
							)
						);
					"
				>
					<instance name="hero_icon_sd" gameMode="{gameMode}"  slot="{slot}" offset="{offset}"/>
					<image texture="/ui/elements/button_bevel_sml_down.tga"/>
				</widgetstate>
				<widgetstate statename="disabled">
					<instance name="hero_icon_sd" gameMode="{gameMode}"  slot="{slot}" offset="{offset}"/>
					<image texture="/ui/elements/button_bevel_sml_disabled.tga"/>
				</widgetstate>
			</button>

			<!-- If Has Alt Avs -->
			<button
				x="5%" y="-5%" visible="0"
				height="32%" width="32@"
				valign="bottom" align="left"
				color="0 0 0 .8"
				onclick="PlaySound('/shared/sounds/ui/ccpanel/button_click_02.wav'); CallEventParamsX('altav_full', 0, 2);"
				onrightclick="PlaySound('/shared/sounds/ui/ccpanel/button_click_02.wav'); CallEventParamsX('altav_full', 0, 1);"
				watch0="ClearHeroSelectInfo" ontrigger0="SetWatch('');" watch7="HeroSelectInfo{gameMode}"
				onmouseover="PlaySound('/shared/sounds/ui/ccpanel/button_over_02.wav');"
				ontrigger7="SetWatch('{infotrigger=HeroSelectHeroList}' # Round(((param13 - 1) * 15) + ({slot} * 3) + {offset}));"
				ontriggerlua="self:SetVisible(AtoB(param31))"
				ontrigger="
					SetOnclick('PlaySound(\'/ui/fe2/store/sounds/popup.wav\'); CallEventParamsX(\'altav_full\', 0, 2); cg_avatarHero = \'' # param0 # '\';');
					SetOnrightclick('PlaySound(\'/ui/fe2/store/sounds/popup.wav\'); CallEventParamsX(\'altav_full\', 0, 1); cg_avatarHero = \'' # param0 # '\';');
				"
				watch2="GamePhaseExtended"
				ontrigger2="If(!{showlocks=true}, SetEnabled(param0 == 10));"
			>
				<widgetstate statename="up">
					<image texture="/ui/elements/button_bevel_sml_up.tga" color="1 1 1 1" noclick="true"/>
					<image width="74@" height="74%" align="center" valign="center" color=".8 .8 .8 1" texture="/ui/icons/users.tga" />
				</widgetstate>
				<widgetstate statename="over">
					<image texture="/ui/elements/button_bevel_sml_up.tga" color="red" noclick="true"/>
					<image width="74@" height="74%" align="center" valign="center" texture="/ui/icons/users.tga" />
				</widgetstate>
				<widgetstate statename="down">
					<image texture="/ui/elements/button_bevel_sml_up.tga" color="red" noclick="true"/>
					<image x="1" y="1" width="74@" height="74%" align="center" valign="center" texture="/ui/icons/users.tga" />
				</widgetstate>
			</button>

			<!-- Purchase / Token button -->
			<button
				x="-5%" y="-5%" visible="0"
				height="32%" width="32@"
				valign="bottom" align="right"
				color="0 0 0 .8"
				onclick="PlaySound('/shared/sounds/ui/ccpanel/button_click_02.wav');"
				watch0="ClearHeroSelectInfo" ontrigger0="SetWatch('');" watch7="HeroSelectInfo{gameMode}"
				onmouseover="PlaySound('/shared/sounds/ui/ccpanel/button_over_02.wav');"
				ontrigger7="SetWatch('{infotrigger=HeroSelectHeroList}' # Round(((param13 - 1) * 15) + ({slot} * 3) + {offset}));"
				ontriggerlua="self:SetVisible(AtoB(param36) or AtoB(param37))"
				ontrigger="
					SetOnclick('
						Trigger(\'GameLobbyHeroPurchase\',
							\''#param0#'\', ## hero entity ##
							'#param34#', ## is EAP ##
							'#param35#', ## is Free rotation ##
							'#param40#', ## Has gold price ##
							'#param41#', ## gold price ##
							'#(param38 gt 0)#', ## has silver price ##
							'#param38#', ## silver price ##
							'#(param42 and param37 and param4)#', ## has token price ##
							'#tokenCostPerGame#',  ## token price ##
							\''#param29#'\',  ## spawn mode ##
							'#param43#',  ## has pass ##
							2 ## is potential ##
						);
					');
				"
				watch2="GamePhaseExtended"
				ontrigger2="If(!{showlocks=true}, SetEnabled(param0 == 10));"
			>
				<widgetstate statename="up">
					<image texture="/ui/elements/button_bevel_sml_up.tga" color="1 1 1 1" noclick="true"/>
				</widgetstate>
				<widgetstate statename="over">
					<image texture="/ui/elements/button_bevel_sml_up.tga" color="red" noclick="true"/>
				</widgetstate>
				<widgetstate statename="down">
					<image texture="/ui/elements/button_bevel_sml_up.tga" color="red" noclick="true"/>
				</widgetstate>
				<image width="74@" height="74%" align="center" valign="center" color=".8 .8 .8 1" texture="/ui/icons/goldcoin.tga"
					ontriggerlua="
						if AtoB(param37) and AtoB(param42) and AtoB(param4) and (not AtoB(param35)) and (not AtoB(param43)) then
							self:SetTexture('/ui/fe2/store/icons/hero_token.tga')
						else
							self:SetTexture('/ui/icons/goldcoin.tga')
						end
					"
					watch0="ClearHeroSelectInfo" ontrigger0="SetWatch('');" watch7="HeroSelectInfo{gameMode}" ontrigger7="SetWatch('{infotrigger=HeroSelectHeroList}' # Round(((param13 - 1) * 15) + ({slot} * 3) + {offset}));"
				/>
			</button>
		</panel>
	</template>

	<template name="sd_hero_triad">
		<panel
			height="18%"
			color="black"
			sticky="true" stickytoinvis="false"
			watch0="ClearHeroSelectInfo" ontrigger0="SetWatch('');" watch7="HeroSelectInfo{gameMode}"
			ontrigger7="SetWatch('LobbyPlayerInfo' # Round(((param13 - 1) * 5) + {slot}));"
			ontrigger="SetVisible(param0 != -1);"
		>
			<panel width="102%" height="30%" color="white" align="center" valign="center"
				watch0="ClearHeroSelectInfo" ontrigger0="SetWatch('');" watch7="HeroSelectInfo{gameMode}"
				ontrigger7="SetWatch('LobbyPlayerInfo' # Round(((param13 - 1) * 5) + {slot}));"
				ontrigger="SetColor(param2);"
			/>
			<panel width="121%" height="140%" valign="center" align="center"
				ontrigger9lua="ResourceManager.RegisterTexture('/ui/fe2/lobby/sd_bar.tga', 'lobby', self)" resourcecontext="lobby" watch9="MainRegisterTextures"
			/>
			<panel float="right" padding="4.3h">
				<panel width="10%"/>
				<instance name="hero_button_sd" gameMode="{gameMode}"  slot="{slot}" offset="0"/>
				<instance name="hero_button_sd" gameMode="{gameMode}"  slot="{slot}" offset="1"/>
				<instance name="hero_button_sd" gameMode="{gameMode}"  slot="{slot}" offset="2"/>
			</panel>
		</panel>
	</template>

	<!-- Full hero list templates -->
	<template name="hero_icon_normal">
		<panel noclick="1" height="{height=100%}" width="{width=100%}" align="{align=left}" valign="{valign=left}" >
			<image
				watch0="ClearHeroSelectInfo" ontrigger0="SetWatch('');" watch7="HeroSelectInfo{gameMode}"
				ontrigger7lua="
					if (param2 ~= 'sd') then
						Game_Lobby.RegisterHeroIcon(self, '{infotrigger=HeroSelectHeroList}', {index}, {team}, {team_offset}, {group}, {group_size}, {row}, {row_size})
					end
				"
				onhidelua=""
				color="white"
				onload="
					If({showlocks=true},
					If({team} == -1, SetTexture('/ui/elements/hero_picker_icon.tga'),
					If({team} == 0, SetTexture('/ui/fe2/lobby/empty_hero_slot_legion.tga'),
					If({team} == 1, SetTexture('/ui/fe2/lobby/empty_hero_slot_hellbourne.tga')
					))));
				"
				resourcecontext="lobby"
				texture="$invis"
			/>
			<image
				texture="/ui/elements/kick_up.tga" visible="0"
				width="85%" height="85%"
				align="center" valign="center"
				watch0="ClearHeroSelectInfo" ontrigger0="SetWatch('');" watch7="HeroSelectInfo{gameMode}"
				ontrigger7="SetWatch('{infotrigger=HeroSelectHeroList}' # Round({index} + ({team} * {team_offset}) + ({group} * {group_size}) + ({row} * {row_size})));"
				ontriggerlua="self:SetVisible(AtoN(param2) == -1)"
			/>
			<image texture="/ui/elements/lock.tga" visible="0"
				width="90%" height="90%"
				color="1 1 1 1"
				align="center" valign="center"
				watch0="ClearHeroSelectInfo" ontrigger0="SetWatch('');" watch7="HeroSelectInfo{gameMode}"
				ontrigger7="SetWatch('{infotrigger=HeroSelectHeroList}' # Round({index} + ({team} * {team_offset}) + ({group} * {group_size}) + ({row} * {row_size})));"
				ontriggerlua="self:SetVisible(AtoN(param2) == -5 and {showlocks=true})"
			 />
		</panel>
	</template>

	<template name="hero_button_normal">
		<panel
			width="{width=100@}" height="{height=100%}" x="{x}" y="{y}"
			valign="{valign=center}" align="{align=left}"
			noclick="true"
			watch0="ClearHeroSelectInfo" ontrigger0="SetWatch('');" watch7="HeroSelectInfo{gameMode}"
			ontrigger7="SetWatch('{infotrigger=HeroSelectHeroList}' # Round({index} + ({team=0} * {team_offset=0}) + ({group=0} * {group_size=0}) + ({row=0} * {row_size=0})));"
			ontrigger="If(!{showlocks=true}, SetVisible(!StringEmpty(''#param0)));"
		>
			<button
				width="100@" height="100%"
				valign="center"
				color="invisible"
				watch0="ClearHeroSelectInfo" ontrigger0="SetWatch('');" watch7="HeroSelectInfo{gameMode}"
				ontrigger7="SetWatch('{infotrigger=HeroSelectHeroList}' # Round({index} + ({team=0} * {team_offset=0}) + ({group=0} * {group_size=0}) + ({row=0} * {row_size=0})));"
				ontriggerlua="
					local param0 = param0
					local param29 = param29
					local param34 = param34
					local param35 = param35
					local param40 = param40
					local param41 = param41
					local param38 = param38
					local param37 = param37
					local param42 = param42
					local param4 = param4
					local param43 = param43
					if(AtoB(param4)) and not ViewingStreaming() then
						if(param29 == 'SpawnHero' or param29 == 'BanHero' or param29 == 'VoteBanHero' or AtoB(param43) or tonumber(param2) == -5) then
							if(param29 == 'SpawnHero') then
								if(not AtoB(param36) and not AtoB(param37)) and not AtoB(param55) then
									self:SetCallback('onclick', function() self:UICmd( param29 .. '(\'' .. param0 .. '\');	cg_avatarHero = \'' .. param0 .. '\'; If(' .. tostring(not GetCvarBool('ui_lobby_localPlayerCaptain')) .. ' and (HeroSelectTimer ge 7000), CallEventParamsX(\'altav_full\', 0, 0)); PlaySound(\'/shared/sounds/ui/hero_select/button_select.wav\');') end)
								else
									self:SetCallback('onclick', function() self:UICmd( param29 .. '(\'' .. param0 .. '\'); cg_avatarHero = \'' .. param0 .. '\'; PlaySound(\'/shared/sounds/ui/hero_select/button_select.wav\');') end)
								end
							else
								self:SetCallback('onclick', function() self:UICmd( param29 .. '(\'' .. param0 .. '\'); PlaySound(\'/shared/sounds/ui/hero_select/button_select.wav\');') end)
							end
							self:SetCallback('onrightclick', function() self:UICmd( 'PotentialHero(\'' .. param0 .. '\'); cg_avatarHero = \'' .. param0 .. '\';') end)
						else
							self:SetCallback('onclick', function() self:UICmd( '') end)
							self:SetCallback('onrightclick', function() self:UICmd( 'PotentialHero(\'' .. param0 .. '\');') end)
						end
					else
						self:SetCallback('onclick', function() self:UICmd('') end)
						self:SetCallback('onrightclick', function() self:UICmd( 'PotentialHero(\''..param0..'\');') end)
					end

					if(param0 ~= '') then
						self:SetCallback('onmouseover', function() self:UICmd('ShowWidget(\'hero_info\'); GetHeroInfo(\'' .. param0 .. '\'); DoEvent(0);') end)
					else
						self:SetCallback('onmouseover', function() self:UICmd('') end)
					end

					if(not {showlocks=true}) then
						self:SetEnabled(GetCvarInt('ui_gamePhaseExtended') == 10 and AtoB(param4))
					end

					if(not AtoB(param35)) then
						self:SetCallback('onmouseout', function() self:UICmd('HideWidget(\'hero_info\'); DoEvent(1);') end)
					else
						self:SetCallback('onmouseout', function() self:UICmd('HideWidget(\'hero_info\'); DoEvent(2);') end)
					end

					if(Main_Walkthrough.pregameLobbyStep == 1) then
						if(param0 ~= 'Hero_Pyromancer') then
							self:SetCallback('onclick', function() self:UICmd( '' ) end)
							self:SetCallback('onrightclick', function() self:UICmd( '' ) end)
							self:SetCallback('onmouseover', function() self:UICmd( '' ) end)
							self:RefreshCallbacks()
						else
							self:RefreshCallbacks()
							local targetCallback = self:GetCallback('onclick')
							self:SetCallback('onclick',
								function()
									self:SetCallback('onclick',
										function()
											if (targetCallback) then targetCallback() end
										end)
									self:RefreshCallbacks()
									if (targetCallback) then targetCallback() end

									Game_Lobby.TellUserToReady()
								end
							)
							Main_Walkthrough.PointAtWidgetSleep(self, true, '', '3', 2000)
						end
					end
				"
				onmouseout="HideWidget('hero_info'); DoEvent(1);"
				onevent0="
					Call('lobby_hero_icon_border_{gameMode}_{index}_{team=-1}_{group=0}_{group_size=0}_{row=0}_{row_size=0}', '
						SetTexture(\'/ui/elements/button_bevel_sml_over.tga\');
					');
					Call('lobby_hero_icon_{gameMode}_{index}_{team=-1}_{group=0}_{group_size=0}_{row=0}_{row_size=0}', '
						SetWidth(\'110%\');
						SetHeight(\'110%\');
					');
				"
				onevent1="
					Call('lobby_hero_icon_border_{gameMode}_{index}_{team=-1}_{group=0}_{group_size=0}_{row=0}_{row_size=0}', '
						SetTexture(\'/ui/elements/button_bevel_sml_up.tga\');
					');
					Call('lobby_hero_icon_{gameMode}_{index}_{team=-1}_{group=0}_{group_size=0}_{row=0}_{row_size=0}', '
						SetWidth(\'100%\');
						SetHeight(\'100%\');
					');
				"
				onevent2="
					Call('lobby_hero_icon_border_{gameMode}_{index}_{team=-1}_{group=0}_{group_size=0}_{row=0}_{row_size=0}', '
						SetTexture(\'/ui/elements/button_bevel_sml_free_up.tga\');
					');
					Call('lobby_hero_icon_{gameMode}_{index}_{team=-1}_{group=0}_{group_size=0}_{row=0}_{row_size=0}', '
						SetWidth(\'100%\');
						SetHeight(\'100%\');
					');
				"
				onmouseldown="
					Call('lobby_hero_icon_border_{gameMode}_{index}_{team=-1}_{group=0}_{group_size=0}_{row=0}_{row_size=0}', '
						SetTexture(\'/ui/elements/button_bevel_sml_down.tga\');
					');
					Call('lobby_hero_icon_{gameMode}_{index}_{team=-1}_{group=0}_{group_size=0}_{row=0}_{row_size=0}', '
						SetWidth(\'90%\');
						SetHeight(\'90%\');
					');
				"
				onmouselup="
					Call('lobby_hero_icon_border_{gameMode}_{index}_{team=-1}_{group=0}_{group_size=0}_{row=0}_{row_size=0}', '
						SetTexture(\'/ui/elements/button_bevel_sml_up.tga\');
					');
					Call('lobby_hero_icon_{gameMode}_{index}_{team=-1}_{group=0}_{group_size=0}_{row=0}_{row_size=0}', '
						SetWidth(\'100%\');
						SetHeight(\'100%\');
					');
				"
			>
				<!-- Hero Icon -->
				<panel name="lobby_hero_icon_{gameMode}_{index}_{team=-1}_{group=0}_{group_size=0}_{row=0}_{row_size=0}" width="100%" height="100%" noclick="1" visible="1" align="center" valign="center" >
					<frame x="0" color="invisible" bordercolor="1 0.74 0 0.3" borderthickness="2" visible="1" clip="1" noclick="1" >
						<image texture="/ui/specui/shinegradient.png"  color="1 1 1 1" width="150%" height="150%" valign="center" align="center" visible="0" noclick="1"
							onshow="SetWatch(5, 'HostTime');" onhide="SetWatch(5, '');"
							watch="" watch5="" ontrigger5="If(GetRotation() ge 360, SetRotation(0), SetRotation(GetRotation() + 1));"
							watch0="ClearHeroSelectInfo" ontrigger0="SetWatch('');" watch7="HeroSelectInfo{gameMode}"
							ontrigger7="SetWatch('{infotrigger=HeroSelectHeroList}' # Round({index} + ({team=-1} * {team_offset=0}) + ({group=0} * {group_size=0}) + ({row=0} * {row_size=0})));"
							ontriggerlua="self:SetVisible(AtoB(param34))"
						/>
						<instance
							name="hero_icon_normal" gameMode="{gameMode}"
							team="{team=-1}"
							team_offset="{team_offset=0}"
							group="{group=0}"
							group_size="{group_size=0}"
							row="{row=0}"
							row_size="{row_size=0}"
							index="{index}"
							valign="center" align="center" width="-4" height="-4"
							infotrigger="{infotrigger=HeroSelectHeroList}"
							showlocks="{showlocks=true}"
						/>

						<panel texture="/ui/specui/shinegradient.png" y="100%" rotation="0" visible="0" vscale="2" vspeed="-1.4" color="1 1 1 0.1" width="100%" height="400%" valign="center" align="center" noclick="1"
							watch0="ClearHeroSelectInfo" ontrigger0="SetWatch('');" watch7="HeroSelectInfo{gameMode}"
							ontrigger7="SetWatch('{infotrigger=HeroSelectHeroList}' # Round({index} + ({team=-1} * {team_offset=0}) + ({group=0} * {group_size=0}) + ({row=0} * {row_size=0})));"
							ontriggerlua="self:SetVisible(AtoB(param34))"
						/>
						<image name="lobby_hero_icon_border_{gameMode}_{index}_{team=-1}_{group=0}_{group_size=0}_{row=0}_{row_size=0}"
							texture="/ui/elements/button_bevel_sml_up.tga"
							color="1 1 1 1"
							watch0="ClearHeroSelectInfo" ontrigger0="SetWatch('');" watch7="HeroSelectInfo{gameMode}"
							ontrigger7="SetWatch('{infotrigger=HeroSelectHeroList}' # Round({index} + ({team=-1} * {team_offset=0}) + ({group=0} * {group_size=0}) + ({row=0} * {row_size=0})));"
							ontriggerlua="self:SetVisible(not AtoB(param34))"
							ontrigger="
								If(param3,
									If(param2 != -2,
										SetTexture('/ui/elements/button_bevel_sml' # If(param35 and param2 gt 0, '_free', '') # '_up.tga'),
										SetTexture('/ui/elements/button_bevel_sml' # If(param35 and param2 gt 0, '_free', '') # '_down.tga')
									),
									If({team=-1} ge -1 and {team=-1} le 1,
										SetTexture('/ui/elements/button_bevel_sml' #If(param35 and param2 gt 0, '_free', '') # '_down.tga')
									)
								);
							"
							resourcecontext="lobby"
						/>
					</frame>
				</panel>

			</button>

			<!-- If Has Alt Avs -->
			<button
				x="6%" y="-6%" visible="0"
				height="30%" width="30@"
				valign="bottom" align="left"
				color="0 0 0 .8"
				onclick="PlaySound('/shared/sounds/ui/ccpanel/button_click_02.wav'); CallEventParamsX(\'altav_full\', 0, 2);"
				onrightclick="PlaySound('/shared/sounds/ui/ccpanel/button_click_02.wav'); CallEventParamsX(\'altav_full\', 0, 1);"
				watch0="ClearHeroSelectInfo" ontrigger0="SetWatch('');" watch7="HeroSelectInfo{gameMode}"
				onmouseover="PlaySound('/shared/sounds/ui/ccpanel/button_over_02.wav');"
				ontrigger7="SetWatch('{infotrigger=HeroSelectHeroList}' # Round({index} + ({team=0} * {team_offset=0}) + ({group=0} * {group_size=0}) + ({row=0} * {row_size=0})));"
				ontriggerlua=
				"
					if(Main_Walkthrough.pregameLobbyStep ~= 2) then
						self:SetVisible(AtoB(param31))
					end
				"
				ontrigger="
					SetOnclick('PlaySound(\'/ui/fe2/store/sounds/popup.wav\'); CallEventParamsX(\'altav_full\', 0, 2); cg_avatarHero = \'' # param0 # '\';');
					SetOnrightclick('PlaySound(\'/ui/fe2/store/sounds/popup.wav\'); CallEventParamsX(\'altav_full\', 0, 1); cg_avatarHero = \'' # param0 # '\';');
				"
				watch2="GamePhaseExtended"

				ontrigger2lua=" if (AtoB('{showlocks}')) then
									self:SetEnabled(true)
								else
									self:SetEnabled(param0 ~= 10 and not ViewingReplay())
								end"
			>
				<widgetstate statename="up">
					<image texture="/ui/elements/button_bevel_sml_up.tga" color="1 1 1 1" noclick="true"/>
					<image width="74@" height="74%" align="center" valign="center" color=".8 .8 .8 1" texture="/ui/icons/users.tga" />
				</widgetstate>
				<widgetstate statename="over">
					<image texture="/ui/elements/button_bevel_sml_up.tga" color="red" noclick="true"/>
					<image width="74@" height="74%" align="center" valign="center" texture="/ui/icons/users.tga" />
				</widgetstate>
				<widgetstate statename="down">
					<image texture="/ui/elements/button_bevel_sml_up.tga" color="red" noclick="true"/>
					<image x="1" y="1" width="74@" height="74%" align="center" valign="center" texture="/ui/icons/users.tga" />
				</widgetstate>
			</button>

			<!-- Purchase / Token button -->
			<button
				x="-6%" y="-6%" visible="0"
				height="30%" width="30@"
				valign="bottom" align="right"
				color="0 0 0 .8"
				onclick="PlaySound('/shared/sounds/ui/ccpanel/button_click_02.wav');"
				watch0="ClearHeroSelectInfo" ontrigger0="SetWatch('');" watch7="HeroSelectInfo{gameMode}"
				onmouseover="PlaySound('/shared/sounds/ui/ccpanel/button_over_02.wav');"
				ontrigger7="SetWatch('{infotrigger=HeroSelectHeroList}' # Round({index} + ({team=0} * {team_offset=0}) + ({group=0} * {group_size=0}) + ({row=0} * {row_size=0})));"
				ontriggerlua="self:SetVisible(AtoB(param36) or AtoB(param37))"
				ontrigger="
					SetOnclick('
						Trigger(\'GameLobbyHeroPurchase\',
							\''#param0#'\', ## hero entity ##
							'#param34#', ## is EAP ##
							'#param35#', ## is Free rotation ##
							'#param40#', ## Has gold price ##
							'#param41#', ## gold price ##
							'#(param38 gt 0)#', ## has silver price ##
							'#param38#', ## silver price ##
							'#(param42 and param37 and param4)#', ## has token price ##
							'#tokenCostPerGame#',  ## token price ##
							\''#param29#'\',  ## spawn mode ##
							'#param43#',  ## has pass ##
							2 ## is potential ##
						);
					');
				"
				watch2="GamePhaseExtended"
				ontrigger2lua=" if (AtoB('{showlocks}')) then
									self:SetEnabled(true)
								else
									self:SetEnabled(param0 ~= 10 and not ViewingReplay())
								end"
			>
				<widgetstate statename="up">
					<image texture="/ui/elements/button_bevel_sml_up.tga" color="1 1 1 1" noclick="true"/>
				</widgetstate>
				<widgetstate statename="over">
					<image texture="/ui/elements/button_bevel_sml_up.tga" color="red" noclick="true"/>
				</widgetstate>
				<widgetstate statename="down">
					<image texture="/ui/elements/button_bevel_sml_up.tga" color="red" noclick="true"/>
				</widgetstate>
				<image width="74@" height="74%" align="center" valign="center" color=".8 .8 .8 1" texture="/ui/icons/goldcoin.tga"
					ontriggerlua="
						if AtoB(param37) and AtoB(param42) and AtoB(param4) and (not AtoB(param35)) and (not AtoB(param43)) then
							self:SetTexture('/ui/fe2/store/icons/hero_token.tga')
						else
							self:SetTexture('/ui/icons/goldcoin.tga')
						end
					"
					watch0="ClearHeroSelectInfo" ontrigger0="SetWatch('');" watch7="HeroSelectInfo{gameMode}" ontrigger7="SetWatch('{infotrigger=HeroSelectHeroList}' # Round({index} + ({team=0} * {team_offset=0}) + ({group=0} * {group_size=0}) + ({row=0} * {row_size=0})));"
				/>
			</button>

			<!-- filter cover -->
			<panel noclick="1" color="0 0 0 0.65" visible="0"
				watch0="ClearHeroSelectInfo" ontrigger0="SetWatch('');" watch7="HeroSelectInfo{gameMode}"
				ontrigger7="SetWatch('{infotrigger=HeroSelectHeroList}' # Round({index} + ({team=0} * {team_offset=0}) + ({group=0} * {group_size=0}) + ({row=0} * {row_size=0})));"
				ontriggerlua="Game_Lobby:RegisterHeroForFilter(self, param0, param44, param45, param46, param47, param48, param49, param50, param51, param52)"
			/>
		</panel>
	</template>

	<template name="hero_icon_sm">
		<panel height="{height=-4}" width="{width=-4}" align="{align=center}" valign="{valign=center}" noclick="1">
			<image
				width="-2" height="-2"
				align="center" valign="center"
				oninstantiate="SetWatch('SoloHeroCandidate' # Round({index} + (({team=1} - 1) * 3)));"
				ontriggerlua="
					if AtoB(param5) then
						self:SetTexture('/ui/fe2/lobby/mystery.tga')
					else
						self:SetTexture(NotEmpty(param0) and param1 or '/ui/elements/hero_picker_icon.tga')
					end
					self:SetRenderMode(AtoB(param2) and 'normal' or 'grayscale')
				"
				texture="/ui/elements/hero_picker_icon.tga"
			/>
			<image
				texture="/ui/elements/kick_up.tga" visible="0"
				width="85%" height="85%"
				align="center" valign="center"
				oninstantiate="SetWatch('SoloHeroCandidate' # Round({index} + (({team=1} - 1) * 3)));"
				ontriggerlua="self:SetVisible(AtoB(param3))"
			/>
		</panel>
	</template>

	<template name="hero_button_sm_candidate">
		<panel
			x="{x}" y="{y}"
			width="{width=100@}" height="{height=100%}"
			align="{align=left}" valign="{valign=center}"
			noclick="1"
		>
			<button
				width="100@" height="100%"
				valign="center"
				color="invisible"
				oninstantiate="SetWatch('SoloHeroCandidate' # Round({index} + (({team=1} - 1) * 3)));"
				ontriggerlua=
				"
					local param0 = param0
					local param1 = param1
					local param2 = AtoB(param2)
					local param3 = AtoB(param3)
					local param4 = param4

					if param2 and not View then
						self:SetEnabled(true)
						self:SetCallback('onclick', function() self:UICmd( param4 .. '(\'' .. param0 .. '\'); PlaySound(\'/shared/sounds/ui/hero_select/button_select.wav\');') end)
					else
						self:SetEnabled(false)
					end
				"
				ontrigger="If(!StringEmpty(param0), SetOnmouseover('ShowWidget(\'hero_info\'); GetHeroInfo(\'' # param0 # '\');'), SetOnMouseover(''));"
				onmouseout="HideWidget('hero_info');"
			>
				<widgetstate statename="up">
					<image texture="/ui/elements/button_bevel_sml_up.tga"/>
				</widgetstate>
				<widgetstate statename="over">
					<image texture="/ui/elements/button_bevel_sml_over.tga"/>
				</widgetstate>
				<widgetstate statename="down" x="1" y="1">
					<image texture="/ui/elements/button_bevel_sml_down.tga"/>
				</widgetstate>
				<widgetstate statename="disabled">
					<image texture="/ui/elements/button_bevel_sml_disabled.tga"/>
				</widgetstate>
				<instance name="hero_icon_sm" gameMode="{gameMode}" team="{team=0}" index="{index}"/>
			</button>
		</panel>
	</template>

	<template name="hero_full_list_group_row">
		<panel float="right" padding="0" height="{row_height}" noclick="true">
			<instance name="hero_button_normal" gameMode="{gameMode}" team="{team}" team_offset="{team_offset}" group="{group}" group_size="{group_size}" row="{row}" row_size="{row_size}" index="0" />
			<instance name="hero_button_normal" gameMode="{gameMode}" team="{team}" team_offset="{team_offset}" group="{group}" group_size="{group_size}" row="{row}" row_size="{row_size}" index="1"/>
			<instance name="hero_button_normal" gameMode="{gameMode}" team="{team}" team_offset="{team_offset}" group="{group}" group_size="{group_size}" row="{row}" row_size="{row_size}" index="2"/>
			<instance name="hero_button_normal" gameMode="{gameMode}" team="{team}" team_offset="{team_offset}" group="{group}" group_size="{group_size}" row="{row}" row_size="{row_size}" index="3"/>
			<instance name="hero_button_normal" gameMode="{gameMode}" team="{team}" team_offset="{team_offset}" group="{group}" group_size="{group_size}" row="{row}" row_size="{row_size}" index="4"/>
			<instance name="hero_button_normal" gameMode="{gameMode}" team="{team}" team_offset="{team_offset}" group="{group}" group_size="{group_size}" row="{row}" row_size="{row_size}" index="5"/>
			<instance name="hero_button_normal" gameMode="{gameMode}" team="{team}" team_offset="{team_offset}" group="{group}" group_size="{group_size}" row="{row}" row_size="{row_size}" index="6"/>
			<instance name="hero_button_normal" gameMode="{gameMode}" team="{team}" team_offset="{team_offset}" group="{group}" group_size="{group_size}" row="{row}" row_size="{row_size}" index="7"/>
		</panel>
	</template>

	<template name="hero_full_list_group_row_v2">
		<panel float="right" padding="0" height="{row_height}" noclick="true">
			<instance name="hero_button_normal" gameMode="{gameMode}" team="{team}" team_offset="{team_offset}" group="{group}" group_size="{group_size}" row="{row}" row_size="{row_size}" index="0" />
			<instance name="hero_button_normal" gameMode="{gameMode}" team="{team}" team_offset="{team_offset}" group="{group}" group_size="{group_size}" row="{row}" row_size="{row_size}" index="1"/>
			<instance name="hero_button_normal" gameMode="{gameMode}" team="{team}" team_offset="{team_offset}" group="{group}" group_size="{group_size}" row="{row}" row_size="{row_size}" index="2"/>
			<instance name="hero_button_normal" gameMode="{gameMode}" team="{team}" team_offset="{team_offset}" group="{group}" group_size="{group_size}" row="{row}" row_size="{row_size}" index="3"/>
			<instance name="hero_button_normal" gameMode="{gameMode}" team="{team}" team_offset="{team_offset}" group="{group}" group_size="{group_size}" row="{row}" row_size="{row_size}" index="4"/>
			<instance name="hero_button_normal" gameMode="{gameMode}" team="{team}" team_offset="{team_offset}" group="{group}" group_size="{group_size}" row="{row}" row_size="{row_size}" index="5"/>
			<instance name="hero_button_normal" gameMode="{gameMode}" team="{team}" team_offset="{team_offset}" group="{group}" group_size="{group_size}" row="{row}" row_size="{row_size}" index="6"/>
			<instance name="hero_button_normal" gameMode="{gameMode}" team="{team}" team_offset="{team_offset}" group="{group}" group_size="{group_size}" row="{row}" row_size="{row_size}" index="7"/>
			<instance name="hero_button_normal" gameMode="{gameMode}" team="{team}" team_offset="{team_offset}" group="{group}" group_size="{group_size}" row="{row}" row_size="{row_size}" index="8"/>
		</panel>
	</template>

	<template name="hero_gated_list_group_row">
		<panel float="right" padding="0" height="{row_height}" noclick="true">
			<instance name="hero_button_normal" gameMode="{gameMode}" team="{team}" team_offset="{team_offset}" group="{group}" group_size="{group_size}" row="{row}" row_size="{row_size}" index="0" />
			<instance name="hero_button_normal" gameMode="{gameMode}" team="{team}" team_offset="{team_offset}" group="{group}" group_size="{group_size}" row="{row}" row_size="{row_size}" index="1"/>
			<instance name="hero_button_normal" gameMode="{gameMode}" team="{team}" team_offset="{team_offset}" group="{group}" group_size="{group_size}" row="{row}" row_size="{row_size}" index="2"/>
			<instance name="hero_button_normal" gameMode="{gameMode}" team="{team}" team_offset="{team_offset}" group="{group}" group_size="{group_size}" row="{row}" row_size="{row_size}" index="3"/>
			<instance name="hero_button_normal" gameMode="{gameMode}" team="{team}" team_offset="{team_offset}" group="{group}" group_size="{group_size}" row="{row}" row_size="{row_size}" index="4"/>
			<instance name="hero_button_normal" gameMode="{gameMode}" team="{team}" team_offset="{team_offset}" group="{group}" group_size="{group_size}" row="{row}" row_size="{row_size}" index="5"/>
			<instance name="hero_button_normal" gameMode="{gameMode}" team="{team}" team_offset="{team_offset}" group="{group}" group_size="{group_size}" row="{row}" row_size="{row_size}" index="6"/>
			<instance name="hero_button_normal" gameMode="{gameMode}" team="{team}" team_offset="{team_offset}" group="{group}" group_size="{group_size}" row="{row}" row_size="{row_size}" index="7"/>
			<instance name="hero_button_normal" gameMode="{gameMode}" team="{team}" team_offset="{team_offset}" group="{group}" group_size="{group_size}" row="{row}" row_size="{row_size}" index="8"/>
		</panel>
	</template>

	<template name="hero_full_list_group">
		<instance name="hero_full_list_group_row" gameMode="{gameMode}"  team="{team}" team_offset="{team_offset}" group="{group}" group_size="{group_size}" row="0" row_size="{row_size}" row_height="{row_height=3.7h}" />
		<instance name="hero_full_list_group_row" gameMode="{gameMode}"  team="{team}" team_offset="{team_offset}" group="{group}" group_size="{group_size}" row="1" row_size="{row_size}" row_height="{row_height=3.7h}" />
		<instance name="hero_full_list_group_row" gameMode="{gameMode}"  team="{team}" team_offset="{team_offset}" group="{group}" group_size="{group_size}" row="2" row_size="{row_size}" row_height="{row_height=3.7h}" />
	</template>

	<template name="hero_full_list_group_v2">
		<instance name="hero_full_list_group_row_v2" gameMode="{gameMode}"  team="{team}" team_offset="{team_offset}" group="{group}" group_size="{group_size}" row="0" row_size="{row_size}" row_height="{row_height=3.35h}" />
		<instance name="hero_full_list_group_row_v2" gameMode="{gameMode}"  team="{team}" team_offset="{team_offset}" group="{group}" group_size="{group_size}" row="1" row_size="{row_size}" row_height="{row_height=3.35h}" />
		<instance name="hero_full_list_group_row_v2" gameMode="{gameMode}"  team="{team}" team_offset="{team_offset}" group="{group}" group_size="{group_size}" row="2" row_size="{row_size}" row_height="{row_height=3.35h}" />
	</template>

	<template name="hero_gated_list_group">
		<instance name="hero_full_list_group_row_v2" gameMode="{gameMode}"  team="{team}" team_offset="{team_offset}" group="{group}" group_size="{group_size}" row="0" row_size="{row_size}" row_height="{row_height=3.35h}" />
		<instance name="hero_full_list_group_row_v2" gameMode="{gameMode}"  team="{team}" team_offset="{team_offset}" group="{group}" group_size="{group_size}" row="1" row_size="{row_size}" row_height="{row_height=3.35h}" />
		<instance name="hero_full_list_group_row_v2" gameMode="{gameMode}"  team="{team}" team_offset="{team_offset}" group="{group}" group_size="{group_size}" row="2" row_size="{row_size}" row_height="{row_height=3.35h}" />
	</template>

	<style name="hero_full_list_full_header" width="100%" height="3.85h" noclick="1"/>
	<style name="hero_full_list_full_header_label" fitxpadding="2" textvalign="bottom" font="dyn_12" color=".7 .8 .7 1" shadow="1" noclick="1"/>

	<template name="hero_full_list">
		<panel y="1.2h" x="{x}" width="47.6%" float="bottom" padding="0" noclick="true">
			<panel height="0.5h"/>
			<panel style="hero_full_list_full_header">
				<panel align="{textalign}" noclick="1">
					<image texture="/ui/info/grad_vert.tga" vflip="true" color="#0a602366" hflip="{hflip=0}" noclick="1"/>
					<label x="{labelx=0.0h}" align="{textalign}" fitx="1" y="-0.25h" style="hero_full_list_full_header_label" content="general_hero_agi"/>
					<label x="{otherlabelx=0.0h}" align="{othertextalign}" fitx="1" y="-0.25h" fitxpadding="2" textvalign="bottom" font="dyn_12" color=".7 .8 .7 1" content="{teamlabel}" shadow="1" noclick="1"/>
				</panel>
			</panel>
			<instance name="hero_full_list_group" gameMode="{gameMode}"  team="{team}" team_offset="{team_offset}" group="0" group_size="{group_size}" row_size="{row_size}"/>
			<panel height="0.75h" noclick="true"/>

			<panel style="hero_full_list_full_header">
				<panel align="{textalign}" noclick="1">
					<image texture="/ui/info/grad_vert.tga" vflip="true" color="#0941a766" hflip="{hflip=0}" noclick="1"/>
					<label x="{labelx=0.0h}" align="{textalign}" fitx="1" y="-0.25h" style="hero_full_list_full_header_label" content="general_hero_int"/>
				</panel>
			</panel>
			<instance name="hero_full_list_group" gameMode="{gameMode}"  team="{team}" team_offset="{team_offset}" group="1" group_size="{group_size}" row_size="{row_size}"/>
			<panel height="0.75h" noclick="true"/>

			<panel style="hero_full_list_full_header">
				<panel align="{textalign}" noclick="1">
					<image texture="/ui/info/grad_vert.tga" vflip="true" color="#8a010166" hflip="{hflip=0}" noclick="1"/>
					<label x="{labelx=0.0h}" align="{textalign}" fitx="1" y="-0.25h" style="hero_full_list_full_header_label" content="general_hero_str"/>
				</panel>
			</panel>
			<instance name="hero_full_list_group" gameMode="{gameMode}"  team="{team}" team_offset="{team_offset}" group="2" group_size="{group_size}" row_size="{row_size}"/>
		</panel>
	</template>

	<style name="hero_full_list_compact_header" width="100%" height="2.4h" noclick="1"/>
	<style name="hero_full_list_compact_header_label" fitxpadding="2" textvalign="bottom" font="dyn_12" color=".7 .8 .7 1" shadow="1" noclick="1"/>

	<!-- compact, used with AP for filters -->
	<template name="hero_full_list_compact">
		<panel y="5.9h" x="{x}" width="47.6%" float="bottom" padding="0" noclick="true">
			<panel height="0.5h"/>
			<panel style="hero_full_list_compact_header">
				<panel align="{textalign}" noclick="1">
					<image texture="/ui/info/grad_vert.tga" vflip="true" color="#0a602366" hflip="{hflip=0}" noclick="1"/>
					<label x="{labelx=0.0h}" align="{textalign}" fitx="1" y="-0.25h" style="hero_full_list_compact_header_label" content="enstasts_label_hero_info_agi"/>
					<label x="{otherlabelx=0.0h}" align="{othertextalign}" fitx="1" y="-0.25h" fitxpadding="2" textvalign="bottom" font="dyn_12" color=".7 .8 .7 1" content="{teamlabel}" shadow="1" noclick="1"/>
				</panel>
			</panel>
			<instance name="hero_full_list_group" gameMode="{gameMode}"  team="{team}" team_offset="{team_offset}" group="0" group_size="{group_size}" row_size="{row_size}"/>
			<panel height="0.75h" noclick="true"/>

			<panel style="hero_full_list_compact_header">
				<panel align="{textalign}" noclick="1">
					<image texture="/ui/info/grad_vert.tga" vflip="true" color="#0941a766" hflip="{hflip=0}" noclick="1"/>
					<label x="{labelx=0.0h}" align="{textalign}" fitx="1" y="-0.25h" style="hero_full_list_compact_header_label" content="endstats_label_hero_info_int"/>
				</panel>
			</panel>
			<instance name="hero_full_list_group" gameMode="{gameMode}"  team="{team}" team_offset="{team_offset}" group="1" group_size="{group_size}" row_size="{row_size}"/>
			<panel height="0.75h" noclick="true"/>

			<panel style="hero_full_list_compact_header">
				<panel align="{textalign}" noclick="1">
					<image texture="/ui/info/grad_vert.tga" vflip="true" color="#8a010166" hflip="{hflip=0}" noclick="1"/>
					<label x="{labelx=0.0h}" align="{textalign}" fitx="1" y="-0.25h" style="hero_full_list_compact_header_label" content="endstats_label_hero_info_str"/>
				</panel>
			</panel>
			<instance name="hero_full_list_group" gameMode="{gameMode}"  team="{team}" team_offset="{team_offset}" group="2" group_size="{group_size}" row_size="{row_size}"/>
		</panel>
	</template>

	<style name="hero_full_list_compact_v2_header" width="100%" height="3.85h" noclick="true"/>

	<!-- compact v2 with more, used with AP for filters -->
	<template name="hero_full_list_compact_v2">
		<panel y="5.9h" x="{x}" width="47.6%" float="bottom" padding="0" noclick="true">
			<panel height="0.5h" noclick="true"/>

			<panel style="hero_full_list_compact_v2_header">
				<panel align="{textalign}" noclick="1">
					<image texture="/ui/info/grad_vert.tga" vflip="true" color="#0a602366" hflip="{hflip=0}" noclick="1"/>
					<label x="{labelx=0.0h}" align="{textalign}" fitx="1" y="1h" fitxpadding="2" textvalign="center" font="dyn_12" color=".7 .8 .7 1" content="enstasts_label_hero_info_agi" shadow="1" noclick="1"/>
					<label x="{otherlabelx=0.0h}" align="{othertextalign}" fitx="1" y="1h" fitxpadding="2" textvalign="center" font="dyn_12" color=".7 .8 .7 1" content="{teamlabel}" shadow="1" noclick="1"/>
				</panel>
			</panel>
			<instance name="hero_full_list_group_v2" gameMode="{gameMode}"  team="{team}" team_offset="{team_offset}" group="0" group_size="{group_size}" row_size="{row_size}"/>

			<panel height="0.25h" noclick="true"/>

			<panel style="hero_full_list_compact_v2_header">
				<panel align="{textalign}" noclick="1">
					<image texture="/ui/info/grad_vert.tga" vflip="true" color="#0941a766" hflip="{hflip=0}" noclick="1"/>
					<label x="{labelx=0.0h}" align="{textalign}" fitx="1" y="1h" fitxpadding="2" textvalign="center" font="dyn_12" color=".7 .7 .8 1" content="endstats_label_hero_info_int" shadow="1" noclick="1"/>
				</panel>
			</panel>
			<instance name="hero_full_list_group_v2" gameMode="{gameMode}"  team="{team}" team_offset="{team_offset}" group="1" group_size="{group_size}" row_size="{row_size}"/>

			<panel height="0.25h" noclick="true"/>

			<panel style="hero_full_list_compact_v2_header">
				<panel align="{textalign}" noclick="1">
					<image texture="/ui/info/grad_vert.tga" vflip="true" color="#8a010166" hflip="{hflip=0}" noclick="1"/>
					<label x="{labelx=0.0h}" align="{textalign}" fitx="1" y="1h" fitxpadding="2" textvalign="center" font="dyn_12" color=".8 .7 .7 1" content="endstats_label_hero_info_str" shadow="1" noclick="1"/>
				</panel>
			</panel>
			<instance name="hero_full_list_group_v2" gameMode="{gameMode}"  team="{team}" team_offset="{team_offset}" group="2" group_size="{group_size}" row_size="{row_size}"/>
		</panel>
	</template>

	<style name="hero_full_list_micro_header" width="100%" height="1.4h" noclick="1"/>

	<template name="hero_full_list_micro">
		<panel y="7.7h" x="{x}" width="48.6%" float="bottom" padding="0" noclick="true">
			<panel height="0.5h"/>
			<panel style="hero_full_list_micro_header">
				<panel width="-0.4h" color="#04cc3c" noclick="true" height="0.4h" valign="bottom"  />
			</panel>
			<instance name="hero_full_list_group" gameMode="{gameMode}"  team="{team}" team_offset="{team_offset}" group="0" group_size="{group_size}" row_size="{row_size}"/>
			<panel height="1.2h" noclick="true"/>

			<panel style="hero_full_list_micro_header">
				<panel width="-0.4h" color="#2972f5" noclick="true" height="0.4h" valign="bottom" />
			</panel>
			<instance name="hero_full_list_group" gameMode="{gameMode}"  team="{team}" team_offset="{team_offset}" group="1" group_size="{group_size}" row_size="{row_size}"/>
			<panel height="1.2h" noclick="true"/>

			<panel style="hero_full_list_micro_header">
				<panel width="-0.4h" color="#ea0404" noclick="true" height="0.4h" valign="bottom"  />
			</panel>
			<instance name="hero_full_list_group" gameMode="{gameMode}"  team="{team}" team_offset="{team_offset}" group="2" group_size="{group_size}" row_size="{row_size}"/>
		</panel>
	</template>

	<template name="hero_gated_list">
		<panel y="0" x="{x}" width="36%" align="{align}" float="bottom" padding="0" noclick="true">
			<label width="100%" height="2.2h" textalign="{textalign}" textvalign="center" font="dyn_11" color="#04cc3c" content="general_hero_agi" />
			<instance name="hero_gated_list_group" gameMode="{gameMode}"  team="{team}" team_offset="{team_offset}" group="0" group_size="{group_size}" row_size="{row_size}"/>
			<panel width="" height="0.4h" noclick="true" />
			<label width="100%" height="2.2h" textalign="{textalign}" textvalign="center" font="dyn_11" color="#2972f5" content="general_hero_int" />
			<instance name="hero_gated_list_group" gameMode="{gameMode}"  team="{team}" team_offset="{team_offset}" group="1" group_size="{group_size}" row_size="{row_size}"/>
			<panel width="" height="0.4h" noclick="true" />
			<label width="100%" height="2.2h" textalign="{textalign}" textvalign="center" font="dyn_11" color="#ea0404" content="general_hero_str" />
			<instance name="hero_gated_list_group" gameMode="{gameMode}"  team="{team}" team_offset="{team_offset}" group="2" group_size="{group_size}" row_size="{row_size}"/>
		</panel>
	</template>

	<template name="hero_half_list_group_row">
		<panel width="92%" height="7.0h" align="center" float="right" padding="0.4h" noclick="true">
			<instance name="hero_button_normal" gameMode="{gameMode}" group="{group}" group_size="{group_size}" row="{row}" row_size="{row_size}" index="0" />
			<instance name="hero_button_normal" gameMode="{gameMode}" group="{group}" group_size="{group_size}" row="{row}" row_size="{row_size}" index="1"/>
			<instance name="hero_button_normal" gameMode="{gameMode}" group="{group}" group_size="{group_size}" row="{row}" row_size="{row_size}" index="2"/>
			<instance name="hero_button_normal" gameMode="{gameMode}" group="{group}" group_size="{group_size}" row="{row}" row_size="{row_size}" index="3"/>
			<instance name="hero_button_normal" gameMode="{gameMode}" group="{group}" group_size="{group_size}" row="{row}" row_size="{row_size}" index="4"/>
			<instance name="hero_button_normal" gameMode="{gameMode}" group="{group}" group_size="{group_size}" row="{row}" row_size="{row_size}" index="5"/>
			<instance name="hero_button_normal" gameMode="{gameMode}" group="{group}" group_size="{group_size}" row="{row}" row_size="{row_size}" index="6"/>
			<instance name="hero_button_normal" gameMode="{gameMode}" group="{group}" group_size="{group_size}" row="{row}" row_size="{row_size}" index="7"/>
		</panel>
	</template>

	<template name="hero_half_list_group_row2">
		<panel width="92%" height="7.0h" align="center" float="right" padding="0.4h" noclick="true">
			<instance name="hero_button_normal" gameMode="{gameMode}" group="{group}" group_size="{group_size}" row="{row}" row_size="{row_size}" index="0" />
			<instance name="hero_button_normal" gameMode="{gameMode}" group="{group}" group_size="{group_size}" row="{row}" row_size="{row_size}" index="1"/>
			<instance name="hero_button_normal" gameMode="{gameMode}" group="{group}" group_size="{group_size}" row="{row}" row_size="{row_size}" index="2"/>
			<instance name="hero_button_normal" gameMode="{gameMode}" group="{group}" group_size="{group_size}" row="{row}" row_size="{row_size}" index="3"/>
			<instance name="hero_button_normal" gameMode="{gameMode}" group="{group}" group_size="{group_size}" row="{row}" row_size="{row_size}" index="4"/>
			<instance name="hero_button_normal" gameMode="{gameMode}" group="{group}" group_size="{group_size}" row="{row}" row_size="{row_size}" index="5"/>
			<instance name="hero_button_normal" gameMode="{gameMode}" group="{group}" group_size="{group_size}" row="{row}" row_size="{row_size}" index="6"/>
		</panel>
	</template>

	<template name="hero_half_list_group">
		<panel height="15.1h" float="bottom" padding="0.4h" noclick="true">
			<instance name="hero_half_list_group_row"  gameMode="{gameMode}" team="{team}" group="{group}" group_size="{group_size}" row="0" row_size="{row_size}"/>
			<instance name="hero_half_list_group_row2"  gameMode="{gameMode}" team="{team}" group="{group}" group_size="{group_size}" row="1" row_size="{row_size}"/>
		</panel>
	</template>

	<template name="hero_bd_row">
		<panel height="7h" float="right" padding="4.5h" noclick="true">
			<instance name="hero_button_normal" gameMode="{gameMode}" row="{row}" row_size="4" index="0"/>
			<instance name="hero_button_normal" gameMode="{gameMode}" row="{row}" row_size="4" index="1"/>
			<instance name="hero_button_normal" gameMode="{gameMode}" row="{row}" row_size="4" index="2"/>
			<instance name="hero_button_normal" gameMode="{gameMode}" row="{row}" row_size="4" index="3"/>
		</panel>
	</template>

	<template name="hero_rd_row">
		<panel height="7.12h" float="right" padding="4h" noclick="true">
			<instance name="hero_button_normal" gameMode="{gameMode}" row="{row}" row_size="4" index="0"/>
			<instance name="hero_button_normal" gameMode="{gameMode}" row="{row}" row_size="4" index="1"/>
			<instance name="hero_button_normal" gameMode="{gameMode}" row="{row}" row_size="4" index="2"/>
			<instance name="hero_button_normal" gameMode="{gameMode}" row="{row}" row_size="4" index="3"/>
		</panel>
	</template>

	<template name="hero_sp_row">
		<panel height="5.35h" float="right" padding="0.72h" noclick="true">
			<instance name="hero_button_normal" gameMode="{gameMode}" row="{row}" row_size="10" index="0"/>
			<instance name="hero_button_normal" gameMode="{gameMode}" row="{row}" row_size="10" index="1"/>
			<instance name="hero_button_normal" gameMode="{gameMode}" row="{row}" row_size="10" index="2"/>
			<instance name="hero_button_normal" gameMode="{gameMode}" row="{row}" row_size="10" index="3"/>
			<instance name="hero_button_normal" gameMode="{gameMode}" row="{row}" row_size="10" index="4"/>
			<instance name="hero_button_normal" gameMode="{gameMode}" row="{row}" row_size="10" index="5"/>
			<instance name="hero_button_normal" gameMode="{gameMode}" row="{row}" row_size="10" index="6"/>
			<instance name="hero_button_normal" gameMode="{gameMode}" row="{row}" row_size="10" index="7"/>
			<instance name="hero_button_normal" gameMode="{gameMode}" row="{row}" row_size="10" index="8"/>
			<instance name="hero_button_normal" gameMode="{gameMode}" row="{row}" row_size="10" index="9"/>
		</panel>
	</template>

	<template name="hero_sm_row">
		<panel x="{x}" y="-6.2h" width="4.8h" height="4.8h" float="bottom" padding="1.1h" align="{align}" valign="center" noclick="1">
			<instance name="hero_button_sm_candidate" gameMode="{gameMode}" team="{team}" index="0" width="150%" height="150%"/>
			<instance name="hero_button_sm_candidate" gameMode="{gameMode}" team="{team}" index="1" width="150%" height="150%"/>
			<instance name="hero_button_sm_candidate" gameMode="{gameMode}" team="{team}" index="2" width="150%" height="150%"/>
		</panel>
	</template>

	<template name="altavatar_full_item">
		<panel
			sticky="true"
			stickytoinvis="false"
			width="16.4h"
			height="100%"
			noclick="true"
			visible="true"
			watch=""
			ontrigger="SetVisible(!StringEmpty(param0));"
			onload="If(ui_lobby_showOldAAPicker, SetWatch('HeroSelectHeroAltAvatarList{slot}'));"
		>
			<panel width="16.0h" align="center" noclick="true">
				<frame texture="/ui/frames/rounded_bg_white.tga" borderthickness="0.6h" color="0 0 0 .4" noclick="true"/>
				<frame texture="/ui/frames/roundframe.tga" borderthickness="0.6h" color=".3 .3 .3 1" noclick="true" onload="If(ui_lobby_showOldAAPicker, SetWatch('HeroSelectHeroAltAvatarList{slot}'));" watch="" ontrigger="If(param16, SetBorderColor('#57420c'), SetBorderColor('.3 .3 .3 1'));"/>

				<!-- Selection Catcher -->
				<button
					color="invisible"
					onclick="##CallEventParamsX('altav_full', 1, 2);##"
					onload="If(ui_lobby_showOldAAPicker, SetWatch('HeroSelectHeroAltAvatarList{slot}'));" watch=""
					ontriggerlua="
						local avatarCode = param0
						local heroEntity = param13

						if (avatarCode) and (heroEntity) then
							self:SetVisible(AtoB(param1))
							if AtoB(param9) then
								if AtoB(param12) then
									self:SetCallback('onclick', function()
										if GetCvarBool('_game_lobby_setPotentialAvatar') then
											SetPotentialHero2('' .. heroEntity .. '', '' .. avatarCode ..'')
										else
											SelectAvatar('' .. avatarCode ..'')
										end
										GetWidget('altav_full'):DoEventN(1, 2)
									end)
								else
									self:SetCallback('onclick', function()
										PlaySound('shared/sounds/ui/button_click_02.wav');
										if GetCvarBool('_game_lobby_setPotentialAvatar') then
											SetPotentialHero2('' .. heroEntity .. '', '' .. avatarCode ..'')
										else
											SpawnHero('' .. heroEntity ..'')
											SelectAvatar('' .. avatarCode ..'')
										end
										GetWidget('altav_full'):DoEventN(1, 2)
									end)
								end
								self:SetCallback('onrightclick', function()
									SetPotentialHero2('' .. heroEntity .. '', '' .. avatarCode ..'')
									GetWidget('altav_full'):DoEventN(1, 2)
								end)
							else
								self:SetCallback('onclick', function()
									GetWidget('altav_full'):DoEventN(1, 2)
								end)
								self:ClearCallback('onrightclick')
							end
							self:RefreshCallbacks()
						else
							self:SetVisible(false)
						end
					"
				/>

				<!-- Current Highlight -->
				<panel noclick="true" onload="If(ui_lobby_showOldAAPicker, SetWatch('HeroSelectHeroAltAvatarList{slot}'));" watch="" ontrigger="SetVisible(param11);">
					<frame texture="/ui/frames/rounded_bg_white.tga" borderthickness="0.6h" style="altav_currentbg" noclick="true"/>
					<frame texture="/ui/frames/roundframe.tga" borderthickness="0.6h" style="altav_current" noclick="true" />
				</panel>

				<!-- Model -->
				<panel y="-3.0h" width="-1.0h" height="16.6h" align="center" valign="bottom" noclick="true">
					<modelpanel name="game_lobby_alt_preview_modelpanel_1_{slot}" height="-1.6h"
						noclick="true"
						model=""
						anim="idle"

						cameranear="1.0"
						camerafar="30000.0"
						depthclear="true"
						depthcompress="false"
						lookat="false"
						cameradistance="30"
						camerapos="0 1000 1000"
						cameraangles="-45 0 180"
						camerafov="6"
						modelpos="0 0 0"
						modelangles="0.0 0.0 0.0"
						modelscale="1.0"
						cull="false"

						sunazimuth="120"
						sunaltitude="50"
						suncolor="0.9 0.9 0.9"
						ambientcolor="0.6 0.7 0.7"
						onload="If(ui_lobby_showOldAAPicker, SetWatch('HeroSelectHeroAltAvatarList{slot}')); SetTeamColor('1 0 0');"
						watch=""
						ontrigger="SetModel(param4); SetEffect(param5); SetModelPos(param6); SetModelAngles(param7); SetModelScale(param8);"

						resourcecontext="lobby"
						onhide="##SetModel(''); SetEffect('');##"
						onshow="SetModel(GetModel()); SetEffect(GetEffect());"
					/>
					<frame color="invisible" bordercolor=".2 .2 .2 1" borderthickness="1" noclick="true"
						onload="If(ui_lobby_showOldAAPicker, SetWatch('HeroSelectHeroAltAvatarList{slot}'));" watch="" ontrigger="If(param16, SetBorderColor('#57420c'), SetBorderColor('0.2 .2 .2 1'));"
					/>

					<instance
						name="Noptions_checkbox"
						width="92%" height="1.6h" y="-0.4h"
						align="center" valign="bottom"
						font="dyn_10" label="general_default_avatar"
						interactive="false"
						checkbox_group="game_lobby_default_av_btns"
						onclicklua="groupfcall('game_lobby_default_av_btns', function(index, widget, groupName) widget:DoEvent() end)"
						watch="HeroSelectHeroAltAvatarList{slot}"
						ontrigger="SetEnabled(param9);"
						ontriggerlua="
							local avatarCode = param0
							local heroEntity = param13

							if (avatarCode) and (heroEntity) and NotEmpty(avatarCode) and NotEmpty(heroEntity) then
								self:SetCallback('onevent', function()
									local db_av = GetDBEntry('def_av_'..heroEntity, 'nil', false, false, false)
									if (db_av == avatarCode) then
										self:SetButtonState(1)
									else
										self:SetButtonState(0)
									end
								end)

								self:SetCallback('onclick', function()
									Game_Lobby.SetDefaultHeroAvatar(heroEntity, avatarCode)
								end)

								self:RefreshCallbacks()

								self:DoEvent()

							end
						"
					/>

				</panel>

				<!-- Icon -->
				<panel x="0.8h" y="3.0h" width="4.0h" height="4.0h" noclick="true">
					<image
						texture=""
						noclick="true"
						onload="If(ui_lobby_showOldAAPicker, SetWatch('HeroSelectHeroAltAvatarList{slot}'));" watch=""
						ontrigger="SetTexture(param3);"
						resourcecontext="lobby"
					/>
					<frame color="invisible" bordercolor=".2 .2 .2 1" borderthickness="1" noclick="true"
						onload="If(ui_lobby_showOldAAPicker, SetWatch('HeroSelectHeroAltAvatarList{slot}'));" watch="" ontrigger="If(param16, SetBorderColor('#57420c'), SetBorderColor('0.2 .2 .2 1'));"
					/>
				</panel>

				<!-- Avatar Name -->
				<panel y="-1.1h" width="15.2h" height="3.8h" align="center" noclick="true">
					<image resourcecontext="lobby" x="-50@" height="100%" width="-80@" align="right" utile="true" uscale=".4" texture="/ui/fe2/store/store_tab_center.tga" noclick="true" onload="If(ui_lobby_showOldAAPicker, SetWatch('HeroSelectHeroAltAvatarList{slot}'));" watch="" ontrigger="If(param16, SetTexture('/ui/fe2/store/store_tab_premium_center.tga'), SetTexture('/ui/fe2/store/store_tab_center.tga'));"/>
					<image resourcecontext="lobby" height="100%" width="50@" texture="/ui/fe2/store/store_tab_left.tga" noclick="true" onload="If(ui_lobby_showOldAAPicker, SetWatch('HeroSelectHeroAltAvatarList{slot}'));" watch="" ontrigger="If(param16, SetTexture('/ui/fe2/store/store_tab_premium_left.tga'), SetTexture('/ui/fe2/store/store_tab_left.tga'));"/>
					<image resourcecontext="lobby" align="right" height="100%" width="50@" texture="/ui/fe2/store/store_tab_right.tga" noclick="true" onload="If(ui_lobby_showOldAAPicker, SetWatch('HeroSelectHeroAltAvatarList{slot}'));" watch="" ontrigger="If(param16, SetTexture('/ui/fe2/store/store_tab_premium_right.tga'), SetTexture('/ui/fe2/store/store_tab_right.tga'));"/>
					<image resourcecontext="lobby" x="8%" y="10%" align="left" valign="top" height="50%" width="50@" texture="/ui/fe2/store/store_tab_connector.tga" noclick="true" onload="If(ui_lobby_showOldAAPicker, SetWatch('HeroSelectHeroAltAvatarList{slot}'));" watch="" ontrigger="If(param16, SetTexture('/ui/fe2/store/store_tab_premium_connector.tga'), SetTexture('/ui/fe2/store/store_tab_connector.tga'));"/>
					<image resourcecontext="lobby" x="-8%" y="10%" align="right" valign="top" height="50%" width="50@" texture="/ui/fe2/store/store_tab_connector.tga" noclick="true" onload="If(ui_lobby_showOldAAPicker, SetWatch('HeroSelectHeroAltAvatarList{slot}'));" watch="" ontrigger="If(param16, SetTexture('/ui/fe2/store/store_tab_premium_connector.tga'), SetTexture('/ui/fe2/store/store_tab_connector.tga'));"/>
					<image x="7%" y="43%" height="80%" width="119%" texture="/ui/fe2/store/book_item_premium.tga" noclick="true" visible="false" onload="If(ui_lobby_showOldAAPicker, SetWatch('HeroSelectHeroAltAvatarList{slot}'));" watch="" ontrigger="SetVisible(param16);"/>
					<label
						y="-8%"
						height="50%"
						width="100%"
						valign="bottom"
						textalign="center"
						textvalign="center"
						font="dyn_9"
						color="white"
						outline="true"
						noclick="true"
						onload="If(ui_lobby_showOldAAPicker, SetWatch('HeroSelectHeroAltAvatarList{slot}'));" watch=""
						ontrigger="SetText(param14);"
					/>
				</panel>

				<!-- Footers -->

				<!-- Purchase  Avatar -->
				<panel y="-0.5h" width="-1.0h" height="2.2h" align="center" valign="bottom" noclick="true" visible="{PurchaseAv=false}">
					<panel width="6.0h" noclick="true"
						onload="
							CreateString('_globby_buyavatar_heroname', '');
							CreateString('_globby_buyavatar_avatarcode', '');
							CreateString('_globby_buyavatar_avatarname', '');
							CreateInt('_globby_buyavatar_cost', 0);
							CreateInt('_globby_buyavatar_SilverCost', 0);
							CreateBool('_globby_buyavatar_premium', false);
							CreateString('_globby_buyavatar_discount', '');
						"
					>
						<frame texture="/ui/frames/rounded_bg_white.tga" borderthickness="0.6h" color="0 0 0 1" noclick="true"/>
						<frame texture="/ui/frames/roundframe.tga" borderthickness="0.6h" color=".2 .2 .2 1" noclick="true" />
						<image x="0.4h" width="1.6h" height="1.6h" valign="center" texture="/ui/elements/stat_icons/total_gold.tga"/>
						<label
							width="4.4h"
							height="100%"
							align="right"
							textalign="center"
							textvalign="center"
							font="dyn_9"
							color="white"
							shadow="true"
							noclick="true"
							onload="If(ui_lobby_showOldAAPicker, SetWatch('HeroSelectHeroAltAvatarList{slot}'));" watch=""
							ontrigger="SetText(param15);"
						/>
					</panel>
					<instance name="button2" button_name="altavatarFullItem{slot}Purchase"
						y="-0.1h"
						width="8.6h"
						height="1.8h"
						align="right" valign="bottom"
						borderthickness="0.6h"
						label="globby_purchase"
						enabled="true"
						watch="HeroSelectHeroAltAvatarList{slot}"
						ontrigger="
							SetEnabled(
								If(
									CanAccessHeroProduct(cg_avatarHero) or (CanAccessEarlyAccessProduct(cg_avatarHero) and IsEarlyAccessHero(cg_avatarHero)),
									(_gLobbyLastTotalCoins ge param15 or (_gLobbyLastTotalSilverCoins ge param17 and param17 gt 0)),
									0
								)
							);
							SetOnClick(
								'
									PlaySound(\'shared/sounds/ui/button_click_02.wav\');
									CreateString(\'_globby_buyavatar_heroname\', \'' # param13 # '\');
									CreateString(\'_globby_buyavatar_avatarcode\', \'' # param0 # '\');
									CreateString(\'_globby_buyavatar_avatarname\', \'' # param14 # '\');
									CreateInt(\'_globby_buyavatar_SilverCost\', ' # param17 # ');
									CreateInt(\'_globby_buyavatar_cost\', ' # param15 # ');
									Set(\'_globby_buyavatar_premium\', '#param16#');

									If(
										' # (param17 gt 0) # ',
										Split(
											CallEvent(\'globby_buyavatar_confirmationPrem\', 0),
											CallEvent(\'globby_buyavatar_confPrem_heroname\', 0),
											CallEvent(\'globby_buyavatar_confPrem_goldcost\', 0),
											CallEvent(\'globby_buyavatar_confPrem_silvercost\', 0),
											CallEvent(\'globby_buyavatar_confPrem_goldbtn\'),
											CallEvent(\'globby_buyavatar_confPrem_silverbtn\')
										),
										Split(
											CallEvent(\'globby_buyavatar_confirmation\', 0),
											CallEvent(\'globby_buyavatar_conf_heroname\', 0),
											CallEvent(\'globby_buyavatar_conf_goldcost\', 0),
											CallEvent(\'globby_buyavatar_conf_silvercost\', 0)
										)
									);

								'
							);
						"
					/>
				</panel>

				<!-- Select Avatar -->
				<panel
					y="-0.5h"
					width="-1.2h"
					height="2.2h"
					align="center"
					valign="bottom"
					noclick="false"
					onload="If(ui_lobby_showOldAAPicker, SetWatch('HeroSelectHeroAltAvatarList{slot}'));" watch=""
					ontrigger="SetVisible(param1 and !param11);"
				>
					<instance name="button2" button_name="altAvatarFullItem{slot}Select"
						y="-0.1h"
						height="1.8h"
						valign="bottom"
						borderthickness="0.6h"
						label="globby_select_avatar"
						watch="HeroSelectHeroAltAvatarList{slot}"
						ontriggerlua="
							local avatarCode = param0
							local heroEntity = param13

							if (avatarCode) and (heroEntity) then
								self:SetVisible(AtoB(param1))
								self:SetEnabled(AtoB(param9))
								if AtoB(param12) then
									self:SetCallback('onclick', function()
										PlaySound('shared/sounds/ui/button_click_02.wav');
										if GetCvarBool('_game_lobby_setPotentialAvatar') then
											SetPotentialHero2('' .. heroEntity .. '', '' .. avatarCode ..'')
										else
											SelectAvatar('' .. avatarCode ..'')
										end
										GetWidget('altav_full'):DoEventN(1, 2)
									end)
								else
									self:SetCallback('onclick', function()
										PlaySound('shared/sounds/ui/button_click_02.wav');
										if GetCvarBool('_game_lobby_setPotentialAvatar') then
											SetPotentialHero2('' .. heroEntity .. '', '' .. avatarCode ..'')
										else
											SpawnHero('' .. heroEntity ..'')
											SelectAvatar('' .. avatarCode ..'')
										end
										GetWidget('altav_full'):DoEventN(1, 2)
									end)
								end

								self:SetCallback('onrightclick', function()
									PlaySound('shared/sounds/ui/button_click_02.wav');
									GetWidget('altav_full'):DoEventN(1, 2)
									SetPotentialHero2('' .. heroEntity .. '', '' .. avatarCode ..'')
								end)

								self:RefreshCallbacks()
						else
							self:SetVisible(false)
						end
						"
					/>
				</panel>

				<!-- Currently Selected -->
				<panel y="-0.4h" width="-0.8h" height="2.3h" align="center" valign="bottom" onload="If(ui_lobby_showOldAAPicker, SetWatch('HeroSelectHeroAltAvatarList{slot}'));" watch="" ontrigger="SetVisible(param11);">
					<frame texture="/ui/frames/rounded_bg_white.tga" borderthickness="0.6h" color="0 0 0 1" noclick="true"/>
					<frame texture="/ui/frames/roundframe.tga" borderthickness="0.6h" style="altav_current" noclick="true" />
					<label height="100%" textalign="center" textvalign="center" font="dyn_9" style="altav_current" shadow="true" noclick="true" content="globby_current_selection"/>
				</panel>

				<!-- / Footers -->

			</panel>

		</panel>
	</template>

	<template name="lp_slot">
		<panel width="120@" height="100%" valign="center" noclick="true" >
			<image height="100%" width="200@" align="center" noclick="true"
				resourcecontext="lobby" watch9="MainRegisterTextures"
				ontrigger9lua="ResourceManager.RegisterTexture('/ui/fe2/lobby/lp_hero_slot.tga', 'lobby', self)"
			/>
			<instance name="hero_button_normal" gameMode="{gameMode}" height="-25%" width="-25%" x="7%" align="center" valign="center" infotrigger="LockHeroSelectHeroList" index="{index}" team="0" team_offset="0" group="0" group_size="0" row="0" row_size="0" showlocks="false" />
		</panel>
	</template>

	<!-- Quick Stats -->
	<template name="quickstat_recent">
		<panel height="14%" watch="GameLobby_RecentMatchTrigger" ontrigger="if(param0 == {ID}, if(StringEmpty(param1), HideWidget(), ShowWidget()));" >
			<panel width="92@" height="92%" valign="center">
				<image watch="GameLobby_RecentMatchTrigger" ontrigger="if(param0 == {ID}, SetTexture(param1));" texture="" />
				<frame color="invisible" borderthickness="1" bordercolor=".2 .2 .2 1" />
			</panel>
			<panel width="-105@" align="right">
				<label width="98%" height="100%" font="dyn_10" color="1 1 1 1" shadow="true" content="" textvalign="center" textalign="left" noclick="true" watch="GameLobby_RecentMatchTrigger" ontrigger="if(param0 == {ID}, SetText(param2));" />
				<label width="68%" font="dyn_10" color="1 1 1 1" shadow="true" content="" align="right" height="100%" textvalign="center" textalign="center" noclick="true" watch="GameLobby_RecentMatchTrigger" ontrigger="if(param0 == {ID}, SetText(param3));"/>
			</panel>
		</panel>
	</template>

	<template name="quickstat_favorite">
		<panel width="100%" height="20%" watch="GameLobby_FavHeroTrigger" ontrigger="if(param0 == {ID}, if(StringEmpty(param1), HideWidget(), ShowWidget()));" >
			<panel x="2%" width="80@" height="80%" valign="center">
				<image texture="" watch="GameLobby_FavHeroTrigger" ontrigger="if(param0 == {ID}, SetTexture(param1));"/>
				<frame color="invisible" borderthickness="1" bordercolor="{color}" />
			</panel>
			<label width="-100@" height="100%" align="right" textvalign="center" textalign="center" font="dyn_10" color="{color}" content="" watch="GameLobby_FavHeroTrigger" ontrigger="if(param0 == {ID}, if(StringEmpty(param1), SetText(''), SetText(ceil(param2) # '%')));"/>
		</panel>
	</template>

	<template name="pick_filter_category">
		<button name="pick_filter_{category}" group="pick_filter_categories" width="10.9h" height="2.3h" color="invisible" numstates="2"
			onclicklua="Game_Lobby:ToggleFilter('{category}')"
			onrightclicklua="Game_Lobby:FilterOnly('{category}')"
			onmouseoverlua="Game_Lobby:FilterTooltip('', 'filter_{category}_tip')"
			onmouseoutlua="Game_Lobby:FilterTooltip('', '')"
			oninstantiatelua="Game_Lobby:RegisterFilterButton(self, '{category}')"
			watch="ViewingStreaming"
			ontriggerlua="self:SetEnabled(not AtoB(param))"
		>
			<!-- usage bars -->
			<panel x="2.0h" y="-0.35h" valign="bottom" width="-2.75h" color="#6E6E6E" height="0.3h" noclick="1" clip="1" float="right">
				<!-- bars for individals, color will have to be set via trigger -->
				<panel name="pick_filter_{category}_bar1" width="0" color="invisible" sticky="1"/>
				<panel name="pick_filter_{category}_bar2" width="0" color="invisible" sticky="1"/>
				<panel name="pick_filter_{category}_bar3" width="0" color="invisible" sticky="1"/>
				<panel name="pick_filter_{category}_bar4" width="0" color="invisible" sticky="1"/>
				<panel name="pick_filter_{category}_bar5" width="0" color="invisible" sticky="1"/>

				<!-- bars for total, not individual -->
				<panel name="pick_filter_{category}_barTotal" width="0" color="red" sticky="1"/>

				<!-- bar for ghost selection, reguardless of mode -->
				<panel name="pick_filter_{category}_barGhost" width="0" color="#D6D6D6" sticky="1"/>

			</panel>

			<label x="2.0h" y="0.2h" fitx="1" fity="1" fitxpadding="2" color="white" font="dyn_8" shadow="1" content="filter_category_{category}" noclick="1"/>

			<widgetstate statename="up">
				<frame texture="/ui/frames/rounded_bg_flat.tga" color="#192B35" borderthickness="0.5h" blockinput="false" noclick="true"/>
				<frame texture="/ui/frames/roundframe.tga" color="0 0 0 1" borderthickness="0.5h" blockinput="false" noclick="true"/>
				<panel width="1.3h" height="1.3h" valign="center" x="0.4h" noclick="1">
					<frame texture="/ui/frames/rounded_bg_white.tga" borderthickness="0.4h" color="white" noclick="1"/>
					<frame texture="/ui/frames/roundframe.tga" color="#3abde7" borderthickness="0.4h" noclick="1"/>
				</panel>
			</widgetstate>
			<widgetstate statename="over">
				<frame texture="/ui/frames/rounded_bg_flat.tga" color="#2c5065" borderthickness="0.5h" blockinput="false" noclick="true"/>
				<frame texture="/ui/frames/roundframe.tga" color="0 0 0 1" borderthickness="0.5h" blockinput="false" noclick="true"/>
				<panel width="1.3h" height="1.3h" valign="center" x="0.4h" noclick="1">
					<frame texture="/ui/frames/rounded_bg_white.tga" borderthickness="0.4h" color="white" noclick="1"/>
					<frame texture="/ui/frames/roundframe.tga" color="#3abde7" borderthickness="0.4h" noclick="1"/>
				</panel>
			</widgetstate>
			<widgetstate statename="down">
				<frame texture="/ui/frames/rounded_bg_flat.tga" color="#192B35" borderthickness="0.5h" blockinput="false" noclick="true"/>
				<frame texture="/ui/frames/roundframe.tga" color="0 0 0 1" borderthickness="0.5h" blockinput="false" noclick="true"/>
				<panel width="1.3h" height="1.3h" valign="center" x="0.4h" noclick="1">
					<frame texture="/ui/frames/rounded_bg_white.tga" borderthickness="0.4h" color="white" noclick="1"/>
					<frame texture="/ui/frames/roundframe.tga" color="#3abde7" borderthickness="0.4h" noclick="1"/>
				</panel>
			</widgetstate>

			<widgetstate statename="up2">
				<frame texture="/ui/frames/rounded_bg_flat.tga" color="#2c5065" borderthickness="0.5h" blockinput="false" noclick="true"/>
				<frame texture="/ui/frames/roundframe.tga" color="0 0 0 1" borderthickness="0.5h" blockinput="false" noclick="true"/>
				<panel width="1.3h" height="1.3h" valign="center" x="0.4h" noclick="1">
					<frame texture="/ui/frames/rounded_bg_white.tga" borderthickness="0.4h" color="white" noclick="1"/>
					<frame texture="/ui/frames/roundframe.tga" color="#3abde7" borderthickness="0.4h" noclick="1"/>
					<panel x="0.1h" y="-0.2h" valign="bottom" align="center" width="125@" height="125%" nolclick="true" noclick="1">
						<image x="1" y="1" texture="/ui/elements/check_mark_white.tga" color="0 0 0 1" noclick="1"/>
						<image texture="/ui/elements/check_mark_white.tga" color="#40cd3c" noclick="1"/>
					</panel>
				</panel>
			</widgetstate>
			<widgetstate statename="over2">
				<frame texture="/ui/frames/rounded_bg_flat.tga" color="#2c5871" borderthickness="0.5h" blockinput="false" noclick="true"/>
				<frame texture="/ui/frames/roundframe.tga" color="0 0 0 1" borderthickness="0.5h" blockinput="false" noclick="true"/>
				<panel width="1.3h" height="1.3h" valign="center" x="0.4h" noclick="1">
					<frame texture="/ui/frames/rounded_bg_white.tga" borderthickness="0.4h" color="white" noclick="1"/>
					<frame texture="/ui/frames/roundframe.tga" color="#3abde7" borderthickness="0.4h" noclick="1"/>
					<panel x="0.1h" y="-0.2h" valign="bottom" align="center" width="125@" height="125%" nolclick="true" noclick="1">
						<image x="1" y="1" texture="/ui/elements/check_mark_white.tga" color="0 0 0 1" noclick="1"/>
						<image texture="/ui/elements/check_mark_white.tga" color="#40cd3c" noclick="1"/>
					</panel>
				</panel>
			</widgetstate>
			<widgetstate statename="down2">
				<frame texture="/ui/frames/rounded_bg_flat.tga" color="#2c5065" borderthickness="0.5h" blockinput="false" noclick="true"/>
				<frame texture="/ui/frames/roundframe.tga" color="0 0 0 1" borderthickness="0.5h" blockinput="false" noclick="true"/>
				<panel width="1.3h" height="1.3h" valign="center" x="0.4h" noclick="1">
					<frame texture="/ui/frames/rounded_bg_white.tga" borderthickness="0.4h" color="white" noclick="1"/>
					<frame texture="/ui/frames/roundframe.tga" color="#3abde7" borderthickness="0.4h" noclick="1"/>
					<panel x="0.1h" y="-0.2h" valign="bottom" align="center" width="125@" height="125%" nolclick="true" noclick="1">
						<image x="1" y="1" texture="/ui/elements/check_mark_white.tga" color="0 0 0 1" noclick="1"/>
						<image texture="/ui/elements/check_mark_white.tga" color="#40cd3c" noclick="1"/>
					</panel>
				</panel>
			</widgetstate>
		</button>
	</template>

	<template name="pick_filter_category_radio">
		<button name="pick_filter_{category}" group="pick_filter_categories_radio" width="10.9h" height="2.3h" color="invisible" numstates="2"
			onclicklua="Game_Lobby:ToggleFilterRadio('{category}', '{disableCategories}')"
			onrightclicklua="Game_Lobby:FilterOnly('{category}')"
			onmouseoverlua="Game_Lobby:FilterTooltip('', 'filter_{category}_tip')"
			onmouseoutlua="Game_Lobby:FilterTooltip('', '')"
			oninstantiatelua="Game_Lobby:RegisterFilterButton(self, '{category}')"
			watch="ViewingStreaming"
			ontriggerlua="self:SetEnabled(not AtoB(param))"
		>
			<!-- usage bars -->
			<panel x="2.0h" y="-0.35h" valign="bottom" width="-2.75h" color="#6E6E6E" height="0.3h" noclick="1" clip="1" float="right">
				<!-- bars for individals, color will have to be set via trigger -->
				<panel name="pick_filter_{category}_bar1" width="0" color="invisible" sticky="1"/>
				<panel name="pick_filter_{category}_bar2" width="0" color="invisible" sticky="1"/>
				<panel name="pick_filter_{category}_bar3" width="0" color="invisible" sticky="1"/>
				<panel name="pick_filter_{category}_bar4" width="0" color="invisible" sticky="1"/>
				<panel name="pick_filter_{category}_bar5" width="0" color="invisible" sticky="1"/>

				<!-- bars for total, not individual -->
				<panel name="pick_filter_{category}_barTotal" width="0" color="red" sticky="1"/>

				<!-- bar for ghost selection, reguardless of mode -->
				<panel name="pick_filter_{category}_barGhost" width="0" color="#D6D6D6" sticky="1"/>

			</panel>

			<label x="2.0h" y="0.2h" fitx="1" fity="1" fitxpadding="2" color="white" font="dyn_8" shadow="1" content="filter_category_{category}" noclick="1"/>

			<widgetstate statename="up">
				<frame texture="/ui/frames/rounded_bg_flat.tga" color="#192B35" borderthickness="0.5h" blockinput="false" noclick="true"/>
				<frame texture="/ui/frames/roundframe.tga" color="0 0 0 1" borderthickness="0.5h" blockinput="false" noclick="true"/>
				<image texture="/ui/elements/generic_slider_handle.tga" width="1.3h" height="1.3h" x="0.4h" valign="center" rendermode="grayscale" />
			</widgetstate>
			<widgetstate statename="over">
				<frame texture="/ui/frames/rounded_bg_flat.tga" color="#2c5065" borderthickness="0.5h" blockinput="false" noclick="true"/>
				<frame texture="/ui/frames/roundframe.tga" color="0 0 0 1" borderthickness="0.5h" blockinput="false" noclick="true"/>
				<image texture="/ui/elements/generic_slider_handle.tga" width="1.3h" height="1.3h" x="0.4h" valign="center" rendermode="grayscale" />
			</widgetstate>
			<widgetstate statename="down">
				<frame texture="/ui/frames/rounded_bg_flat.tga" color="#192B35" borderthickness="0.5h" blockinput="false" noclick="true"/>
				<frame texture="/ui/frames/roundframe.tga" color="0 0 0 1" borderthickness="0.5h" blockinput="false" noclick="true"/>
				<image texture="/ui/elements/generic_slider_handle.tga" width="1.3h" height="1.3h" x="0.4h" valign="center" rendermode="grayscale" />
			</widgetstate>

			<widgetstate statename="up2">
				<frame texture="/ui/frames/rounded_bg_flat.tga" color="#2c5065" borderthickness="0.5h" blockinput="false" noclick="true"/>
				<frame texture="/ui/frames/roundframe.tga" color="0 0 0 1" borderthickness="0.5h" blockinput="false" noclick="true"/>
				<image texture="/ui/elements/generic_slider_handle.tga" width="1.3h" height="1.3h" x="0.4h" valign="center" />
			</widgetstate>
			<widgetstate statename="over2">
				<frame texture="/ui/frames/rounded_bg_flat.tga" color="#2c5871" borderthickness="0.5h" blockinput="false" noclick="true"/>
				<frame texture="/ui/frames/roundframe.tga" color="0 0 0 1" borderthickness="0.5h" blockinput="false" noclick="true"/>
				<image texture="/ui/elements/generic_slider_handle.tga" width="1.3h" height="1.3h" x="0.4h" valign="center" />
			</widgetstate>
			<widgetstate statename="down2">
				<frame texture="/ui/frames/rounded_bg_flat.tga" color="#2c5065" borderthickness="0.5h" blockinput="false" noclick="true"/>
				<frame texture="/ui/frames/roundframe.tga" color="0 0 0 1" borderthickness="0.5h" blockinput="false" noclick="true"/>
				<image texture="/ui/elements/generic_slider_handle.tga" width="1.3h" height="1.3h" x="0.4h" valign="center" />
			</widgetstate>
		</button>
	</template>

	<!-- tooltip for filters (generic, slimmed down, with tweaks) -->
	<floater name="picker_filters_tooltip" width="20h" grow="1" regrow="1" growinvis="0" x="3h" y="2h" visible="0">
		<frame texture="/ui/frames/tooltip_bg.tga" color="0 0 0 .75" borderthickness=".6h" />
		<frame texture="/ui/frames/roundframe.tga" color="#A0A0A0" borderthickness=".6h" />
		<panel grow="true" regrow="true" growinvis="false" float="bottom" width="-1h" align="center">
			<panel width="100%" grow="true" regrow="true" growinvis="false" float="bottom" padding="0.5h">
				<label name="picker_filters_tooltip_title" align="center" color="#ffab01" font="dyn_11" shadow="true" wrap="true" fity="true" sticky="true" stickytoinvis="false" textvalign="center"/>
				<label name="picker_filters_tooltip_body" align="center" color="white" font="dyn_9" shadow="true" wrap="true" fity="true" sticky="true" stickytoinvis="false" textvalign="center" visible="false" />
			</panel>
			<panel height="1h"/><!-- Spacer and to get rid of the padding issue -->
		</panel>
	</floater>

	<!-- Main Panel   0 -->
	<template name="game_lobby_fe2">
		<panel
			name="event_gamemodes" noclick="1"
			watch="GamePhase"
			ontrigger="
				if(param0() == 0, DoEvent(0));
				if(param0() == 1, DoEvent(1));
				if(param0() == 2, DoEvent(2));
				if(param0() == 3, DoEvent(3));
				if(param0() == 4, DoEvent(4));
				if(param0() == 5, DoEvent(5));
				if(param0() gt 5, DoEvent(6));
			"
			onload="
				DoEvent();

				if(param0() == 0, DoEvent(0));
				if(param0() == 1, DoEvent(1));
				if(param0() == 2, DoEvent(2));
				if(param0() == 3, DoEvent(3));
				if(param0() == 4, DoEvent(4));
				if(param0() == 5, DoEvent(5));
				if(param0() gt 5, DoEvent(6));
			"

			oneventlua="
				if (Game_Lobby ~= nil) and (Game_Lobby.contextActive ~= nil) and (Game_Lobby.contextActive.libcards ~= nil) then
					Game_Lobby.contextActive.libcards = false
				end
			"

			onevent0lua="Game_Lobby.resetGamePhase = true"

			onevent0="
				call('lobby_blackout', 'FadeOut(500);');

				Call('asset_loading_center', 'SleepWidget(\'100\', \'SlideY(\\\'-110h\\\', 300);\');');

				Call('game_lobby_picker_fe2', 'SetVisible(0)');
				Call('lobby_main_panel', 'SetY(\'-110h\');');
				Call('game_lobby_picker_fe2', 'SetY(\'-110h\');');
				Call('game_lobby_fe2_matchinfo', 'SetY(\'-110h\');');

				Call('asset_loading_center', 'SleepWidget(\'100\', \'SlideY(\\\'-110h\\\', 100);\');');

				call('latch_status', 'SetVisible(0);');
				call('lobby_status', 'SetVisible(0);');
				Set(_latch_status, false);
				if(_loggedin, CallEvent('toggle_latch', 1));

				Set('_raceResult',1);

				CallEventParamsX('altav_full', 2, 2);
			"

			onevent1="
				Call('lobby_main_panel', 'SleepWidget(\'0\', \'SlideY(\\\'0h\\\', 300);\');');
				Call('game_lobby_picker_fe2', 'SetVisible(1)');
				Call('game_lobby_fe2_matchinfo', 'SlideY(\'0h\',300);');
				PlaySound('/shared/sounds/ui/menu/slide_in_short.wav');
				call('lobby_blackout', 'fadeIn(500);');

				call('lobby_status', 'SetVisible(1);');

				Set('_raceResult',1);

				CallEventParamsX('altav_full', 2, 2);
			"

			onevent2="
				##call('glb_mini_status', 'SetVisible(0);');##

				Call('lobby_main_panel', 'SleepWidget(\'0\', \'SlideY(\\\'0h\\\', 300);\');');
				##Call('pickerdoors','SleepWidget(1150,\'CallEvent(\\\'pickerdoors\\\',0);\');');##
				Call('game_lobby_fe2_matchinfo', 'SlideY(\'-110h\',800);');
				PlaySound('/shared/sounds/ui/menu/slide_out_2.wav');

				Call('game_lobby_picker_fe2', 'SetVisible(1)');
				Call('game_lobby_picker_fe2', 'SleepWidget(\'800\', \'SlideY(\\\'0h\\\', 500); PlaySound(\\\'/shared/sounds/ui/menu/slide_in_2.wav\\\');\');');

				Set(_latch_status, true);
				call('latch_status', 'SetVisible(1);');
				call('lobby_status', 'SetVisible(1);');

				Set('_raceResult',1);

				CallEventParamsX('altav_full', 2, 2);

				SubmitForm('PlayerStatsMastery', 'f', 'show_stats', 'nickname', StripClanTag(GetAccountName()), 'cookie', GetCookie(), 'table', 'mastery');
			"

			onevent3="
				DelayHeroLoading(2200);
				Call('lobby_main_panel', 'SleepWidget(\'0\', \'SlideY(\\\'0h\\\', 300);\');');
				Call('game_lobby_fe2_matchinfo', 'SlideY(\'-110h\',800);');
				PlaySound('/shared/sounds/ui/menu/slide_out_22.wav');

				Call('game_lobby_picker_fe2', 'SetVisible(1)');
				Call('game_lobby_picker_fe2', 'SleepWidget(\'800\', \'SlideY(\\\'0h\\\', 500); PlaySound(\\\'/shared/sounds/ui/menu/slide_in_2.wav\\\');\');');

				Set(_latch_status, true);
				call('latch_status', 'SetVisible(1);');
				call('lobby_status', 'SetVisible(1);');

				Set('_raceResult',1);

				CallEventParamsX('altav_full', 2, 2);

				SubmitForm('PlayerStatsMastery', 'f', 'show_stats', 'nickname', StripClanTag(GetAccountName()), 'cookie', GetCookie(), 'table', 'mastery');
			"

			onevent4="
				Set(_latch_status, false);
				CallEvent('toggle_latch', 1);

				call('latch_status', 'SetVisible(0);');
				call('lobby_status', 'SetVisible(0);');

				Call('lobby_main_panel', 'SleepWidget(\'0\', \'SlideY(\\\'0h\\\', 300);\');');
				Call('game_lobby_fe2_matchinfo', 'SlideY(\'-110h\',800);');

				Call('game_lobby_picker_fe2', 'SetVisible(1)');
				Call('game_lobby_picker_fe2', 'SleepWidget(\'800\', \'SlideY(\\\'-110h\\\', 500); PlaySound(\\\'/shared/sounds/ui/menu/slide_out_2.wav\\\');\');');

				Call('asset_loading_center', 'SleepWidget(\'1600\', \'SlideY(\\\'0h\\\', 300); PlaySound(\\\'/shared/sounds/ui/menu/slide_in_3.wav\\\');\');');

				CallEventParamsX('altav_full', 2, 2);
			"

			onevent5="
				Call('lobby_main_panel', 'SleepWidget(\'0\', \'SlideY(\\\'-110h\\\', 300);\');');

				call('lobby_blackout', 'fadeOut(500);');

				Set(_latch_status, false);
				CallEvent('toggle_latch', 1);

				Call('asset_loading_center', 'SleepWidget(\'100\', \'SlideY(\\\'-110h\\\', 300);\');');

				CallEventParamsX('altav_full', 2, 2);
			"

			onevent6="
				Set(_latch_status, false);
				CallEvent('toggle_latch', 1);

				CallEventParamsX('altav_full', 2, 2);
			"
		/>

		<panel name="lobby_blackout" align="center" visible="0" width="175%" color="0 0 0 .4" />

		<panel name="lobby_main_panel"  y="-110h" watch="GamePhase" ontrigger="SetVisible(param0 gt 0 and param0 lt 5);" >

			<panel noclick="true" >
				<image  texture="lobby/hero_picker_post.tga" y="-2h" x="-54.1h" align="center"  height="95.5h"  width="50@"
					resourcecontext="lobby" watch9="MainRegisterTextures"
					ontrigger9lua="ResourceManager.RegisterTexture('/ui/fe2/lobby/hero_picker_post.tga', 'lobby', self)"
				/>
				<image texture="lobby/hero_picker_post.tga" y="-2h" x="54.1h" align="center"  height="95.5h"  width="50@"
					resourcecontext="lobby" watch9="MainRegisterTextures"
					ontrigger9lua="ResourceManager.RegisterTexture('/ui/fe2/lobby/hero_picker_post.tga', 'lobby', self)"
				/>
				<!-- Left -->
				<panel width="30.7h" align="center" x="-47.1h" noclick="true">
					<instance name="first_ban" team="1" x="12%" />
					<panel y="1.0h" height="-3.0h" valign="top" float="bottom" reverse="true" noclick="1" color="invisible">
						<instance name="hero_slot_left" team="1" slot="0" index="0"/>
						<instance name="hero_slot_left" team="1" slot="1" index="1"/>
						<instance name="hero_slot_left" team="1" slot="2" index="2"/>
						<instance name="hero_slot_left" team="1" slot="3" index="3"/>
						<instance name="hero_slot_left" team="1" slot="4" index="4"/>
					</panel>
				</panel>

				<!-- Right -->
				<panel width="30.7h"  align="center" x="47.1h" noclick="true">
					<instance name="first_ban" team="2" x="-12%" />
					<panel y="1.0h" height="-3.0h" valign="top" float="bottom" reverse="true" noclick="1" color="invisible">
						<instance name="hero_slot_right" team="2" slot="0" index="5"/>
						<instance name="hero_slot_right" team="2" slot="1" index="6"/>
						<instance name="hero_slot_right" team="2" slot="2" index="7"/>
						<instance name="hero_slot_right" team="2" slot="3" index="8"/>
						<instance name="hero_slot_right" team="2" slot="4" index="9"/>
					</panel>
				</panel>
			</panel>

			<!-- Match info -->
			<panel y="0" name="game_lobby_fe2_matchinfo" color="invisible" noclick="true" visible="1">
				<panel name="lobby_game_info"  width="62h" height="50h" align="center" color="invisible" noclick="1">

					<!-- logo -->
					<panel watch="LobbyTeamInfo0" ontrigger="SetVisible(param2 == 0); SetTexture('/ui/fe2/mainmenu/logo.tga');" name="main_logo_gamelobby" x="-.15h" y="-2h" height="28.5h" width="28.5h"  align="center"
						resourcecontext="lobby" watch9="MainRegisterTextures"
						ontrigger9lua="ResourceManager.RegisterTexture('/ui/fe2/mainmenu/logo.tga', 'lobby', self)"
						texture="$invis"
					/>

					<panel 	watch="LobbyTeamInfo0" ontrigger="SetVisible(param2 gt 0); "  name="spectator_list"  align="center" y="-27h" valign="bottom" width="77%" height="37.50@" noclick="1"
						resourcecontext="lobby" watch9="MainRegisterTextures"
						ontrigger9lua="ResourceManager.RegisterTexture('/ui/fe2/lobby/spectator_panel.tga', 'lobby', self)"
					>
						<panel color="invisible" y="-8%" width="70%"  height="60%" valign="bottom" align="center" >

							<!-- backgroundimage="/ui/fe2/elements/comm_item_bg.tga" -->
							<listbox
								width="100%" height="14h"
								valign="top"
								itemwidth="-1h" itemheight="2.75h"
								font="dyn_10"
								hoverselect="false"
								hoverhighlight="true"
								highlight="under"
								highlightcolor="#46adff42"
								highlightbordercolor="invisible"
								selectedcolor="invisible"
								selectedbordercolor="invisible"

								backgroundimagecolor="#1d2f3b"
								colortransition="true"
								colortransitiontime="250"
								exteriorscrollbars="false"
								scrollbarplaceholder="true"
								scrollbarsize="2.0h"
								scrolltexture="/ui/info/combobox.tga"
								handleheight="2.0h"
								select="false"
								color="invisible"
								watch="LobbySpectators"
								ontrigger="
									If(param0 == -1, Clear());
									If(param0 != -1 and !param5,
										AddTemplateListItem('spectator_list_entry', param0, 'index', param0, 'username', param1, 'cankick', param4, 'canpromote', param6)
										);"
							>
							</listbox>
						</panel>

						<panel color="invisible" y="17%" width="70%"  height="11%" valign="top" align="center" >
							<panel color="invisible" width="44%">
								<instance name="player_action_button"
									width="60@" height="60%" valign="center" align="right"
									onmouseover="ShowWidget('ModSpectatorTip'); Trigger('ModSpectatorTipTrigger', Translate('gamelobby_kick_tip', 'name', '') );"
									onmouseout="HideWidget('ModSpectatorTip');"
									onhide="HideWidget('ModSpectatorTip');"
									texture="kick"
									onclick="PlaySound('/shared/sounds/ui/lobby/button_kick.wav'); Kick(LobbyReferee0); HideWidget('ModSpectatorTip');"
									watch="LobbyReferee0"
									ontriggerlua="self:SetVisible(AtoB(param2))"
									visible="0"
								/>
								<instance name="player_action_button"
									x="-60@" width="60@" height="60%" valign="center" align="right"
									onmouseover="ShowWidget('ModSpectatorTip'); Trigger('ModSpectatorTipTrigger', Translate('game_lobby_demote_referee', 'name', '') );"
									onmouseout="HideWidget('ModSpectatorTip');"
									onhide="HideWidget('ModSpectatorTip');"
									texture="referee"
									onclick="PlaySound('/shared/sounds/ui/lobby/button_referee.wav'); DemoteRef(LobbyReferee0); HideWidget('ModSpectatorTip');"
									watch="LobbyReferee0"
									ontriggerlua="self:SetVisible(AtoB(param3))"
									visible="0"
								/>

								<label width="-120@" content="game_lobby_no_referee" font="dyn_10" shadow="true" color="gray" textalign="center" textvalign="center" watch="LobbyReferee0" noclick="1"
								ontrigger="
									If(StringEmpty(param1), SetText(Translate('game_lobby_no_referee')), SetText(param1));
									If(StringEmpty(param1), SetColor('gray'), SetColor('white'));
								"/>
							</panel>

							<panel color="invisible" align="right" width="44%" >
								<instance name="player_action_button"
									width="60@" height="60%" valign="center"
									onmouseover="ShowWidget('ModSpectatorTip'); Trigger('ModSpectatorTipTrigger', Translate('gamelobby_kick_tip', 'name', '') );"
									onmouseout="HideWidget('ModSpectatorTip');"
									onhide="HideWidget('ModSpectatorTip');"
									texture="kick"
									onclick="PlaySound('/shared/sounds/ui/lobby/button_kick.wav'); Kick(LobbyReferee1); HideWidget('ModSpectatorTip');"
									watch="LobbyReferee1"
									ontriggerlua="self:SetVisible(AtoB(param2))"
									visible="0"
								/>
								<instance name="player_action_button"
									x="60@" width="60@" height="60%" valign="center"
									onmouseover="ShowWidget('ModSpectatorTip'); Trigger('ModSpectatorTipTrigger', Translate('game_lobby_demote_referee', 'name', '') );"
									onmouseout="HideWidget('ModSpectatorTip');"
									onhide="HideWidget('ModSpectatorTip');"
									texture="referee"
									onclick="PlaySound('/shared/sounds/ui/lobby/button_referee.wav'); DemoteRef(LobbyReferee1); HideWidget('ModSpectatorTip');"
									watch="LobbyReferee1"
									ontriggerlua="self:SetVisible(AtoB(param3))"
									visible="0"
								/>

								<label width="-120@" align="right" content="game_lobby_no_referee" font="dyn_10" shadow="true" color="gray" textalign="center" textvalign="center" watch="LobbyReferee1" noclick="1"
								ontrigger="
									If(StringEmpty(param1), SetText(Translate('game_lobby_no_referee')), SetText(param1));
									If(StringEmpty(param1), SetColor('gray'), SetColor('white'));
								"/>
							</panel>
						</panel>
						<panel align="center" width="4h" height="4h" x="-.3h" y="2.5h">

							<button name="become_specator_button"
								onclick="PlaySound('/shared/sounds/ui/lobby/button_spectator.wav'); HideWidget('globby_become_spec_tip'); Team(0);"
								watch="LobbyTeamInfo0"
								ontrigger="SetEnabled(param0);"
								color="invisible"
								onmouseover="PlaySound('/shared/sounds/ui/button_over_02.wav'); ShowWidget('globby_become_spec_tip');"
								onmouseout="HideWidget('globby_become_spec_tip');"
							>
								<widgetstate statename="up">
									<image texture="/ui/elements/lobby/icon_spectator.tga" />
								</widgetstate>
								<widgetstate statename="over">
									<image texture="/ui/elements/lobby/icon_spectator.tga" />
									<image texture="/ui/elements/lobby/icon_spectator.tga" />
									<panel rendermode="overlay" color=".6 .6 .6 .1" />
								</widgetstate>
								<widgetstate x=".1h" y=".1h" statename="down">
									<image texture="/ui/elements/lobby/icon_spectator.tga" />
									<panel color="0 0 0 .25" />
								</widgetstate>
								<widgetstate statename="disabled">
									<image texture="/ui/elements/lobby/icon_spectator.tga" rendermode="grayscale" />
								</widgetstate>
							</button>
						</panel>

					</panel>

					<instance name="player_action_button"
						align="center" valign="top" width="3h" height="3h"
						x="-20h" y="3.5h"
						onmouseover="ShowWidget('ModSpectatorTip'); Trigger('ModSpectatorTipTrigger', Translate('game_lobby_referee_ctrl_tip', 'name', '') );"
						onmouseout="HideWidget('ModSpectatorTip');"
						onhide="HideWidget('ModSpectatorTip');"
						texture="refereeGM"
						onclick="PlaySound('/shared/sounds/ui/lobby/button_referee.wav'); Trigger('RefereeControlPage', 1); HideWidget('ModSpectatorTip');"
						watch="LobbyRefereeGM"
						ontriggerlua="self:SetVisible(AtoB(param0))"
						visible="0"
					/>

					<image texture="/ui/fe2/lobby/game_info.tga" align="center" y="0.3h" valign="bottom" width="174%" height="87@" noclick="1"
						resourcecontext="lobby" watch9="MainRegisterTextures"
						ontrigger9lua="ResourceManager.RegisterTexture('/ui/fe2/lobby/game_info.tga', 'lobby', self)"
					/>
					<panel name="game_lobby_fe2_matchinfo_stats" y="-16.0%" x="0.0h" width="60%" height="30%" valign="bottom" align="center" color="invisible" float="bottom" padding="-0.0h" noclick="1" visible="1" watch="GameLobby_StatsFade" ontrigger="If(param, FadeOut(300), FadeIn(300));">
						<panel height="12%" noclick="1">
							<label textalign="left" font="dyn_11" color="white" shadow="1" watch="LobbyGameInfo" ontrigger="SetText(Translate('game_lobby_match_name', 'name', param7));" noclick="1"/>
						</panel>

						<panel height="12%" noclick="1">
							<label textalign="left" font="dyn_11" color="white" shadow="1"	watch="LobbyGameInfo" ontrigger="If(param8 == -1, SetText(Translate('game_lobby_match_id_none')), Split(SetText(Translate('game_lobby_match_id', 'value', param8)), Trigger('UpdateLastMatchIDs', param8))); If(param8 == -1, SetColor('gray'), SetColor('white'));" noclick="1"/>
							<label textalign="left" x="25.0h" font="dyn_11" color="white" shadow="1" watch="LobbyGameInfo" ontrigger="SetText(Translate('game_lobby_ping', 'value', FtoA(param6, 0, 3, ' ')));" noclick="1"/>
						</panel>

						<panel height="12%" noclick="1">
							<label textalign="left" font="dyn_11" color="white" shadow="1" watch="LobbyGameInfo" ontrigger="SetText(Translate('game_lobby_host', 'host', param9));" noclick="1"/>
							<label textalign="left" x="25.0h" font="dyn_11" color="white" shadow="1" watch="LobbyGameInfo" ontrigger="SetText(Translate('game_lobby_num_players', 'count', param4, 'max', param5));" noclick="1"/>
						</panel>

						<panel height="12%" noclick="1">
							<label textalign="left" font="dyn_11" color="white" shadow="1" watch="LobbyGameInfo" ontrigger="SetText(Translate('game_lobby_server_name', 'name', param2));" noclick="1"/>
							<label textalign="left" x="25.0h" font="dyn_11" color="white" shadow="1" watch="LobbyGameInfo" ontrigger="SetText(Translate('game_lobby_version', 'version', param11));" noclick="1"/>
						</panel>

						<panel height="12%" noclick="1">
							<label textalign="left" font="dyn_11" color="white" shadow="1" watch="LobbyGameInfo" ontrigger="SetText(Translate('game_lobby_map', 'name', param3));" noclick="1"/>
						</panel>

						<label height="12%" textalign="left" font="dyn_11" color="white" shadow="1" watch="LobbyGameInfo" ontrigger="SetText(Translate('game_lobby_mode', 'mode', param0));" noclick="1"/>
						<label height="28%" textalign="left" font="dyn_11" color="white" shadow="1" wrap="true" watch="LobbyGameInfo" ontrigger="If(StringEquals(param12, 'botmatch'),
									SetText(''#Translate('game_lobby_options', 'options', param1)#', '#Translate('glb_options_bot_difficulty_'#param14#'')#''),
									SetText(Translate('game_lobby_options', 'options', param1))
								   );"
						noclick="1"/>

						<!-- Official (No Stats) label -->
						<panel x="0%" y="28%" width="15h" valign="bottom" align="left" height="3.0h" color="invisible" onload="SetVisible(false);" watch="LobbyNoStats" ontrigger="SetVisible(param);" noclick="1">
							<image y="0.25h" width="2.5h" height="2.5h" texture="/ui/icons/official_2.tga" />
							<label x="3h" width="100%" height="100%" textvalign="center" font="dyn_9" color="white" shadow="true" onload="SetText(Translate('general_mode_no_stats'));" noclick="1"/>
						</panel>

						<!-- Official (Stats) label -->
						<panel x="0%" y="28%" width="15h" valign="bottom" align="left" height="3.0h" color="invisible" onload="SetVisible(false);" watch="LobbyNoStats" ontrigger="SetVisible(!param);" noclick="1">
							<image y="0.10h" align="left" width="2.5h" height="2.5h" texture="/ui/icons/official.tga" />
							<label x="3h" width="100%" height="100%" textvalign="center" font="dyn_9" color="white" shadow="true" onload="SetText(Translate('general_mode_official'));" noclick="1"/>
						</panel>

						<!-- No Leavers label -->
						<panel y="28%" valign="bottom" width="25%" align="right" height="3.0h"  watch="LobbyNoLeavers" ontrigger="SetVisible(param);" noclick="1">
							<image x="-7%" y="0.10h" width="2.5h" align="left" height="2.5h" texture="/ui/icons/noleaver.tga" />
							<label x="25%" width="100%" height="100%" align="left" textvalign="center" font="dyn_9" color="white" shadow="true" watch="LobbyNoLeavers" ontrigger="SetText(Translate('general_mode_no_leavers'));" noclick="1"/>
						</panel>

						<!-- Private Game Option -->
						<panel y="28%" width="32%" valign="bottom" align="center" height="3.0h" color="invisible" noclick="1">
							<panel watch="LobbyStatus" ontrigger="SetVisible(param1); SetEnabled(param3);" noclick="1">
								<instance name="Noptions_checkbox" align="left" valign="center" font="dyn_9" onclick="If(GetValue() == 1, SetServerPrivateValue(1), SetServerPrivateValue(0));" label="gamelobby_private_button" watch="LobbyPrivate" ontrigger="SetButtonState(param);" />
							</panel>
							<panel watch="LobbyStatus" ontrigger="SetVisible(!param1); SetEnabled(param3);" noclick="true" passivechildren="true">
								<instance name="Noptions_checkbox" align="left" valign="center" font="dyn_9" onclick="If(GetValue() == 1, SetServerPrivateValue(1), SetServerPrivateValue(0));" label="gamelobby_private_button" watch="LobbyPrivate" ontrigger="SetButtonState(param);" />
							</panel>
							<instance name="tip_mark" tip_id="announce_tip" x="0.5h" width="1.8h" height="1.8h" valign="center" align="right" />
							<instance name="generic_tooltip_resizey" x="0" y="-2.5h" width="26h" align="right" valign="bottom" tip_id="announce_tip" title="gamelobby_private_tip_header" label="gamelobby_private_tip_text" />
						</panel>
					</panel>

					<!-- Player Stats EX NEW -->
					<panel name="game_lobby_fe2_matchinfo_stats_ex" y="-9.0%" x="0.0h" width="66%" height="38%" valign="bottom" padding="0" align="center" noclick="1" visible="false" watch="GameLobby_StatsFade" ontrigger="If(param, FadeIn(250), FadeOut(250));">
						<panel y="0%" width="101.5%" height="102%" align="center" valign="center" onload="BringToFront();" visible="true" watch="GameLobby_NewStats" ontrigger="if(param4, ShowWidget(), HideWidget());">
							<frame texture="/ui/frames/tooltip_bg.tga" color=".2 .2 .2 1" borderthickness=".2h" watch="GameLobby_StatsFade" ontrigger="Fade(0.2, 0.9, 1250);"/>
							<frame texture="/ui/frames/roundframe.tga" color=".3 .3 .3 .75" borderthickness=".2h" />
							<label y="0" width="100%" height="100%" align="center" textalign="center" textvalign="center" font="dyn_16" color="1 1 1 1" shadow="true" shadowcolor="0 0 0 1" shadowoffset="2.0" content="" watch="GameLobby_NewStats" ontrigger="SetColor(param3); SetText(param2 # Translate('_first_game')); HideWidget(); SleepWidget(750, 'FadeIn(1000);');" />
						</panel>
						<panel y="0.0%" x="0.0h" width="100%" height="100%" valign="center" float="right" align="center" padding="0" >
							<!-- Stats -->
							<panel width="44%" float="bottom" noclick="true" padding="0.1h" y="-0.5h">

								<label width="100%" height="3.0h" content="--" font="dyn_14" shadow="true" color="#DFDFDF" align="center" textalign="left" textvalign="center" watch="GameLobby_NewStats" ontrigger="SetText(param2); SetColor(param3);"/>

								<panel height="-2.0h" y="12.5%" noclick="true" align="center">
									<label shadow="true" font="dyn_12" width="50%" color="#3abde7" align="left" valign="center" textvalign="center" textalign="left" content="globby_quick_stats" />
									<label x="-5%" shadow="true" font="dyn_12" width="50%" color="1 1 1 1" align="right" valign="center" textvalign="center" textalign="right" content="(0%) 0\\n0\\n0\\n0.0\\n0.0\\n0.0\\n0.0\\n0.0\\n0.0" watch="GameLobby_NewStats" ontrigger="SetText(FormatStringNewline(param1));"/>
								</panel>

							</panel>
							<!-- / Stats -->

							<!-- Recent Matches -->
							<panel width="36%" noclick="true" >
								<panel width="96%" height="96%" y="0.8h" align="center" valign="center">
									<frame texture="/ui/frames/tooltip_bg.tga" color="0 0 0 .5" borderthickness=".6h" />
									<frame texture="/ui/frames/roundframe.tga" color=".3 .3 .3 1" borderthickness=".6h" />

									<panel y="2%" width="-4%" height="11%" align="center">
										<frame texture="/ui/frames/tooltip_bg.tga" color="#5a76b2" borderthickness=".4h" />
										<frame texture="/ui/frames/roundframe.tga" color=".3 .3 .3 1" borderthickness=".4h" />
										<label y="-1" width="92%" height="100%" align="center" textalign="left" textvalign="center" font="dyn_9" color="1 1 1 1" shadow="true" content="game_lobby_quickstats_recent" />
									</panel>

									<panel y="-1%" height="-15%" width="94%" align="center" valign="bottom" noclick="1" float="bottom">
										<instance name="quickstat_recent" ID="1" />
										<instance name="quickstat_recent" ID="2" />
										<instance name="quickstat_recent" ID="3" />
										<instance name="quickstat_recent" ID="4" />
										<instance name="quickstat_recent" ID="5" />
										<instance name="quickstat_recent" ID="6" />
										<instance name="quickstat_recent" ID="7" />
									</panel>

								</panel>
							</panel>
							<!-- / Recent Matches -->

							<!-- Favorites -->
							<panel width="20%" noclick="true">
								<panel width="96%" height="96%" y="0.8h" align="center" valign="center">
									<frame texture="/ui/frames/tooltip_bg.tga" color="0 0 0 .5" borderthickness=".6h" />
									<frame texture="/ui/frames/roundframe.tga" color=".3 .3 .3 1" borderthickness=".6h" />
									<panel y="2%" width="-4%" height="11%" align="center">
										<frame texture="/ui/frames/tooltip_bg.tga" color="#dc332b" borderthickness=".4h" />
										<frame texture="/ui/frames/roundframe.tga" color=".3 .3 .3 1" borderthickness=".4h" />
										<label y="-1" width="92%" height="100%" align="center" textalign="left" textvalign="center" font="dyn_9" color="1 1 1 1" shadow="true" content="game_lobby_quickstats_favorite" />
									</panel>
									<panel y="-1%" height="-15%" width="90%" align="center" valign="bottom" noclick="1" float="bottom">
										<instance name="quickstat_favorite" ID="1" color="#FFEE00FF" />
										<instance name="quickstat_favorite" ID="2" color="#DD8805FF" />
										<instance name="quickstat_favorite" ID="3" color="#BB6610FF" />
										<instance name="quickstat_favorite" ID="4" color="#993315FF" />
										<instance name="quickstat_favorite" ID="5" color="#771120FF" />
									</panel>
								</panel>
							</panel>
							<!-- Favorites -->
						</panel>
					</panel>

					<!-- Player Stats EX NEW floater -->
					<panel watch1="GamePhase" ontrigger1="if(param0 gt 1, set('QuickStats_Fade', 1), split(set('QuickStats_Fade', 0), HideWidget()));" onload="ForceToFront(); createbool('QuickStats_Fade', 0);"
					name="game_lobby_fe2_matchinfo_stats_ex_floater" y="-20%" x="0" width="45h" height="22h" valign="center" padding="0" align="center" noclick="1" visible="false" watch0="GameLobby_StatsFade" ontrigger0="if(QuickStats_Fade, If(param, FadeIn(250), FadeOut(250)));">
					<frame texture="/ui/frames/tooltip_bg.tga" color="0 0 0 .8" borderthickness=".6h" />
					<frame texture="/ui/frames/roundframe.tga" color=".7 .6 .3 1" borderthickness=".6h" />
					<panel y="0%" width="97%" height="97%" align="center" valign="center" onload="BringToFront();" visible="true" watch="GameLobby_NewStats" ontrigger="if(param4, ShowWidget(), HideWidget());">
						<frame texture="/ui/frames/tooltip_bg.tga" color=".2 .2 .2 1" borderthickness=".2h" watch="GameLobby_StatsFade" ontrigger="Fade(0.2, 0.9, 1250);"/>
						<label y="0" width="100%" height="100%" align="center" textalign="center" textvalign="center" font="dyn_16" color="1 1 1 1" shadow="true" shadowcolor="0 0 0 1" shadowoffset="2.0" content="" watch="GameLobby_NewStats" ontrigger="SetColor(param3); SetText(param2 # Translate('_first_game')); HideWidget(); SleepWidget(750, 'FadeIn(1000);');" />
					</panel>
					<panel valign="center" float="right" padding="0" align="center" noclick="1"  width="97%" height="97%">
						<!-- Stats -->
						<panel width="44%" float="bottom" noclick="true">

							<label width="100%" height="3.0h" content="--" font="dyn_14" shadow="true" color="#DFDFDF" align="center" textalign="left" textvalign="center" watch="GameLobby_NewStats" ontrigger="SetText(param2); SetColor(param3);"/>

							<panel noclick="true" align="center" valign="top" y="1h">
								<label shadow="true" font="dyn_12" width="50%" color="#3abde7" align="left" valign="center" textvalign="center" textalign="left" content="globby_quick_stats" />
								<label x="-5%" shadow="true" font="dyn_12" width="50%" color="1 1 1 1" align="right" valign="center" textvalign="center" textalign="right" content="(0%) 0\\n0\\n0.0\\n0.0\\n0.0\\n0.0\\n0.0\\n0.0" watch="GameLobby_NewStats" ontrigger="SetText(FormatStringNewline(param1));"/>
							</panel>

						</panel>
						<!-- / Stats -->

						<!-- Recent Matches -->
						<panel width="36%" noclick="true">
							<panel width="96%" height="96%" align="center" valign="center">
								<frame texture="/ui/frames/tooltip_bg.tga" color="0 0 0 .5" borderthickness=".6h" />
								<frame texture="/ui/frames/roundframe.tga" color=".3 .3 .3 1" borderthickness=".6h" />

								<panel y="2%" width="-4%" height="11%" align="center">
									<frame texture="/ui/frames/tooltip_bg.tga" color="#5a76b2" borderthickness=".4h" />
									<frame texture="/ui/frames/roundframe.tga" color=".3 .3 .3 1" borderthickness=".4h" />
									<label y="-1" width="92%" height="100%" align="center" textalign="left" textvalign="center" font="dyn_9" color="1 1 1 1" shadow="true" content="game_lobby_quickstats_recent" />
								</panel>

								<panel y="-1%" height="-15%" width="94%" align="center" valign="bottom" noclick="1" float="bottom">
									<instance name="quickstat_recent" ID="1" />
									<instance name="quickstat_recent" ID="2" />
									<instance name="quickstat_recent" ID="3" />
									<instance name="quickstat_recent" ID="4" />
									<instance name="quickstat_recent" ID="5" />
									<instance name="quickstat_recent" ID="6" />
									<instance name="quickstat_recent" ID="7" />
								</panel>

							</panel>
						</panel>
						<!-- / Recent Matches -->

						<!-- Favorites -->
						<panel width="20%" noclick="true">
							<panel width="96%" height="96%" align="center" valign="center">
								<frame texture="/ui/frames/tooltip_bg.tga" color="0 0 0 .5" borderthickness=".6h" />
								<frame texture="/ui/frames/roundframe.tga" color=".3 .3 .3 1" borderthickness=".6h" />
								<panel y="2%" width="-4%" height="11%" align="center">
									<frame texture="/ui/frames/tooltip_bg.tga" color="#dc332b" borderthickness=".4h" />
									<frame texture="/ui/frames/roundframe.tga" color=".3 .3 .3 1" borderthickness=".4h" />
									<label y="-1" width="92%" height="100%" align="center" textalign="left" textvalign="center" font="dyn_9" color="1 1 1 1" shadow="true" content="game_lobby_quickstats_favorite" />
								</panel>
								<panel y="-1%" height="-15%" width="90%" align="center" valign="bottom" noclick="1" float="bottom">
									<instance name="quickstat_favorite" ID="1" color="#FFEE00FF" />
									<instance name="quickstat_favorite" ID="2" color="#DD8805FF" />
									<instance name="quickstat_favorite" ID="3" color="#BB6610FF" />
									<instance name="quickstat_favorite" ID="4" color="#993315FF" />
									<instance name="quickstat_favorite" ID="5" color="#771120FF" />
								</panel>
							</panel>
						</panel>
						<!-- Favorites -->
					</panel>
					</panel>

					<panel height="7%" y="-2%" valign="center" width="61%" align="center" noclick="1" >
						<panel width="19%"  align="left" >
							<label
								textalign="center" textvalign="center"
								font="dyn_14" color="yellow" shadow="true"
								watch="LobbyTeamInfo1"
								ontrigger="SetText(FtoP(param3, 0));"
								content=""
								noclick="1"
							/>
						</panel>

						<panel width="19%"  align="right"  noclick="1">
							<label
								textalign="center" textvalign="center"
								font="dyn_14" color="yellow" shadow="true"
								watch="LobbyTeamInfo2"
								ontrigger="SetText(FtoP(param3, 0));"
								content=""
								noclick="1"
							/>
						</panel>
					</panel>

					<!-- Balance Button -->
					<panel
						y="-1.2h" x="-0.2h"
						width="12.5h" height="6.25h"
						align="center" valign="center"
						texture="lobby/balance_button_frame.tga"
						watch="LobbyStatus"
						ontrigger="SetVisible(param1);"
					>
						<instance name="button2" button_name="game_lobby_button_Balance"
							width="81%" height="45%"
							y="-.7"
							align="center"
							valign="center"
							enabled="true"
							label="game_lobby_balance_btn"
							font="dyn_12" borderthickness="1.6h"
							onclick="RequestBalanceTeams();"
						/>
					</panel>

					<instance name="button2" button_name="game_lobby_cancel_game"
						x="17.0%" y="-1.8%"
						width="17.2%" height="5.8%"
						align="center"
						valign="bottom"
						enabled="true"
						label="general_cancel"
						font="dyn_12" borderthickness="1.6h"
						watch="LobbyStatus"
						ontrigger="SetEnabled(param1);"
						watch1="LobbyCountDown"
						ontrigger1="SetVisible(param0 != -1);"
						onclick="RequestMatchCancel();"
					/>

					<instance name="button2" button_name="game_lobby_start_game"
						x="17.0%" y="-1.8%"
						width="17.2%" height="5.8%"
						align="center"
						valign="bottom"
						enabled="false"
						label="gamelobby_start_game_button"
						font="dyn_12" borderthickness="1.6h"
						watch="LobbyStatus"
						ontrigger="SetEnabled(param1 and param4);ShowWidget('game_lobby_start_game');"
						watch1="LobbyCountDown"
						ontrigger1="If(param0 == -1, SetVisible(true), SetVisible(false));"
						onclick="
							RequestMatchStart();
							Trigger('RefereeControlPage', 0);
							"
					/>

					<!-- Disconnect/Disband -->
					<instance name="button2" button_name="game_lobby_button_disconnect"
						x="-17.0%" y="-1.8%"
						width="17.2%" height="5.8%"
						align="center"
						valign="bottom"
						enabled="true"
						font="dyn_12" borderthickness="1.6h"
						labelwatch="LobbyStatus"
						labelontrigger="If(param1, SetText(Translate('gamelobby_disconnect_button')), SetText(Translate('gamelobby_disconnect_button')));"
						watch="LobbyStatus"
						ontrigger="If(param1, SetOnclick('PlaySound(\'/shared/sounds/ui/button_click_06.wav\'); Call(\'disband_confirm\', \'FadeIn(250);\');'), SetOnclick('PlaySound(\'/shared/sounds/ui/button_click_06.wav\'); Call(\'disconnect_confirm\', \'FadeIn(250);\');'))"
					/>
					<!-- this button will always exist on this screen, so attaching the sound here -->
				</panel>

				<!-- Invite Bot -->
				<panel name="glb_invite_bot" width="42h" height="22.8h" y="-0.8h" align="center" valign="bottom" noclick="true" visible="0"
					watch="GamePhase" ontriggerlua="UIManager.GetInterface('main'):HoNGameLobbyF('GamePhase', param0)"
					watch2="LobbyGameInfo" ontrigger2lua="UIManager.GetInterface('main'):HoNGameLobbyF('GameInfo', param13, param12)">
					<frame texture="/ui/frames/rounded_bg_solid.tga" borderthickness="0.6h" color="0 0 0 1" />
					<frame texture="/ui/frames/roundframe.tga" color="#183042" borderthickness="0.6h" />

					<panel y="0.7h" width="-1.4h" height="2.2h" align="center" noclick="true">
						<label name="glb_title" height="100%" font="dyn_14" color="#ffaa00" content="mm3_coop_invitebot" />
						<label name="glb_heroname" height="100%" visible="0" font="dyn_14" color="#ffaa00" content="Hero Name" />

						<instance name="button2" button_name="buttonToggleBotDifficultyVis"
							width="12.6h" height="2.2h"
							valign="center" align="right"
							x="-3.0h"
							label="mm3_bot_difficulty" font="dyn_10"
							onclicklua="if GetWidget('glb_bot_difficulty'):IsVisible() then
											GetWidget('glb_bot_difficulty'):FadeOut(150)
											GetWidget('glb_add_bot_close'):SetVisible(1)
											GetWidget('glb_add_botdiff_close'):SetVisible(0)
										else
											GetWidget('glb_bot_difficulty'):FadeIn(150)
											GetWidget('glb_add_bot_close'):SetVisible(0)
											GetWidget('glb_add_botdiff_close'):SetVisible(1)
										end"
						/>
						<instance name="closex_btn" id="glb_add_bot_close" align="right" valign="center" onclick="Call('glb_invite_bot', 'FadeOut(100)');" />
						<instance name="closex_btn" visible="false" id="glb_add_botdiff_close" align="right" valign="center" onclicklua="GetWidget('glb_bot_difficulty'):FadeOut(150)
											GetWidget('glb_add_bot_close'):SetVisible(1)
											GetWidget('glb_add_botdiff_close'):SetVisible(0)" />
					</panel>

					<panel name="glb_botpicker_left" y="2.9h" width="-1.4h" height="-4.0h" align="center" padding="1.0h"  noclick="true">
						<panel height="6.0h" visible="1" align="center" clip="1">
							<label y="0.3h" name="glb_generic" wrap="true" font="dyn_12" color="1 1 1 1" content="mm3_coop_repickbot_desc" />
							<label name="glb_botname" x="0.5h" wrap="true" font="dyn_11" color="#37b2d9" visible="0" content="Bot Name" />
							<label name="glb_desc" x="0.5h" wrap="true" y="2.3h" font="dyn_11" color="1 1 1 1" visible="0" content="Bot Desc" />
						</panel>
						<!-- bot difficulty slider -->
						<panel name="glb_bot_difficulty" y="0.6h" width="100%" height="6.0h" visible="0">
							<frame texture="/ui/frames/togglebox.tga" borderthickness="1.3h" noclick="true"/>
							<label name="glb_bot_difficulty_label" x="0.6h" textalign="center" textvalign="bottom" width="30%" y="-0.6h" font="dyn_12" color=".8 .8 .8 1" shadow="1"
								onevent1="SetText(Translate('general_easy')); SetColor('#00FF2F');"
								onevent2="SetText(Translate('general_medium')); SetColor('#FF9D00');"
								onevent3="SetText(Translate('general_hard')); SetColor('#FF0000');"/>
							<label y="0.8h" font="dyn_14" x="0.6h" color="1 1 1 1" width="30%" textalign="center" content="mm3_bot_difficulty" />
							<slider
								name="glb_bot_difficulty_slider"
								width="60%" x="35%" align="left"
								slotwidth="-1%" slotheight="0.8h"
								slotcolor="#00FF2F"
								handlewidth="40@" handleheight="40%"
								handlecolor="1 1 1 1"
								minvalue="1" maxvalue="3"
								step="1"
								cvar="g_botDifficulty"
								texture="/ui/info/slider_white.tga"
								onselect="PlaySound('/shared/sounds/ui/button_over_02.wav');"
								onevent1lua="GetWidget('glb_bot_difficulty_slider_slot'):SetColor('#00FF2F')"
								onevent2lua="GetWidget('glb_bot_difficulty_slider_slot'):SetColor('#FFBF00')"
								onevent3lua="GetWidget('glb_bot_difficulty_slider_slot'):SetColor('#FF0000')"
								onchangelua="	GetWidget('glb_bot_difficulty_label'):DoEventN(self:GetValue())
												self:DoEventN(self:GetValue())
												SetBotDifficulty(self:GetValue())"
							/>
						</panel>

						<!-- left side bot hero icons -->
						<panel y="7.0h" width="95%" height="-7.0h" align="center">
							<panel height="5.6h" float="right" padding="0.5h" sticky="1" stickytoinvis="0">
								<instance name="glb_botpickplate" id="1"/>
								<instance name="glb_botpickplate" id="2"/>
								<instance name="glb_botpickplate" id="3"/>
								<instance name="glb_botpickplate" id="4"/>
								<instance name="glb_botpickplate" id="5"/>
								<instance name="glb_botpickplate" id="6"/>
							</panel>
							<panel height="5.6h" y="6.1h" float="right" padding="0.5h" sticky="1" stickytoinvis="0">
								<instance name="glb_botpickplate" id="7"/>
								<instance name="glb_botpickplate" id="8"/>
								<instance name="glb_botpickplate" id="9"/>
								<instance name="glb_botpickplate" id="10"/>
								<instance name="glb_botpickplate" id="11"/>
								<instance name="glb_botpickplate" id="12"/>
							</panel>
							<scrollbar
								name="glb_bot_scrollbar"
								align="right"
								width="1.8h"
								scrollbarsize="1.7h"
								handlewidth="1.7h"
								handleheight="1.7h"
								texture="/ui/info/combobox.tga"
								scrollbarplaceholder="true"
								minvalue="0"
								maxvalue="1"
								step="1"
								value="0"
								vertical="true"
								slotwidth="0.6h" slotheight="1"
								onevent1="SetValue(GetValue+1);"
								onevent0="SetValue(GetValue-1);"
								onslidelua="UIManager.GetInterface('main'):HoNGameLobbyF('BotListSlide', self, self:GetValue())"
								/>
							<panel processonlyscroll="1" hover="false"
								onmousewheelup="Call('glb_bot_scrollbar', 'DoEvent(0);');"
								onmousewheeldown="Call('glb_bot_scrollbar', 'DoEvent(1);');"
							/>
						</panel>
					</panel>
				</panel>

				<!-- Repick - Multibot panel -->
				<panel name="public_games_repick_multibot" width="42h" height="22.8h" y="-0.8h" align="center" valign="bottom" noclick="true" visible="0">
					<frame texture="/ui/frames/rounded_bg_solid.tga" borderthickness="0.6h" color="0 0 0 1" />
					<frame texture="/ui/frames/roundframe.tga" color="#183042" borderthickness="0.6h" />

					<panel y="0.7h" width="-1.4h" height="2.2h" align="center" noclick="true">
						<label name="glb_mp_hero" height="100%" font="dyn_14" color="#ffaa00" content="mm3_coop_repickbot_title" />
						<instance name="closex_btn" align="right" valign="center" onclick="Call('public_games_repick_multibot', 'FadeOut(100)'); HideWidget('hero_info');" />
					</panel>

					<panel name="glb_multibotpicker" y="2.9h" width="-1.4h" height="-4.0h" align="center" float="bottom" padding="1.0h"  noclick="true">
						<panel height="3.0h" visible="1" align="center" clip="1">
							<label y="0.3h" wrap="true" font="dyn_12" color="1 1 1 1" content="mm3_coop_multiplebots_pick" />
						</panel>

						<!-- left side bot list -->
						<panel grow="1" width="100%" noclick="1">
							<panel width="-1.6h" float="bottom" name="glb_multibotlist_left">
								<instance name="glb_multibotplate" id="1" height="6.1h"/>
								<instance name="glb_multibotplate" id="2" height="6.1h"/>
								<!-- <instance name="glb_multibotplate" id="3" height="6.1h"/> -->
							</panel>
							<scrollbar
								name="glb_multibot_scrollbar"
								height="12.2h"
								align="right"
								width="1.5h"
								scrollbarsize="1.4h"
								handlewidth="1.4h"
								handleheight="1.4h"
								texture="/ui/info/combobox.tga"
								scrollbarplaceholder="true"
								minvalue="0"
								maxvalue="1"
								step="1"
								value="0"
								vertical="true"
								slotwidth="0.6h" slotheight="1"
								onevent1="SetValue(GetValue+1);"
								onevent0="SetValue(GetValue-1);"
								onslidelua="UIManager.GetInterface('main'):HoNGameLobbyF('MultiBotListSlide', self, self:GetValue())"
								/>
							<panel processonlyscroll="1" hover="false"
								onmousewheelup="Call('glb_multibot_scrollbar', 'DoEvent(0);');"
								onmousewheeldown="Call('glb_multibot_scrollbar', 'DoEvent(1);');"
							/>
						</panel>
					</panel>
				</panel>
					
				<panel name="referee_control" visible="0" y="6h" width="62h" height="40h" valign="top" align="center"
					watch="RefereeControlPage"
					ontrigger="SetVisible(param);"
				>
					<panel name="referee_Control" visible="true" color="invisible"
						watch="RefereeControlPage"
						ontriggerlua="UIManager.GetInterface('webpanel'):HoNWebPanelF('ShowRefereeWebPage', self)"
					>
					</panel>
					<instance name="closex_btn" id="bt_close_referee" align="right" valign="top" onclick="Call('referee_control', 'FadeOut(100)');" />
				</panel>

			</panel>

			<panel watch="GamePhase" ontrigger="setVisible(param0 gt 1);" noclick="1">
				<!-- Hero list -->
				<panel
					name="game_lobby_picker_fe2"
					y="-110h"
					width="62h" height="50h"
					color="0 0 0 .2"
					align="center"
					noclick="true"
					visible="0"
				>
					<!-- Background -->
					<panel align="center" valign="center" color="black" width="61.5h" height="49h"/>

					<!-- RD mode  -->
					<panel
						visible="0"
						name="rd_list"
						color="invisisble"
						x="7.0h" y="0.8h"
						width="78%"
						float="bottom" padding="2h"
						group="lobby_hero_picker_parents"
					>
						<anchor x="4.1h" y="2.2h"/>
						<instance name="hero_rd_row" row="0" gameMode="rd" />
						<instance name="hero_rd_row" row="1" gameMode="rd" />
						<instance name="hero_rd_row" row="2" gameMode="rd" />
						<instance name="hero_rd_row" row="3" gameMode="rd" />
						<instance name="hero_rd_row" row="4" gameMode="rd" />
					</panel>
					<panel visible="0" y="-0.31%" width="234@" height="117%" align="center" valign="center" noclick="1" color="white"
						resourcecontext="lobby" watch9="MainRegisterTextures"
						ontrigger9lua="ResourceManager.RegisterTexture('/ui/fe2/lobby/hero_picker.tga', 'lobby', self)"
						group="lobby_hero_picker_parents"
					/>

					<!-- FP mode  -->
					<panel
						visible="0"
						name="fp_list"
						color="invisisble"
						x="7.0h" y="0.8h"
						width="78%"
						float="bottom" padding="2h"
						group="lobby_hero_picker_parents"
					>
						<anchor x="4.1h" y="2.2h"/>
						<instance name="hero_rd_row" row="0" gameMode="fp" />
						<instance name="hero_rd_row" row="1" gameMode="fp" />
						<instance name="hero_rd_row" row="2" gameMode="fp" />
						<instance name="hero_rd_row" row="3" gameMode="fp" />
						<instance name="hero_rd_row" row="4" gameMode="fp" />
					</panel>
					<panel visible="0" y="-0.31%" width="234@" height="117%" align="center" valign="center" noclick="1" color="white"
						resourcecontext="lobby" watch9="MainRegisterTextures"
						ontrigger9lua="ResourceManager.RegisterTexture('/ui/fe2/lobby/hero_picker.tga', 'lobby', self)"
						group="lobby_hero_picker_parents"
					/>

					<!-- Normal mode, "all heroes" disabled  -->
					<panel
						visible="0"
						name="normal_list"
						color="invisisble"
						x="-0.3h" y="0.8h"
						width="78%"
						group="lobby_hero_picker_parents"
					>
						<panel y="0.5h" float="bottom" padding="1.2h">
							<instance name="hero_half_list_group"  gameMode="normal" team="-1" group="0" team_offset="0" group_size="15" row_size="8" />
							<instance name="hero_half_list_group"  gameMode="normal" team="-1" group="1" team_offset="0" group_size="15" row_size="8" />
							<instance name="hero_half_list_group"  gameMode="normal" team="-1" group="2" team_offset="0" group_size="15" row_size="8" />
						</panel>
					</panel>

					<!-- BD -->
					<panel
						visible="0"
						name="banning_draft_list"
						color="invisisble"
						x="7.0h" y="0.8h"
						width="78%"
						group="lobby_hero_picker_parents"
					>
						<image ontrigger9lua="ResourceManager.RegisterTexture('/ui/fe2/lobby/attribute_separator_bar.tga', 'lobby', self)" resourcecontext="lobby" watch9="MainRegisterTextures" y="25.4%" width="121%" height="12.5@" align="center"/>
						<image ontrigger9lua="ResourceManager.RegisterTexture('/ui/fe2/lobby/attribute_separator_bar.tga', 'lobby', self)" resourcecontext="lobby" watch9="MainRegisterTextures" y="58.2%" width="121%" height="12.5@" align="center"/>

						<panel color="invisible" float="bottom" padding="0.6h" visible="1">
							<anchor x="3.3h" y="0.2h"/>
							<instance name="hero_bd_row"  gameMode="bd"  row="0"/>
							<instance name="hero_bd_row"  gameMode="bd"  row="1"/>
							<anchor x="3.3h" y="16.5h"/>
							<instance name="hero_bd_row"  gameMode="bd"  row="2"/>
							<instance name="hero_bd_row"  gameMode="bd"  row="3"/>
							<anchor x="3.3h" y="33.2h"/>
							<instance name="hero_bd_row"  gameMode="bd"  row="4"/>
							<instance name="hero_bd_row"  gameMode="bd"  row="5"/>
						</panel>
					</panel>
					<panel name="banning_draft_list_bg" visible="0" y="-0.31%" width="234@" height="117%" align="center" valign="center" noclick="1" color="white"
						resourcecontext="lobby" watch9="MainRegisterTextures"
						ontrigger9lua="ResourceManager.RegisterTexture('/ui/fe2/lobby/hero_picker.tga', 'lobby', self)"
						group="lobby_hero_picker_parents"
					/>

					<!-- SD -->
					<panel
						name="sd_list"
						visible="0"
						x="7.1h" y="0.8h"
						width="77.2%"
						float="bottom" padding="1.5%"
						group="lobby_hero_picker_parents"
					>
						<instance name="sd_hero_triad"  gameMode="sd"   slot="0"/>
						<instance name="sd_hero_triad"  gameMode="sd"   slot="1"/>
						<instance name="sd_hero_triad"  gameMode="sd"   slot="2"/>
						<instance name="sd_hero_triad"  gameMode="sd"   slot="3"/>
						<instance name="sd_hero_triad"  gameMode="sd"   slot="4"/>
					</panel>
					<panel name="sd_list_bg" visible="0" y="-0.31%" width="234@" height="117%" align="center" valign="center" noclick="1" color="white"
						resourcecontext="lobby" watch9="MainRegisterTextures"
						ontrigger9lua="ResourceManager.RegisterTexture('/ui/fe2/lobby/hero_picker.tga', 'lobby', self)"
						group="lobby_hero_picker_parents"
					/>

					<!-- Full Hero List, used by ar  -->
					<panel
						visible="0"
						name="ar_list"
						group="lobby_hero_picker_parents"
					>
						<image width="23%" height="116%" y="-9%" align="center"
							resourcecontext="lobby" watch9="MainRegisterTextures"
							ontrigger9lua="ResourceManager.RegisterTexture('/ui/fe2/lobby/center_post_skinny.tga', 'lobby', self)"
						/>
						<instance name="hero_full_list" gameMode="ar"  x="0.8h" team="0" team_offset="24" group_size="48" row_size="8" textalign="left" />
						<instance name="hero_full_list" gameMode="ar"  x="32.1h" team="1" team_offset="24" group_size="48" row_size="8" textalign="right" />
					</panel>

					<!-- Full Hero List with filter, used by AP/LP  -->
					<panel
						visible="0"
						name="ap_list"
						onshowlua="Game_Lobby:ResetFilters()"
						group="lobby_hero_picker_parents"
					>
						<image texture="/ui/fe2/lobby/center_post_skinny.tga" x="0.1h" width="23%" height="102%" y="3%" align="center"
							resourcecontext="lobby" watch9="MainRegisterTextures"
							ontrigger9lua="ResourceManager.RegisterTexture('/ui/fe2/lobby/center_post_skinny.tga', 'lobby', self)"
						/>

						<!-- heroes -->
						<if condition="releaseStage_test" >
							<instance name="hero_full_list_compact_v2" gameMode="ap" x="0.5h" team="0" team_offset="27" group_size="54" row_size="9" textalign="left" othertextalign="right" teamlabel="general_legion" labelx="0.5h" otherlabelx="-0.8h" />
							<instance name="hero_full_list_compact_v2" gameMode="ap" x="32.1h" team="1" team_offset="27" group_size="54" row_size="9" textalign="right" othertextalign="left" teamlabel="general_hellbourne" labelx="-0.8h" otherlabelx="0.5h" hflip="1" />
						</if>
						<if condition="!releaseStage_test">
							<instance name="hero_full_list_compact_v2" gameMode="ap" x="0.5h" team="0" team_offset="27" group_size="54" row_size="9" textalign="left" othertextalign="right" teamlabel="general_legion" labelx="0.5h" otherlabelx="-0.8h" />
							<instance name="hero_full_list_compact_v2" gameMode="ap" x="32.1h" team="1" team_offset="27" group_size="54" row_size="9" textalign="right" othertextalign="left" teamlabel="general_hellbourne" labelx="-0.8h" otherlabelx="0.5h" hflip="1" />
						</if>
						<!-- end of heroes -->
					</panel>
					
					<!-- Gated Mode List -->
					<panel
						visible="0"
						name="gated_list"
						color="0 0 0 1"
						onshowlua="Game_Lobby:ResetFilters()"
						group="lobby_hero_picker_parents"
					>
						<!-- search bar -->
						<panel x="45.8h" y="8.0h" width="15.2h" height="2.1h" noclick="1">
							<panel y="1" x="1" noclick="1">
								<frame texture="/ui/frames/roundframe.tga" borderthickness="0.4h" color=".4 .4 .4 1" noclick="true" />
								<textbox name="picker_filter_textbox2" color="invisible" width="-0.5h" x="0.1h" y="1" height="-0.2h" valign="center" align="center" font="dyn_10" textcolor=".8 .8 .8 1"
									onchangelua="Game_Lobby:UpdateFilterSearchString(self, self:GetValue())"
									onlosefocuslua="if (self:GetValue() == '') then self:SetInputLine(Translate('filter_search_empty')) end"
									onfocuslua="if (self:GetValue() == Translate('filter_search_empty')) then self:SetInputLine('') end"
									onshowlua="if (self:GetValue() == '') then self:SetInputLine(Translate('filter_search_empty')) end"
								/>
							</panel>
							<panel watch="ViewingStreaming" ontriggerlua="self:SetVisible(AtoB(param))"/>
						</panel>
						
						<image texture="/ui/fe2/lobby/center_post_skinny.tga" x="0.1h" width="23%" height="102%" y="3%" align="center"
							resourcecontext="lobby" watch9="MainRegisterTextures"
							ontrigger9lua="ResourceManager.RegisterTexture('/ui/fe2/lobby/center_post_skinny.tga', 'lobby', self)"
						/>
						
						<panel width="100%" height="12.5@" y="0.1h" align="center" noclick="true">
							<image noclick="true"
								resourcecontext="lobby" watch9="MainRegisterTextures"
								ontrigger9lua="ResourceManager.RegisterTexture('/ui/fe2/lobby/lp_bar.tga', 'lobby', self)"
							/>
							<image noclick="true" align="center"
								resourcecontext="lobby" watch9="MainRegisterTextures"
								ontrigger9lua="ResourceManager.RegisterTexture('/ui/fe2/lobby/gated_title.tga', 'lobby', self)"
							/>
							<panel y="-1%" width="50%" height="50%" align="center" valign="center" noclick="true">
								<label height="50%" valign="top" textvalign="center" textalign="center" font="dyn_16" color="#ffd600" outline="true" content="general_mode_gated" nolcick="true" />
								<label height="50%" valign="bottom" textvalign="center" textalign="center" font="dyn_12" color=".8 .8 .8 1" outline="true" content="game_lobby_gated_tagline" nolcick="true" />
							</panel>
						</panel>
						<panel width="100%" height="-15.5@" valign="bottom" noclick="true">
							<instance name="hero_gated_list" gameMode="gt" y="0" x="0.6h" team="0" team_offset="27" group_size="54" row_size="9" align="left" textalign="left" />
							<instance name="hero_gated_list" gameMode="gt" y="0" x="32.0h" team="1" team_offset="27" group_size="54" row_size="9" align="left" textalign="left" />
						</panel>
					</panel>

					<!-- Full Hero List, used by banning pick  -->
					<panel
						visible="0"
						name="bp_list"
						group="lobby_hero_picker_parents"
					>
						<image width="23%" height="116%" y="-9%" align="center"
							resourcecontext="lobby" watch9="MainRegisterTextures"
							ontrigger9lua="ResourceManager.RegisterTexture('/ui/fe2/lobby/center_post_skinny.tga', 'lobby', self)"
						/>
						<instance name="hero_full_list" gameMode="bp"  x="0.8h" team="0" team_offset="24" group_size="48" row_size="8" textalign="left" />
						<instance name="hero_full_list" gameMode="bp"  x="32.1h" team="1" team_offset="24" group_size="48" row_size="8" textalign="right" />
					</panel>

					<!-- Locking Pick List - Compact full hero list with locking slots at top
						- Currently has 6 slots instanced. 'lp_slot_container' has a set width in order to center those 6. If the slots change, it will need to grow, or some solution that Ben approves of.
					-->
					<panel
						visible="0"
						name="lp_list"
						color="0 0 0 1"
						group="lobby_hero_picker_parents"
					>
						<panel width="100%" height="12.5@" y="0.1h" align="center" noclick="true">
							<!-- Color indicator, SetColor to the user that is currently picking lock -->
							<image name="lp_bar_color" noclick="true" color="#0042ff"
								resourcecontext="lobby" watch9="MainRegisterTextures"
								ontrigger9lua="ResourceManager.RegisterTexture('/ui/fe2/lobby/lp_bar_color.tga', 'lobby', self)"
							/>
							<image noclick="true"
								resourcecontext="lobby" watch9="MainRegisterTextures"
								ontrigger9lua="ResourceManager.RegisterTexture('/ui/fe2/lobby/lp_bar.tga', 'lobby', self)"
							/>

							<panel name="lp_slot_container" width="91%" float="right" padding="0" align="center" noclick="true">
								<instance name="lp_slot" gameMode="lp"  index="0" />
								<instance name="lp_slot" gameMode="lp" index="1" />
								<instance name="lp_slot" gameMode="lp" index="2" />
								<instance name="lp_slot" gameMode="lp" index="3" />
								<instance name="lp_slot" gameMode="lp" index="4" />
								<instance name="lp_slot" gameMode="lp" index="5" />
							</panel>

						</panel>
						<instance name="hero_full_list_micro" gameMode="lp" x="0.8h" team="0" team_offset="24" group_size="48" row_size="8" textalign="left" />
						<instance name="hero_full_list_micro" gameMode="lp" x="31.5h" team="1" team_offset="24" group_size="48" row_size="8" textalign="right" />
					</panel>

					

					<!-- SP -->
					<panel
						visible="0"
						name="sp_list"
						color="invisible"
						x="0h"
						y="1.35h"
						group="lobby_hero_picker_parents"
					>
						<!-- search bar -->
						<panel x="45.8h" y="0h" width="15.2h" height="2.1h" noclick="1">
							<panel y="1" x="1" noclick="1">
								<frame texture="/ui/frames/roundframe.tga" borderthickness="0.4h" color=".4 .4 .4 1" noclick="true" />
								<textbox name="picker_filter_textbox3" color="invisible" width="-0.5h" x="0.1h" y="1" height="-0.2h" valign="center" align="center" font="dyn_10" textcolor=".8 .8 .8 1"
									onchangelua="Game_Lobby:UpdateFilterSearchString(self, self:GetValue())"
									onlosefocuslua="if (self:GetValue() == '') then self:SetInputLine(Translate('filter_search_empty')) end"
									onfocuslua="if (self:GetValue() == Translate('filter_search_empty')) then self:SetInputLine('') end"
									onshowlua="if (self:GetValue() == '') then self:SetInputLine(Translate('filter_search_empty')) end"
								/>
							</panel>
							<panel watch="ViewingStreaming" ontriggerlua="self:SetVisible(AtoB(param))"/>
						</panel>

						<image y="10h" width="94.8h" height="94.8h" align="center" valign="center" noclick="true"
							resourcecontext="lobby" watch9="MainRegisterTextures"
							ontrigger9lua="ResourceManager.RegisterTexture('/ui/fe2/lobby/hero_picker_sp.tga', 'lobby', self)"
						/>
						<panel x="1.0h" y="3.6h" color="invisible" float="bottom" padding="0.75h" visible="1" noclick="true">
							<instance name="hero_sp_row" gameMode="sp" row="0"/>
							<instance name="hero_sp_row" gameMode="sp" row="1"/>
							<instance name="hero_sp_row" gameMode="sp" row="2"/>
						</panel>
					</panel>

					<!-- Solo Mode -->
					<panel
						name="sm_list"
						visible="0"
						watch="SoloHeroAvatar"
						ontriggerlua="
							local bHeroSelected = AtoB(param0)
							if bHeroSelected and NotEmpty(param1) then
								GetWidget('altav_full'):DoEventN(0, 2)
								Set('cg_avatarHero', param1)
							end
						"
						onshowlua="Game_Lobby:ResetFilters()"
						group="lobby_hero_picker_parents"
					>
						<image texture="/ui/fe2/lobby/center_post_skinny.tga" x="0.1h" width="23%" height="102%" y="3%" align="center"
							resourcecontext="lobby" watch9="MainRegisterTextures"
							ontrigger9lua="ResourceManager.RegisterTexture('/ui/fe2/lobby/center_post_skinny.tga', 'lobby', self)"
						/>

						<!-- heroes -->
						<if condition="releaseStage_test" >
							<instance name="hero_full_list_compact_v2" gameMode="sm" x="0.5h" team="0" team_offset="27" group_size="54" row_size="9" textalign="left" othertextalign="right" teamlabel="general_legion" labelx="0.5h" otherlabelx="-0.8h" />
							<instance name="hero_full_list_compact_v2" gameMode="sm" x="32.1h" team="1" team_offset="27" group_size="54" row_size="9" textalign="right" othertextalign="left" teamlabel="general_hellbourne" labelx="-0.8h" otherlabelx="0.5h" hflip="1" />
						</if>
						<if condition="!releaseStage_test">
							<instance name="hero_full_list_compact" gameMode="sm" x="0.5h" team="0" team_offset="24" group_size="48" row_size="8" textalign="left" othertextalign="right" teamlabel="general_legion" labelx="0.5h"  otherlabelx="-0.8h" />
							<instance name="hero_full_list_compact" gameMode="sm" x="32.1h" team="1" team_offset="24" group_size="48" row_size="8" textalign="right" othertextalign="left" teamlabel="general_hellbourne" labelx="-0.8h" hflip="1" otherlabelx="0.5h" />
						</if>
						<!-- end of heroes -->

						<instance name="hero_sm_row" x="-12h" align="left" gameMode="sm" team="1"/>
						<instance name="hero_sm_row" x="10h" align="right" gameMode="sm" team="2"/>
					</panel>

					<panel name="sm_list_bg" visible="0" y="-0.31%" width="234@" height="117%" align="center" valign="center" noclick="1" color="white"
						resourcecontext="lobby" watch9="MainRegisterTextures"
						ontrigger9lua="ResourceManager.RegisterTexture('/ui/fe2/lobby/hero_picker.tga', 'lobby', self)"
						group="lobby_hero_picker_parents"
					/>

					<panel name="hero_picker_outline" y="-0.31%" width="234@" height="117%" align="center" valign="center" noclick="1" color="white" visible="0"
						resourcecontext="lobby" watch9="MainRegisterTextures"
						ontrigger9lua="ResourceManager.RegisterTexture('/ui/fe2/lobby/hero_picker_larger.tga', 'lobby', self)"
					/>

					<panel name="hero_picker_outline_filter" texture="/ui/fe2/lobby/hero_picker_larger_filter.tga" y="-0.31%" width="234@" height="117%" align="center" valign="center" noclick="1" color="white" visible="0"
						resourcecontext="lobby" watch9="MainRegisterTextures"
						ontrigger9lua="ResourceManager.RegisterTexture('/ui/fe2/lobby/hero_picker_larger_filter.tga', 'lobby', self)"
					/>

					<!-- Hero selection filters -->
					<panel name="hero_picker_filters" visible="0" width="62h" height="6h" align="center" noclick="1">
						<!-- black covers for things -->
						<!-- blank bar in header -->
						<panel height="10" width="100%" y="0" color="0 0 0 1" noclick="1" />
						<!-- side wing thingies -->
						<image texture="/ui/fe2/lobby/filter_corner_block.tga" color="0 0 0 1" width="6.8h" height="7.2h" x="-6.3 h" />
						<image texture="/ui/fe2/lobby/filter_corner_block.tga" color="0 0 0 1" hflip="1" align="right" width="6.9h" height="7.2h" x="6.6h"/>

						<!-- Tooltip Trigger -->
						<button width="2.3h" height="2.3h" color="invisible" valign="top" align="left" y="0.60h" x="-2.3h"
							onmouseoverlua="Game_Lobby:FilterTooltip('filters_tip_title', 'filters_tip_body')"
							onmouseoutlua="Game_Lobby:FilterTooltip('', '')"
						>
							<widgetstate statename="up">
								<image width="100%" height="100%" valign="center" align="center" texture="/ui/elements/tip_mark_up.tga" />
							</widgetstate>
							<widgetstate statename="over">
								<image width="100%" height="100%" valign="center" align="center" texture="/ui/elements/tip_mark_over.tga" />
							</widgetstate>
						</button>

						<!-- reset -->
						<button name="pick_filter_reset" width="2.3h" height="2.3h" color="invisible" align="right" y="0.6h" x="2.8h"
							onclicklua="Game_Lobby:ResetFilters()"
							onmouseoverlua="Game_Lobby:FilterTooltip('filter_category_reset', 'filter_reset_tip')"
							onmouseoutlua="Game_Lobby:FilterTooltip('', '')"
						>
							<widgetstate statename="up">
								<image width="100%" height="100%" valign="center" align="center" texture="/ui/fe2/lobby/filter_reset.tga" />
							</widgetstate>
							<widgetstate statename="over">
								<image width="100%" height="100%" valign="center" align="center" texture="/ui/fe2/lobby/filter_reset.tga" color=".9 .8 .8 1" />
							</widgetstate>
							<widgetstate statename="down" x="1" y="1">
								<image width="100%" height="100%" valign="center" align="center" texture="/ui/fe2/lobby/filter_reset.tga" color=".9 .8 .8 1" />
							</widgetstate>
						</button>

						<!-- filter section -->
						<panel x="0.6h" y="0.6h" float="right" padding="0.3h" noclick="1">
							<instance name="pick_filter_category_radio" category="melee" disableCategories="ranged"/>
							<panel width="0.25h"/>
							<instance name="pick_filter_category" category="solo"/>
							<instance name="pick_filter_category" category="carry"/>
							<instance name="pick_filter_category" category="support"/>

							<!-- search bar -->
							<panel width="15.2h" height="2.1h" noclick="1">
								<panel y="1" x="1" noclick="1">
									<frame texture="/ui/frames/roundframe.tga" borderthickness="0.4h" color=".4 .4 .4 1" noclick="true" />
									<textbox name="picker_filter_textbox" color="invisible" width="-0.5h" x="0.1h" y="1" height="-0.2h" valign="center" align="center" font="dyn_10" textcolor=".8 .8 .8 1"
										onchangelua="Game_Lobby:UpdateFilterSearchString(self, self:GetValue())"
										onlosefocuslua="if (self:GetValue() == '') then self:SetInputLine(Translate('filter_search_empty')) end"
										onfocuslua="if (self:GetValue() == Translate('filter_search_empty')) then self:SetInputLine('') end"
										onshowlua="if (self:GetValue() == '') then self:SetInputLine(Translate('filter_search_empty')) end"
									/>
								</panel>
								<panel watch="ViewingStreaming" ontriggerlua="self:SetVisible(AtoB(param))"/>
							</panel>
						</panel>

						<panel x="0.6h" y="2.9h" float="right" padding="0.3h" noclick="1">
							<instance name="pick_filter_category_radio" category="ranged" disableCategories="melee" />
							<panel width="0.25h"/>
							<instance name="pick_filter_category" category="jungle" />
							<instance name="pick_filter_category" category="initiator" />
							<instance name="pick_filter_category" category="ganker" />
							<instance name="pick_filter_category" category="pusher" />

							<!-- favorites -->
							<button name="pick_filter_favorites" width="4.2h" height="2.3h" color="invisible" numstates="2" align="right"
								onclicklua="Game_Lobby:ToggleFilter('fav')"
								onrightclicklua="Game_Lobby:FilterOnly('fav')"
								onmouseoverlua="Game_Lobby:FilterTooltip('filter_category_favorites', 'filter_favorites_tip')"
								onmouseoutlua="Game_Lobby:FilterTooltip('', '')"
								onloadlua="Game_Lobby:RegisterFilterButton(self, 'fav')"
								watch="ViewingStreaming"
								ontriggerlua="self:SetEnabled(not AtoB(param))"
							>
								<widgetstate statename="up">
									<frame texture="/ui/frames/rounded_bg_flat.tga" color="#192B35" borderthickness="0.5h" blockinput="false" noclick="true"/>
									<frame texture="/ui/frames/roundframe.tga" color="0 0 0 1" borderthickness="0.5h" blockinput="false" noclick="true"/>
									<image width="110@" height="110%" valign="center" align="center" texture="/ui/fe2/lobby/filter_favorites.tga" noclick="1" />
								</widgetstate>
								<widgetstate statename="over" >
									<frame texture="/ui/frames/rounded_bg_flat.tga" color="#192B35" borderthickness="0.5h" blockinput="false" noclick="true"/>
									<frame texture="/ui/frames/roundframe.tga" color="0 0 0 1" borderthickness="0.5h" blockinput="false" noclick="true"/>
									<image width="125@" height="125%" valign="center" align="center" texture="/ui/fe2/lobby/filter_favorites.tga" noclick="1" />
								</widgetstate>
								<widgetstate statename="down" x="1" y="1">
									<frame texture="/ui/frames/rounded_bg_flat.tga" color="#192B35" borderthickness="0.5h" blockinput="false" noclick="true"/>
									<frame texture="/ui/frames/roundframe.tga" color="0 0 0 1" borderthickness="0.5h" blockinput="false" noclick="true"/>
									<image width="110@" height="110%" valign="center" align="center" texture="/ui/fe2/lobby/filter_favorites.tga" noclick="1" color="yellow"/>
								</widgetstate>

								<widgetstate statename="up2">
									<frame texture="/ui/frames/rounded_bg_flat.tga" color="#192B35" borderthickness="0.5h" blockinput="false" noclick="true"/>
									<frame texture="/ui/frames/roundframe.tga" color="0 0 0 1" borderthickness="0.5h" blockinput="false" noclick="true"/>
									<image width="110@" height="110%" valign="center" align="center" texture="/ui/fe2/lobby/filter_favorites.tga" noclick="1" color="yellow" />
								</widgetstate>
								<widgetstate statename="over2" >
									<frame texture="/ui/frames/rounded_bg_flat.tga" color="#192B35" borderthickness="0.5h" blockinput="false" noclick="true"/>
									<frame texture="/ui/frames/roundframe.tga" color="0 0 0 1" borderthickness="0.5h" blockinput="false" noclick="true"/>
									<image width="125@" height="125%" valign="center" align="center" texture="/ui/fe2/lobby/filter_favorites.tga" noclick="1" color="yellow"/>
								</widgetstate>
								<widgetstate statename="down2" x="1" y="1">
									<frame texture="/ui/frames/rounded_bg_flat.tga" color="#192B35" borderthickness="0.5h" blockinput="false" noclick="true"/>
									<frame texture="/ui/frames/roundframe.tga" color="0 0 0 1" borderthickness="0.5h" blockinput="false" noclick="true"/>
									<image width="110@" height="110%" valign="center" align="center" texture="/ui/fe2/lobby/filter_favorites.tga" noclick="1" />
								</widgetstate>
							</button>
						</panel>
						<!-- end of filter section -->
					</panel>

					<panel name="game_lobby_blocker" y="0.0h" noclick="0" visible="0" width="100%" height="100%" color="0 0 0 .7" onload="CreateBool('ui_game_lobby_store_active', false);" onclick="Set('ui_game_lobby_store_active', false); SetVisible(false);" watch="MicroStoreStatus" ontrigger="SetVisible(param0 == 1 and ui_game_lobby_store_active);" >
						<panel noclick="1" y="2h" >
							<label width="-10.0h" y="4h" height="100%" align="center" textalign="center" textvalign="center" wrap="1" font="dyn_10" color="white" shadow="1" content="mstore_processing_elipses" noclick="1" />
							<animatedimage width="4.5h" height="4.5h" texture="/ui/elements/throb/throb.tga" noclick="1" loop="1" fps="30" onshow="StartAnim(1);" visible="1" align="center" valign="center" />
						</panel>
					</panel>

					<!-- Alt Avatar Display - Full -->
					<panel
						name="altav_full"
						y="1%" width="98%" height="97%" align="center"
						color="0 0 0 .8"
						visible="false"
						watch="HeroSelectNeedAvatarSelection"
						ontrigger="If(param, DoEvent(0));"
						watch0="HeroSelectHeroHasAvatars"
						ontrigger0="##If(!param, DoEvent(1));##"
						onevent0lua=
						"
							if(Main_Walkthrough.pregameLobbyStep ~= 2) then
								Set('_game_lobby_setPotentialAvatar', AtoN(param0) == 1, 'bool')
								self:Sleep(1,  function()
									Game_Lobby.ignoreHeroSelectedDefaultAvatar = true
									self:DoEventN(3)
								end)
							end
						"
						onevent1="SetVisible(false); Set('_game_lobby_setPotentialAvatar', false);"
						onevent1lua="Game_Lobby:HideCardception()"
						onevent2="SetVisible(false); Set('_game_lobby_setPotentialAvatar', false);"
						onevent2lua="Game_Lobby:HideCardception()"
						onevent3lua="
							if GetCvarString('cg_avatarHero') and NotEmpty(GetCvarString('cg_avatarHero')) then
								if (not GetCvarBool('ui_lobby_showOldAAPicker'))  then
									self:SetVisible(false)
									Game_Lobby.ClickedViewAvatars(GetCvarString('cg_avatarHero'), nil, nil)
								else
									self:SetVisible(true)
								end
							end
						"
						onload="
							CreateString('_globby_buyavatar_heroname', '');
							CreateString('_globby_buyavatar_avatarcode', '');
							CreateString('_globby_buyavatar_avatarname', '');
							CreateInt('_globby_buyavatar_cost', 0);
							CreateInt('_globby_buyavatar_SilverCost', 0);
							CreateBool('_globby_buyavatar_premium', false);
							CreateString('_globby_buyavatar_discount', '');

							CreateString('_globby_buyeap_heroname', '');
							CreateString('_globby_buyeap_avatarcode', '');
							CreateString('_globby_buyeap_avatarname', '');
							CreateString('_globby_buyeap_productID', '');
							CreateInt('_globby_buyeap_cost', 0);
							CreateInt('_globby_buyeap_SilverCost', 0);
							CreateBool('_globby_buyeap_premium', false);
						"
					>
						<!-- Store Title -->
						<panel x="0.2h" y="-1.3h" width="99%" height="5.4h" align="center" noclick="true">
							<image x="-50@" height="100%" width="-80@" align="right" utile="true" uscale=".4" texture="/ui/fe2/store/store_tab_center.tga" noclick="true"/>
							<image height="100%" width="50@" texture="/ui/fe2/store/store_tab_left.tga" noclick="true"/>
							<image align="right" height="100%" width="50@" texture="/ui/fe2/store/store_tab_right.tga" noclick="true"/>
							<image x="3%" y="10%" align="left" valign="top" height="50%" width="50@" texture="/ui/fe2/store/store_tab_connector.tga" noclick="true"/>
							<image x="-3%" y="10%" align="right" valign="top" height="50%" width="50@" texture="/ui/fe2/store/store_tab_connector.tga" noclick="true"/>
							<label x="3.5%" y="-8%" height="50%" valign="bottom" textalign="left" textvalign="center" font="dyn_14" color="white" outline="true" noclick="true" content="globby_alt_avatars"/>

							<panel x="-7.5%" y="-0.4h" width="17.5h" height="2.5h" valign="bottom" align="right" noclick="true">
								<frame texture="/ui/frames/rounded_bg_white.tga" borderthickness="0.6h" color="0 0 0 .4" noclick="true"/>
								<frame texture="/ui/frames/roundframe.tga" borderthickness="0.6h" color=".2 .2 .2 1" noclick="true" />
								<image x="-1.0h" y="0.1h" texture="/ui/fe2/lobby/altav_goldsack.tga" height="3.2h" width="3.2h" valign="bottom" noclick="true"/>
								<panel color="invisible" height="100%" float="right" padding="0.5h" x="1.75h" width="-2.5h">
									<label
										width="5h"
										height="100%"
										align="left"
										textalign="right"
										textvalign="center"
										font="dyn_9"
										color="#FFCC00"
										outline="true"
										noclick="true"
										watch="GoldCoins"
										ontrigger="SetText(FtoA2(param, 0, 0, 3, ','));"
									/>

									<panel height="100%" width="1.75h">
										<image width="1.75h" height="1.75h" valign="center" noclick="true" texture="/ui/fe2/store/gold_coins.tga" />
									</panel>

									<label
										width="5h"
										height="100%"
										align="left"
										textalign="right"
										textvalign="center"
										font="dyn_9"
										color="#c0d5ed"
										outline="true"
										noclick="true"
										watch="SilverCoins"
										ontrigger="SetText(FtoA2(param, 0, 0, 0, ','));"
									/>

									<panel height="100%" width="1.75h">
										<image width="1.75h" height="1.75h" valign="center" noclick="true" texture="/ui/fe2/store/silver_coins.tga" />
									</panel>
								</panel>
							</panel>

							<panel x="-3.0%" y="-0.7h" width="2.0h" height="2.0h" valign="bottom" align="right" noclick="true">
								<button
									color="invisible"
									onclick="PlaySound('/shared/sounds/ui/ccpanel/button_close_02.wav'); CallEventParamsX('altav_full', 1, 2);"
									onmouseover="PlaySound('/shared/sounds/ui/ccpanel/button_over_01.wav');"
								>
									<widgetstate statename="up">
										<frame texture="/ui/frames/rounded_bg_white.tga" borderthickness="0.5h" color="#520000" blockinput="false" noclick="true"/>
										<frame texture="/ui/frames/roundframe.tga" color="0 0 0 1" borderthickness="0.5h" blockinput="false" noclick="true"/>
										<image width="1.3h" height="1.3h" align="center" valign="center" color=".75 .75 .75 1" texture="/ui/elements/closex.tga" noclick="true" />
									</widgetstate>
									<widgetstate statename="over">
										<frame texture="/ui/frames/rounded_bg_white.tga" borderthickness="0.5h" color="#c50000" blockinput="false" noclick="true"/>
										<frame texture="/ui/frames/roundframe.tga" color="0 0 0 1" borderthickness="0.5h" blockinput="false" noclick="true"/>
										<image width="1.3h" height="1.3h" align="center" valign="center" color="1 1 1 1" texture="/ui/elements/closex.tga" noclick="true" />
									</widgetstate>
									<widgetstate statename="down" x="1" y="1">
										<frame texture="/ui/frames/rounded_bg_white.tga" borderthickness="0.5h" color="#9c0000" blockinput="false" noclick="true"/>
										<frame texture="/ui/frames/roundframe.tga" color="0 0 0 1" borderthickness="0.5h" blockinput="false" noclick="true"/>
										<image width="1.3h" height="1.3h" align="center" valign="center" color="1 1 1 1" texture="/ui/elements/closex.tga" noclick="true" />
									</widgetstate>
								</button>
							</panel>
						</panel>

						<panel y="4.2h" grow="true" growinvis="false" float="right" padding="0" height="22.0h" align="center" noclick="true">
							<instance name="altavatar_full_item" slot="0" PurchaseAv="true" />
							<instance name="altavatar_full_item" slot="1" PurchaseAv="true" />
							<instance name="altavatar_full_item" slot="2" PurchaseAv="true" />
						</panel>

						<panel y="26.5h" grow="true" growinvis="false" float="right" padding="0" height="22.0h" align="center" noclick="true">
							<instance name="altavatar_full_item" slot="3" PurchaseAv="true" />
							<instance name="altavatar_full_item" slot="4" PurchaseAv="true" />
							<instance name="altavatar_full_item" slot="5" PurchaseAv="true" />
						</panel>

					</panel>
					<!-- / Alt Avatar Display - Full -->

					<!-- Avatar Cardception -->
					<panel name="game_lobby_card_parent" noclick="0" oneventlua="Game_Lobby:DisplayCardception()" y="0" visible="0" blockinput="1">

						<panel name="game_lobby_card_background_2" noclick="0" width="100w" align="center" visible="1" color="0 0 0 0.85"
							blockinput="1" processonlyscroll="1"
							onmousewheeldownlua="Game_Lobby:NextViewedCard()"
							onmousewheeluplua="Game_Lobby:PrevViewedCard()"
							onrightclicklua="Game_Lobby:HideCardception()"
						/>

						<panel name="game_lobby_card_background" noclick="0" color="0 0 0 0.7" visible="1"
							blockinput="1"
							onmousewheeldownlua="Game_Lobby:NextViewedCard()"
							onmousewheeluplua="Game_Lobby:PrevViewedCard()"
							onrightclicklua="Game_Lobby:HideCardception()"
							onmouseover="##GroupCall('game_lobby_card_quit_frames', 'DoEvent(0)');##"
							onmouseout="##GroupCall('game_lobby_card_quit_frames', 'DoEvent(1)');##"
						/>

						<panel name="game_lobby_card_spawn_target" noclick="1" y="-26h" visible="1" >

							<panel valign="center" align="left" width="34.0h" height="100%" x="0" y="0" noclick="0" color="1 0 0 0.0"
								onrightclicklua="Game_Lobby:HideCardception()"
								onmousewheeldownlua="Game_Lobby:NextViewedCard()"
								onmousewheeluplua="Game_Lobby:PrevViewedCard()"
								onmouseover="PlaySound('/shared/sounds/ui/button_over_01.wav');"
							/>

							<panel valign="center" align="right" width="-34.0h" height="100%" x="0" y="0" noclick="0" color="0 1 0 0.0"
								onrightclicklua="Game_Lobby:HideCardception()"
								onmousewheeldownlua="Game_Lobby:NextViewedCard()"
								onmousewheeluplua="Game_Lobby:PrevViewedCard()"
								onmouseover="PlaySound('/shared/sounds/ui/button_over_01.wav');"
							/>

							<!-- Top Center Header -->
							<panel name="game_lobby_card_avatar_top_parent" y="0.8h" grow="0" width="20h" height="7.0h" align="center" valign="top" noclick="true">
								<frame name="game_lobby_card_avatar_top_border_1" texture="/ui/frames/rounded_bg_white.tga" borderthickness="0.6h" color=".1 .1 .1 .6" blockinput="false" noclick="true"/>
								<frame name="game_lobby_card_avatar_top_border_2" texture="/ui/frames/roundframe.tga" color="1 1 1 .4" borderthickness="0.6h" blockinput="false" noclick="true"/>
								<!-- Premium Indication -->
								<panel name="game_lobby_card_avatar_top_border_3" blockinput="false" noclick="true" visible="0" >
									<frame texture="/ui/frames/rounded_bg_white.tga" borderthickness="0.6h" color="#ff950b42" blockinput="false" noclick="true"/>
									<frame texture="/ui/frames/roundframe.tga" color="#ffd200" borderthickness="0.6h" blockinput="false" noclick="true"/>
									<image x="-0.6h" y="0.5h" width="3.0h" height="3.0h" rotation="180" align="left" valign="bottom" texture="/ui/fe2/store/avatars_display/premium_corner_trim.tga" blockinput="false" noclick="true" />
									<image x="0.6h" y="0.5h" width="3.0h" height="3.0h" rotation="90" align="right" valign="bottom" texture="/ui/fe2/store/avatars_display/premium_corner_trim.tga" blockinput="false" noclick="true" />
								</panel>

								<!-- New Indication -->
								<panel name="game_lobby_card_avatar_top_border_4" blockinput="false" noclick="true" visible="0" >
									<frame texture="/ui/frames/rounded_bg_white.tga" borderthickness="0.6h" color="#136c8542" blockinput="false" noclick="true"/>
									<frame texture="/ui/frames/roundframe.tga" color="#1c90c0" borderthickness="0.6h" blockinput="false" noclick="true"/>
									<image x="-1.6h" width="2.2h" height="4.4h" hflip="true" align="left" valign="center" texture="/ui/fe2/store/avatars_display/side_ornate_trim.tga" blockinput="false" noclick="true" />
									<image x="1.6h" width="2.2h" height="4.4h" align="right" valign="center" texture="/ui/fe2/store/avatars_display/side_ornate_trim.tga" blockinput="false" noclick="true" />
									<panel x="-1.0h" y="5.8h" width="10.0h" height="5.0h" align="left" blockinput="false" noclick="true">
										<image texture="/ui/fe2/elements/new_banner.tga" color="#29c0ff" blockinput="false" noclick="true" />
										<label y="0.8h" textalign="center" font="dyn_10" color="1 1 1 1" outline="true" content="general_new" blockinput="false" noclick="true" />
									</panel>
								</panel>

								<!-- Ultimate Indication -->
								<panel name="game_lobby_card_avatar_top_border_5" blockinput="false" noclick="true" visible="0" >
									<frame texture="/ui/frames/rounded_bg_white.tga" borderthickness="0.6h" color="#ff0b0b42" blockinput="false" noclick="true"/>
									<frame texture="/ui/frames/roundframe.tga" color="#c92100" borderthickness="0.6h" blockinput="false" noclick="true"/>
									<image x="-3.1h" width="4.4h" height="4.4h" align="left" valign="center" texture="/ui/fe2/store/avatars_display/claw.tga" blockinput="false" noclick="true" />
									<image x="3.1h" width="4.4h" height="4.4h" hflip="true" align="right" valign="center" texture="/ui/fe2/store/avatars_display/claw.tga" blockinput="false" noclick="true" />
									<panel x="-1.0h" y="5.8h" width="10.0h" height="5.0h" align="left" blockinput="false" noclick="true">
										<image texture="/ui/fe2/elements/new_banner.tga" color="red" blockinput="false" noclick="true" />
										<label y="0.8h" textalign="center" font="dyn_10" color="1 1 1 1" outline="true" content="general_ultimate" blockinput="false" noclick="true" />
									</panel>
								</panel>

								<panel name="game_lobby_card_avatar_name_container" y="-0.7h" grow="true" height="-1.9h" align="center" valign="bottom" float="right" padding="0.8h" noclick="true">

									<panel width="0.4h" height="100%" noclick="true"/>

									<!-- Icon -->
									<panel width="100@" height="100%" noclick="true">
										<image name="game_lobby_card_avatar_icon" texture="$invis" noclick="true"/>
										<frame color="invisible" bordercolor="1 1 1 .2" borderthickness="1" noclick="true" />
									</panel>

									<panel width="0.2h" height="100%" noclick="true">
										<panel width="50%" color="0 0 0 1" align="left" noclick="true" />
										<panel width="50%" color="1 1 1 .1" align="right" noclick="true" />
									</panel>

									<panel grow="true" height="100%" noclick="true">
										<!-- Hero Name -->
										<label name="game_lobby_card_avatar_name" y="0.1h" fitx="true" font="dyn_14" color="1 1 1 1" outline="true" content="" noclick="true" />
										<!-- Default Check -->
										<panel width="14.0h" height="3.0h" valign="bottom" noclick="true">
											<instance
												name="Noptions_checkbox"
												checkbox_name="game_lobby_card_avatar_default_checkbox"
												width="100%" height="1.6h" y="-0.4h"
												align="center" valign="bottom"
												font="dyn_10" label="general_default_avatar"
												interactive="false"
												checkbox_group="game_lobby_default_av_btns"
												onclicklua="
													groupfcall('game_lobby_default_av_btns', function(index, widget, groupName) widget:DoEvent() 	end)
												"
											/>
											<label name="game_lobby_card_avatar_ea_label" y="0.1h" fitx="true" font="dyn_12" color=".7 .7 .7 1" outline="true" content="mstore_category58" noclick="true" />
										</panel>

									</panel>

									<panel width="1.0h" height="100%" noclick="true"/>
								</panel>
							</panel>

							<!-- Footer - Purchase -->
							<panel name="game_lobby_card_avatar_bottom_parent" y="1.4h" width="48.0h" height="6.4h" align="center" valign="bottom" noclick="true">
								<frame y="-0.2h" height="7.0h" texture="/ui/frames/rounded_bg_white.tga" borderthickness="0.6h" color=".1 .1 .1 .6" blockinput="false" noclick="true"/>
								<frame y="-0.2h" height="7.0h" texture="/ui/frames/roundframe.tga" color="1 1 1 .4" borderthickness="0.6h" blockinput="false" noclick="true"/>

								<!-- Purchase -->
								<panel name="game_lobby_avatar_splash_purchase" width="-190@" align="center" noclick="true" visible="1">
									<panel name="game_lobby_avatar_splash_purchase_1" align="left" width="9.0h" noclick="true">
										<panel y="-0.5h" grow="true" height="2.0h" valign="center" align="center" noclick="1" >
											<label name="game_lobby_avatar_splash_purchase_label_1" x="2.3h" fitx="true" height="100%" textvalign="center" font="dyn_14" color="#FFCC00" shadow="true" content="?" noclick="true" />
											<image height="100%" width="100@" texture="/ui/fe2/store/gold_coins.tga" noclick="true"/>
										</panel>
									</panel>
									<panel name="game_lobby_avatar_splash_purchase_2" align="right" width="9.0h" noclick="true">
										<panel y="-0.5h" grow="true" height="2.0h" valign="center" align="center" noclick="1" >
											<label name="game_lobby_avatar_splash_purchase_label_2" x="2.3h" fitx="true" height="100%" textvalign="center" font="dyn_14" color="silver" shadow="true" content="?" noclick="true" />
											<image height="100%" width="100@" texture="/ui/fe2/store/silver_coins.tga" noclick="true"/>
										</panel>
									</panel>
									<panel y="-0.4h" height="3.6h" width="18h" align="center" valign="center" noclick="true" >
										<instance name="AAVButton" button_name="game_lobby_card_na_btn" label="general_unavailable" enabled="0" visible="1" />
										<instance name="AAVButton" button_name="game_lobby_card_plinko_btn" label="mstore_plinko_only" enabled="0" visible="0" />
										<instance name="AAVButton" button_name="game_lobby_card_esports_btn" label="mstore_esports_only" enabled="0" visible="0" />
										<instance name="AAVButton" button_name="game_lobby_card_quests_btn" label="mstore_quests_only" enabled="0" visible="0" />
										<instance name="AAVButton" button_name="game_lobby_card_coins_btn" label="mstore_needcoins" enabled="1" visible="0"
											onclicklua="
												local store = GetCvarBool('cg_store2_') and 'store_container2' or 'store_container'
												UIManager.GetInterface('main'):HoNMainF('MainMenuPanelToggle', store, nil, false)
											"
										/>
									</panel>
									<panel y="-0.4h" height="3.6h" width="18h" align="center" valign="center" noclick="true" >
										<instance name="AAVButton" onclicklua="self:DoEvent()" button_name="game_lobby_card_purchase_btn" label="mstore_purchase" enabled="1" visible="0" />
									</panel>
								</panel>

								<!-- Select Avatar -->
								<panel width="-190@" align="center" noclick="true" visible="true" >
									<panel y="-0.4h" height="3.6h" width="18h" align="center" valign="center" noclick="true" >
										<instance name="AAVButton" onclicklua="self:DoEvent()" button_name="game_lobby_card_select_btn" label="globby_select_avatar" enabled="1" visible="0" />
									</panel>
								</panel>

								<!-- Left Move -->
								<panel name="game_lobby_card_prev_btn" visible="0" x="-2.0h" y="-0.8h" width="120@" height="120%" align="left" noclick="true">
									<image width="100@" height="100%" texture="/ui/fe2/store/promo/store_sales.tga" hflip="true" x="0.4h" noclick="true" />
									<instance name="AAVPrevNextButton" rotation="90"
										onclicklua="Game_Lobby:PrevViewedCard()"
										onrightclicklua="Game_Lobby:HideCardception()"
										onmousewheeldownlua="Game_Lobby:NextViewedCard()"
										onmousewheeluplua="Game_Lobby:PrevViewedCard()"
										onmouseover="PlaySound('/shared/sounds/ui/button_over_01.wav');"
									/>
								</panel>

								<!-- Right Move -->
								<panel name="game_lobby_card_next_btn" visible="0" x="2.0h" y="-0.8h" width="120@" height="120%" align="right" noclick="true">
									<image width="100@" height="100%" texture="/ui/fe2/store/promo/store_sales.tga" x="-0.4h" noclick="true" />
									<instance name="AAVPrevNextButton" rotation="270"
										onclicklua="Game_Lobby:NextViewedCard()"
										onrightclicklua="Game_Lobby:HideCardception()"
										onmousewheeldownlua="Game_Lobby:NextViewedCard()"
										onmousewheeluplua="Game_Lobby:PrevViewedCard()"
										onmouseover="PlaySound('/shared/sounds/ui/button_over_01.wav');"
									/>
								</panel>

							</panel>

							<!-- Footer -->
							<panel name="game_lobby_eap_footer" y="1.1h" width="55.0h" height="6.4h" align="center" valign="bottom" noclick="true" visible="0">
								<frame y="-0.2h" height="6.5h" texture="/ui/frames/rounded_bg_red.tga" borderthickness="0.6h" color=".1 .1 .1 .9" blockinput="false" noclick="true"/>
								<frame y="-0.2h" height="6.5h" texture="/ui/frames/roundframe.tga" color="#e28e1b" borderthickness="0.6h" blockinput="false" noclick="true"/>

								<!-- Bundle Price -->
								<panel x="2.0h" y="0.4h" width="16.5h" noclick="true">
									<label textalign="center" font="dyn_10" color=".7 .7 .7 1" shadow="true" content="mstore_eap_bundle_selected" noclick="true" />
									<!-- Selected -->
									<panel y="2.2h" height="3.0h" align="center" name="gl_eap_bundleselect_box"
										onclick="ShowWidget('gl_eap_bundleselect_dropup'); HideWidget('gl_eap_bundleselect_box');"
									>
										<frame texture="/ui/frames/rounded_bg_green.tga" borderthickness="0.6h" color="1 1 1 .8" blockinput="false" noclick="true"/>
										<frame texture="/ui/frames/roundframe.tga" color="#e28e1b" borderthickness="0.6h" blockinput="false" noclick="true"/>

										<label name="gl_eap_selected_bundle_label" x="1.0h" y="-0.2h" height="100%" textvalign="center" font="dyn_16" color="#FFFFFF" shadow="true" content="mstore_eap_bundle_3" noclick="true" />

										<panel grow="true" height="100%" align="right" float="right" padding="0.5h" noclick="true">
											<panel width="1" height="100%" valign="center" noclick="true">
												<panel height="95%" color="0 0 0 1" valign="center" noclick="true" />
											</panel>
											<panel grow="true" height="100%" noclick="true">
												<image width="40@" height="40%" valign="center" texture="/ui/elements/arrow_down.tga" noclick="true" />
											</panel>
											<panel width="1" height="100%" color="invisible"/>
										</panel>
									</panel>

									<!-- Fake Combobox -->
									<panel y="-3.8h" height="9.0h" align="center" name="gl_eap_bundleselect_dropup" visible="0" onhide="ShowWidget('gl_eap_bundleselect_box');" >

										<frame texture="/ui/frames/rounded_bg_white.tga" borderthickness="0" color="0 0 0 .8" blockinput="false" noclick="true"/>
										<button color="invisible"
											onmouseover=""
											onmouseout=""
											onclick="HideWidget('gl_eap_bundleselect_dropup');"
											onclicklua="Game_Lobby.SelectBundle(self, 1)"
											onmouseoverlua="Game_Lobby.HoverBundle(self, 1)"
											onmouseoutlua="Game_Lobby.RestoreHoverBundle(self, 1)"
											y="0" height="3.0h" align="center"
										>
											<widgetstate statename="up">
												<frame texture="/ui/frames/rounded_bg_green.tga" borderthickness="0" color="1 1 1 1" blockinput="0" noclick="1"/>
											</widgetstate>
											<widgetstate statename="over">
												<frame texture="/ui/frames/rounded_bg_white.tga" borderthickness="0" color="0 0.8 0 1" blockinput="0" noclick="1"/>
											</widgetstate>
											<widgetstate statename="down" x="1" y="1">
												<frame texture="/ui/frames/rounded_bg_white.tga" borderthickness="0" color="0 0.8 0 1" blockinput="0" noclick="1"/>
											</widgetstate>
											<label x="1.0h" y="-0.1h" height="100%" textvalign="center" font="dyn_16" color="#FFFFFF" shadow="1" content="mstore_eap_bundle_1" noclick="1" />
										</button>

										<button color="invisible"
											onmouseover=""
											onmouseout=""
											onclick="HideWidget('gl_eap_bundleselect_dropup');"
											onclicklua="Game_Lobby.SelectBundle(self, 2)"
											onmouseoverlua="Game_Lobby.HoverBundle(self, 2)"
											onmouseoutlua="Game_Lobby.RestoreHoverBundle(self, 2)"
											y="3.0h" height="3.0h" align="center"
										>
											<widgetstate statename="up">
												<frame texture="/ui/frames/rounded_bg_green.tga" borderthickness="0" color="1 1 1 1" blockinput="0" noclick="1"/>
											</widgetstate>
											<widgetstate statename="over">
												<frame texture="/ui/frames/rounded_bg_white.tga" borderthickness="0" color="0 0.8 0 1" blockinput="0" noclick="1"/>
											</widgetstate>
											<widgetstate statename="down" x="1" y="1">
												<frame texture="/ui/frames/rounded_bg_white.tga" borderthickness="0" color="0 0.8 0 1" blockinput="0" noclick="1"/>
											</widgetstate>
											<label x="1.0h" y="-0.1h" height="100%" textvalign="center" font="dyn_16" color="#FFFFFF" shadow="1" content="mstore_eap_bundle_2" noclick="1" />
										</button>

										<button color="invisible"
											onmouseover=""
											onmouseout=""
											onclick="HideWidget('gl_eap_bundleselect_dropup');"
											onclicklua="Game_Lobby.SelectBundle(self, 3)"
											onmouseoverlua="Game_Lobby.HoverBundle(self, 3)"
											onmouseoutlua="Game_Lobby.RestoreHoverBundle(self, 3)"
											y="6.0h" height="3.0h" align="center"
										>
											<widgetstate statename="up">
												<frame texture="/ui/frames/rounded_bg_green.tga" borderthickness="0" color="1 1 1 1" blockinput="0" noclick="1"/>
											</widgetstate>
											<widgetstate statename="over">
												<frame texture="/ui/frames/rounded_bg_white.tga" borderthickness="0" color="0 0.8 0 1" blockinput="0" noclick="1"/>
											</widgetstate>
											<widgetstate statename="down" x="1" y="1">
												<frame texture="/ui/frames/rounded_bg_white.tga" borderthickness="0" color="0 0.8 0 1" blockinput="0" noclick="1"/>
											</widgetstate>
											<label x="1.0h" y="-0.1h" height="100%" textvalign="center" font="dyn_16" color="#FFFFFF" shadow="1" content="mstore_eap_bundle_3" noclick="1" />
										</button>

										<frame color="invisible" borderthickness="1" bordercolor="#e28e1b" blockinput="false" noclick="1"/>

									</panel>
								</panel>

								<!-- Purchase Buttons -->
								<panel x="-2.0h" y="0.4h" width="16.5h" align="right" noclick="true" >
									<panel name="gl_eap_purchase_cost" height="1.6h" valign="top" align="center" x="35%" noclick="1" >
										<label name="gl_eap_purchase_cost_label" x="2.0h" fitx="true" height="100%" textvalign="center" font="dyn_14" color="#FFCC00" shadow="true" content="" noclick="true" />
										<image height="100%" width="100@" texture="/ui/fe2/store/gold_coins.tga" noclick="true"/>
									</panel>
									<panel y="1.8h" height="3.8h" align="center" noclick="true">
										<instance name="AAVButton" button_name="game_lobby_card_na_btn_2" label="general_unavailable" enabled="0" visible="1" />
										<instance name="AAVButton" button_name="game_lobby_card_plinko_btn_2" label="mstore_plinko_only" enabled="0" visible="0" />
										<instance name="AAVButton" button_name="game_lobby_card_esports_btn_2" label="mstore_esports_only" enabled="0" visible="0" />
										<instance name="AAVButton" button_name="game_lobby_card_quests_btn_2" label="mstore_quests_only" enabled="0" visible="0" />
										<instance name="AAVButton" button_name="game_lobby_card_coins_btn_2" label="mstore_needcoins" enabled="1" visible="0"
											onclicklua="
												local store = GetCvarBool('cg_store2_') and 'store_container2' or 'store_container'
												UIManager.GetInterface('main'):HoNMainF('MainMenuPanelToggle', store, nil, false)
											"
										/>
										<instance name="AAVButton" onclicklua="self:DoEvent()" button_name="game_lobby_card_purchase_btn_2" label="mstore_purchase" enabled="1" visible="0" />
										<instance name="AAVButton" onclicklua="self:DoEvent()" button_name="game_lobby_card_select_btn_2" label="globby_select_avatar" enabled="1" visible="0" />
									</panel>
								</panel>

								<!-- Release Date -->
								<panel x="-0.2h" y="0.4h" width="12.0h" align="center" float="bottom" padding="0.3h" noclick="true"	>
									<label name="game_lobby_eap_rl_date_label_1" fity="true" textalign="center" font="dyn_10" color=".7 .7 .7 1" shadow="true" content="mstore_releasedate"
										onevent="If(eapStartTime{id=1} gt 0,  SetText(Translate('mstore_releasedate')), SetText(Translate('mstore_playable')) );"
									/>
									<label name="game_lobby_eap_rl_date_label_2" fity="true" textalign="center" font="dyn_14" color="white" shadow="true" content="--/--/----"
										onevent="
											If(
												eapStartTime{id=1} gt 0,
												SetText(FormatDateTime(eapEndTime{id=1}, '%m/%d/%Y', true)),
												SetText(Translate('mstore_outnow'))
											);
										"
									/>
								</panel>

								<!-- Left Alt Star (EA Exclusive Alt Av) -->
								<panel align="center" width="14h" height="14h" valign="bottom" x="-34.0h" y="-13h" noclick="true" name="gl_eap_star_left">
									<panel name="gl_eap_left_star_1" noclick="true" visible="0">
										<image texture="/ui/fe2/elements/price_star.tga" noclick="true"/>
										<panel width="100%" float="bottom" noclick="true" valign="center" grow="true">
											<label fity="true" textalign="center" textvalign="center" font="dyn_12" color="white" shadow="true" content="mstore_noeap_includes" noclick="true" />
											<label fity="true" textalign="center" textvalign="center" font="dyn_14" color="#ffe400" shadow="true" content="mstore_noeap_bonus" noclick="true" />
											<label fity="true" textalign="center" textvalign="center" font="dyn_12" color="white" shadow="true" content="mstore_noeap_alt_avatar" noclick="true" />
										</panel>
									</panel>
									<panel name="gl_eap_left_star_2" noclick="true" visible="0">
										<image texture="/ui/fe2/elements/price_star.tga" rendermode="grayscale" noclick="true"/>
										<panel width="100%" float="bottom" noclick="true" valign="center" grow="true">
											<label fity="true" textalign="center" textvalign="center" font="dyn_12" color="white" shadow="true" content="mstore_noeap_select" noclick="true" />
											<label fity="true" textalign="center" textvalign="center" font="dyn_12" color="white" shadow="true" content="mstore_eap_bundle_2" noclick="true" />
											<label fity="true" textalign="center" textvalign="center" font="dyn_12" color="white" shadow="true" content="mstore_noeap_to_unlock" noclick="true" />
										</panel>
									</panel>
								</panel>

								<!-- Right Alt Star (Regular Alt Av) -->
								<panel align="center" width="14h" height="14h" valign="bottom" x="34.0h" y="-13h" noclick="true"  name="gl_eap_star_right">
									<panel name="gl_eap_right_star_1" noclick="true" visible="0">
										<image texture="/ui/fe2/elements/price_star.tga" noclick="true"/>
										<panel width="100%" float="bottom" noclick="true" valign="center" grow="true">
											<label fity="true" textalign="center" textvalign="center" font="dyn_12" color="white" shadow="true" content="mstore_noeap_includes" noclick="true" />
											<label fity="true" textalign="center" textvalign="center" font="dyn_14" color="#ffe400" shadow="true" content="mstore_noeap_exclusive" noclick="true" />
											<label fity="true" textalign="center" textvalign="center" font="dyn_12" color="white" shadow="true" content="mstore_eap_only" noclick="true" />
											<label fity="true" textalign="center" textvalign="center" font="dyn_12" color="white" shadow="true" content="mstore_noeap_alt_avatar" noclick="true" />
										</panel>
									</panel>
									<panel name="gl_eap_right_star_2" noclick="true" visible="0">
										<image texture="/ui/fe2/elements/price_star.tga" rendermode="grayscale" noclick="true"/>
										<panel width="100%" float="bottom" noclick="true" valign="center" grow="true">
											<label fity="true" textalign="center" textvalign="center" font="dyn_12" color="white" shadow="true" content="mstore_noeap_select" noclick="true" />
											<label fity="true" textalign="center" textvalign="center" font="dyn_12" color="white" shadow="true" content="mstore_eap_bundle_3" noclick="true" />
											<label fity="true" textalign="center" textvalign="center" font="dyn_12" color="white" shadow="true" content="mstore_noeap_to_unlock" noclick="true" />
										</panel>
									</panel>
								</panel>
							</panel>

							<!-- Did you know? -->
							<panel name="game_lobby_card_avatar_hint" y="-6h" x="-41.5h" grow="1" regrow="1" width="40h" height="10h" align="center" valign="bottom" visible="0" noclick="0" float="bottom" padding="1.0h"
								onload="If(!VarExists('ui_lobby_avatar_hint_1'), DoEvent()); DoEvent(1);" onevent="CreateBool('ui_lobby_avatar_hint_1', false);" onevent1="SetVisible(!ui_lobby_avatar_hint_1);"
								onclick="Set(ui_lobby_avatar_hint_1, true); SetSave('ui_lobby_avatar_hint_1', true); Call('game_lobby_card_avatar_hint', 'SetVisible(0)');"
								onrightclick="Set(ui_lobby_avatar_hint_1, true); SetSave('ui_lobby_avatar_hint_1', true); Call('game_lobby_card_avatar_hint', 'SetVisible(0)');"
								color="0 0 0 0.8"
							>
								<frame y="0" texture="/ui/frames/rounded_bg_red.tga" borderthickness="0.6h" color=".1 .1 .1 .6" blockinput="false" noclick="true"/>
								<frame y="0" texture="/ui/frames/roundframe.tga" color="#e28e1b" borderthickness="0.6h" blockinput="false" noclick="true"/>

								<label y="1.0h" fity="true" textalign="center" font="dyn_14" color="#FFCC00" shadow="true" wrap="1" onload="SetText(FormatStringNewLine(Translate('main_lobby_did_you_know')));" noclick="true" />

								<label fity="true" textalign="center" font="dyn_11" color="white" shadow="true" wrap="1" onload="SetText(FormatStringNewLine(Translate('main_lobby_avatar_tip_1')));" noclick="true" />

								<button
									visible="1"
									x="-0.6h" y="0.6h"
									width="2.8h" height="2.8h"
									align="right"
									color="invisible"
									onmouseover="PlaySound('/shared/sounds/ui/ccpanel/button_over_01.wav');"
									onclick="Set(ui_lobby_avatar_hint_1, true); SetSave('ui_lobby_avatar_hint_1', true); Call('game_lobby_card_avatar_hint', 'SetVisible(0)');"
									onrightclick="Set(ui_lobby_avatar_hint_1, true); SetSave('ui_lobby_avatar_hint_1', true); Call('game_lobby_card_avatar_hint', 'SetVisible(0)');"
								>
									<widgetstate statename="up">
										<frame texture="/ui/frames/rounded_bg_white.tga" borderthickness="0.5h" color="#dc0000" blockinput="0" noclick="1"/>
										<frame texture="/ui/frames/roundframe.tga" color="0 0 0 1" borderthickness="0.5h" blockinput="0" noclick="1"/>
										<image width="1.4h" height="1.4h" align="center" valign="center" color="1 1 1 1" texture="/ui/elements/closex.tga" noclick="1" />
									</widgetstate>
									<widgetstate statename="over">
										<frame texture="/ui/frames/rounded_bg_white.tga" borderthickness="0.5h" color="#910000" blockinput="0" noclick="1"/>
										<frame texture="/ui/frames/roundframe.tga" color="0 0 0 1" borderthickness="0.5h" blockinput="0" noclick="1"/>
										<image width="1.4h" height="1.4h" align="center" valign="center" color=".75 .75 .75 1" texture="/ui/elements/closex.tga" noclick="1" />
									</widgetstate>
									<widgetstate statename="down" x="1" y="1">
										<frame texture="/ui/frames/rounded_bg_white.tga" borderthickness="0.5h" color="#910000" blockinput="false" noclick="1"/>
										<frame texture="/ui/frames/roundframe.tga" color="0 0 0 1" borderthickness="0.5h" blockinput="false" noclick="1"/>
										<image width="1.4h" height="1.4h" align="center" valign="center" color="1 1 1 1" texture="/ui/elements/closex.tga" noclick="1" />
									</widgetstate>
								</button>
							</panel>
						</panel>
						
						<panel name="game_lobby_cards_panel" width="30h" height="4h" align="center" valign="bottom" y="-6h" color="invisible">
							<label name="game_lobby_trial_label" align="center" valign="bottom" textalign="center" textvalign="center" shadow="true" color="0.86 0.64 0.38 1.0" font="dyn_10" content="test cards"  noclick="true" wrap="true"/>
							<panel name="game_lobby_coupon_panel" align="center" valign="align" color="invisible">
								<image y="0.5h" name="game_lobby_coupon_bg" width="85%" height="180%" align="center" noclick="true" texture="/ui/elements/gotcoupons.tga"/>
								<label name="game_lobby_coupon_label" y="1.5h" align="center" textalign="center" textvalign="center" shadow="true" color="#ffdf5e" outline="true" outlinecolor="#870202" font="dyn_12" content="compendium_coupon" noclick="true" />
							</panel>
							<panel name="game_lobby_gca_panel" align="center" valign="align" noclick="1" visible="0">
								<image y="2h" width="24h" height="6h" align="center" valign="center" noclick="true" texture="/ui/fe2/elements/gca/icon_2.tga"/>
							</panel>
						</panel>

						<button
							visible="1" name="game_lobby_avatar_splash_close"
							x="5.0h" y="1.9h"
							width="2.8h" height="2.8h"
							align="right"
							color="invisible"
							onclick="PlaySound('/shared/sounds/ui/ccpanel/button_close_02.wav');"
							onmouseover="PlaySound('/shared/sounds/ui/ccpanel/button_over_01.wav');"
							onclicklua="Game_Lobby:HideCardception()"
							onrightclicklua="Game_Lobby:HideCardception()"
						>
							<widgetstate statename="up">
								<frame texture="/ui/frames/rounded_bg_white.tga" borderthickness="0.5h" color="#dc0000" blockinput="false" noclick="true"/>
								<frame texture="/ui/frames/roundframe.tga" color="0 0 0 1" borderthickness="0.5h" blockinput="false" noclick="true"/>
								<image width="1.4h" height="1.4h" align="center" valign="center" color="1 1 1 1" texture="/ui/elements/closex.tga" noclick="true" />
							</widgetstate>
							<widgetstate statename="over">
								<frame texture="/ui/frames/rounded_bg_white.tga" borderthickness="0.5h" color="#910000" blockinput="false" noclick="true"/>
								<frame texture="/ui/frames/roundframe.tga" color="0 0 0 1" borderthickness="0.5h" blockinput="false" noclick="true"/>
								<image width="1.4h" height="1.4h" align="center" valign="center" color=".75 .75 .75 1" texture="/ui/elements/closex.tga" noclick="true" />
							</widgetstate>
							<widgetstate statename="down" x="1" y="1">
								<frame texture="/ui/frames/rounded_bg_white.tga" borderthickness="0.5h" color="#910000" blockinput="false" noclick="true"/>
								<frame texture="/ui/frames/roundframe.tga" color="0 0 0 1" borderthickness="0.5h" blockinput="false" noclick="true"/>
								<image width="1.4h" height="1.4h" align="center" valign="center" color="1 1 1 1" texture="/ui/elements/closex.tga" noclick="true" />
							</widgetstate>
						</button>
					</panel>

					<!--
					Trigger('GameLobbyHeroPurchase',
						param0, 			## hero entity ##
						param1, 			## is EAP ##
						param2, 			## is Free rotation ##
						param3, 			## Has silver price ##
						param4, 			## silver price ##
						param5, 			## has gold price ##
						param6, 			## gold price ##
						param7, 			## has token price ##
						param8,  			## token price ##
						param9  			## spawn mode##
					)
					-->
					<panel
						name="globby_PurchaseHero"
						y="1%" width="98%" height="97%" align="center"
						color="0 0 0 .8"
						visible="false"
						watch="GameLobbyHeroPurchase"
						ontriggerlua="
							if AtoB(param1) then
								Game_Lobby.ClickedViewAvatars(param0, nil, tonumber(param6))
								self:FadeOut(250)
							elseif (param0) and NotEmpty(param0) then
								self:FadeIn(250)
							else
								self:FadeOut(250)
							end
							"
						watch1="MicroStoreResults"
						ontrigger1lua="Game_Lobby.MicroStoreResults(...)"
					>
						<panel x="0.2h" y="-1.3h" width="99%" height="5.4h" align="center" noclick="true">
							<image x="-50@" height="100%" width="-80@" align="right" utile="true" uscale=".4" texture="/ui/fe2/store/store_tab_center.tga" noclick="true"
								resourcecontext="lobby" watch="GameLobbyHeroPurchase" ontrigger="If(param1, SetTexture('/ui/fe2/store/store_tab_premium_center.tga'), SetTexture('/ui/fe2/store/store_tab_center.tga'));"
							/>
							<image height="100%" width="50@" texture="/ui/fe2/store/store_tab_left.tga" noclick="true"
								resourcecontext="lobby" watch="GameLobbyHeroPurchase" ontrigger="If(param1, SetTexture('/ui/fe2/store/store_tab_premium_left.tga'), SetTexture('/ui/fe2/store/store_tab_left.tga'));"
							/>
							<image align="right" height="100%" width="50@" texture="/ui/fe2/store/store_tab_right.tga" noclick="true"
								resourcecontext="lobby" watch="GameLobbyHeroPurchase" ontrigger="If(param1, SetTexture('/ui/fe2/store/store_tab_premium_right.tga'), SetTexture('/ui/fe2/store/store_tab_right.tga'));"
							/>
							<image x="3%" y="10%" align="left" valign="top" height="50%" width="50@" texture="/ui/fe2/store/store_tab_connector.tga" noclick="true"/>
							<image x="-3%" y="10%" align="right" valign="top" height="50%" width="50@" texture="/ui/fe2/store/store_tab_connector.tga" noclick="true"/>
							<label x="3.5%" y="-8%" height="50%" valign="bottom" textalign="left" textvalign="center" font="dyn_14" color="white" outline="true" noclick="true" content="globby_purchase_hero"/>

							<!-- User Coin Count -->
							<panel x="-7.5%" y="-0.4h" width="16.5h" height="2.5h" valign="bottom" align="right" noclick="true">
								<frame texture="/ui/frames/rounded_bg_white.tga" borderthickness="0.6h" color="0 0 0 .4" noclick="true"/>
								<frame texture="/ui/frames/roundframe.tga" borderthickness="0.6h" color=".2 .2 .2 1" noclick="true" />
								<image x="-1.0h" y="0.1h" texture="/ui/fe2/lobby/altav_goldsack.tga" height="3.2h" width="3.2h" valign="bottom" noclick="true"/>
								<panel color="invisible" height="100%" float="right" padding="0.5h" x="1.75h" width="-2.5h">
									<label
										width="4.5h"
										height="100%"
										align="left"
										textalign="right"
										textvalign="center"
										font="dyn_9"
										color="#FFCC00"
										outline="true"
										noclick="true"
										watch="GoldCoins"
										ontrigger="SetText(FtoA(param, 0, 0, ','));"
										content=""
									/>
									<panel height="100%" width="1.75h">
										<image width="1.75h" height="1.75h" valign="center" noclick="true" texture="/ui/fe2/store/gold_coins.tga" />
									</panel>
									<label
										width="4.5h"
										height="100%"
										align="left"
										textalign="right"
										textvalign="center"
										font="dyn_9"
										color="#c0d5ed"
										outline="true"
										noclick="true"
										watch="SilverCoins"
										ontrigger="SetText(FtoA(param, 0, 0, ','));"
										content=""
									/>
									<panel height="100%" width="1.75h">
										<image width="1.75h" height="1.75h" valign="center" noclick="true" texture="/ui/fe2/store/silver_coins.tga" />
									</panel>
								</panel>
							</panel>

							<!-- Close -->
							<panel x="-3.0%" y="-0.7h" width="2.0h" height="2.0h" valign="bottom" align="right" noclick="true">
								<button
									color="invisible"
									onclick="PlaySound('/shared/sounds/ui/ccpanel/button_close_02.wav'); Call('globby_PurchaseHero', 'FadeOut(250);');"
									onmouseover="PlaySound('/shared/sounds/ui/ccpanel/button_over_01.wav');"
								>
									<widgetstate statename="up">
										<frame texture="/ui/frames/rounded_bg_white.tga" borderthickness="0.5h" color="#520000" blockinput="false" noclick="true"/>
										<frame texture="/ui/frames/roundframe.tga" color="0 0 0 1" borderthickness="0.5h" blockinput="false" noclick="true"/>
										<image width="1.3h" height="1.3h" align="center" valign="center" color=".75 .75 .75 1" texture="/ui/elements/closex.tga" noclick="true" />
									</widgetstate>
									<widgetstate statename="over">
										<frame texture="/ui/frames/rounded_bg_white.tga" borderthickness="0.5h" color="#c50000" blockinput="false" noclick="true"/>
										<frame texture="/ui/frames/roundframe.tga" color="0 0 0 1" borderthickness="0.5h" blockinput="false" noclick="true"/>
										<image width="1.3h" height="1.3h" align="center" valign="center" color="1 1 1 1" texture="/ui/elements/closex.tga" noclick="true" />
									</widgetstate>
									<widgetstate statename="down" x="1" y="1">
										<frame texture="/ui/frames/rounded_bg_white.tga" borderthickness="0.5h" color="#9c0000" blockinput="false" noclick="true"/>
										<frame texture="/ui/frames/roundframe.tga" color="0 0 0 1" borderthickness="0.5h" blockinput="false" noclick="true"/>
										<image width="1.3h" height="1.3h" align="center" valign="center" color="1 1 1 1" texture="/ui/elements/closex.tga" noclick="true" />
									</widgetstate>
								</button>
							</panel>
						</panel>

						<panel name="globby_PurchaseHero_1" y="4.2h" height="40.0h" width="59.0h" align="center" noclick="true">

							<frame texture="/ui/frames/rounded_bg_white.tga" borderthickness="0.6h" color="0 0 0 .4" noclick="true"/>
							<frame texture="/ui/frames/roundframe.tga" borderthickness="0.6h" color=".3 .3 .3 1" noclick="true"
								watch="GameLobbyHeroPurchase" ontrigger="If(param1, SetBorderColor('1.0 0.74 0.0 1.0'), SetBorderColor('.3 .3 .3 1'));"
							/>

							<panel name="globby_PurchaseHero_2" y="4.2h" width="-0.8h" height="-5.0h" align="center">

								<panel name="globby_PurchaseHero_3" x="0.4h" width="29.5h" height="100%" valign="center" noclick="true">
									<modelpanel name="game_lobby_alt_preview_modelpanel_2"
										noclick="true"
										model=""
										anim="idle"

										cameranear="1.0"
										camerafar="30000.0"
										depthclear="true"
										depthcompress="false"
										lookat="false"
										cameradistance="30"
										camerapos="0 1000 1000"
										cameraangles="-45 0 180"
										camerafov="6"
										modelpos="0 0 0"
										modelangles="0.0 0.0 0.0"
										modelscale="1.0"

										sunazimuth="120"
										sunaltitude="50"
										suncolor="0.9 0.9 0.9"
										ambientcolor="0.6 0.7 0.7"
										onload="SetTeamColor('1 0 0');"
										cull="false"

										resourcecontext="lobby"
										onhide="##SetModel(''); SetEffect('');##"
										onshow=""
										watch="GameLobbyHeroPurchase"
										ontrigger="
										SetModel(GetHeroPreviewModelPathFromProduct(param0));
										SetEffect(GetHeroPreviewPassiveEffectPathFromProduct(param0));
										SetModelPos(GetHeroPreviewPosFromProduct(param0));
										SetModelAngles(GetHeroPreviewAnglesFromProduct(param0));
										SetModelScale(GetHeroPreviewScaleFromProduct(param0));
										"
									/>
									<frame color="invisible" bordercolor=".2 .2 .2 1" borderthickness="1" noclick="true"
										watch="GameLobbyHeroPurchase" ontrigger="If(param1, SetBorderColor('1.0 0.74 0.0 0.8'), SetBorderColor('.2 .2 .2 1'));"
									/>

									<!-- Icon -->
									<panel x="0.8h" y="0.8h" width="6.0h" height="6.0h" noclick="true">
										<image
											noclick="true"
											watch="GameLobbyHeroPurchase"
											ontrigger="SetTexture(GetEntityIconPath(param0));"
											resourcecontext="lobby"
										/>
										<frame color="invisible" bordercolor=".2 .2 .2 1" borderthickness="1" noclick="true"
											watch="GameLobbyHeroPurchase" ontrigger="If(param1, SetBorderColor('1.0 0.74 0.0 0.8'), SetBorderColor('.2 .2 .2 1'));"
										/>
									</panel>
								</panel>

								<panel name="globby_PurchaseHero_4" x="-0.4h" width="-31.0h" align="right" float="bottom" padding="0.6h">
									<label y="0.8h" fity="true" width="-1.0h" align="center" textalign="center" font="dyn_12" color="#FFCC00" shadow="true" wrap="true" content="globby_purchase_txt1" noclick="true"
										watch="GameLobbyHeroPurchase" ontrigger="If(param1, SetText(Translate('globby_purchase_eap_txt1')), SetText(Translate('globby_purchase_txt1')));"
									/>
									<label fity="true" fitypadding="0.3h" width="-1.0h" align="center" textalign="center" font="dyn_11" color=".8 .8 .8 1" shadow="true" wrap="true" content="globby_purchase_txt2" noclick="true"
										watch="GameLobbyHeroPurchase" ontrigger="If(param1, If(AccountStanding ge accountStanding_allModeThreshold, SetText(FormatStringNewLine(Translate('globby_purchase_eap_txt2')#'\\n'#Translate('globby_purchase_txt3'))), SetText(FormatStringNewLine(Translate('globby_purchase_eap_nonleg_txt2')#'\\n'#Translate('globby_purchase_txt3')))), SetText(Translate('globby_purchase_txt2')));"
									/>

									<!-- Purchase -->
									<panel grow="1" growinvis="0" regrow="1" width="-1.0h" align="center" noclick="true" stickytoinvis="0" >
										<frame texture="/ui/frames/rounded_bg_white.tga" borderthickness="0.6h" color="#1d3d3f"
											watch="GameLobbyHeroPurchase" ontrigger="If(param1, SetColor('#423408'), SetColor('#1d3d3f')); If(param1, SetBorderColor('#423408'), SetBorderColor('#1d3d3f'));"
										/>
										<frame texture="/ui/frames/roundframe.tga" color="0 0 0 1" borderthickness="0.6h"/>

										<panel grow="1" growinvis="0" regrow="1" width="100%" float="bottom" padding="0.7h" noclick="true">
											<panel y="0.7h" width="-1.4h" height="2.4h" align="center" noclick="true">
												<frame texture="/ui/frames/rounded_bg_white.tga" borderthickness="0.6h" color="#10777d"
													watch="GameLobbyHeroPurchase" ontrigger="If(param1, SetColor('#c09309'), SetColor('#10777d')); If(param1, SetBorderColor('#c09309'), SetBorderColor('#10777d'));"
												/>
												<frame texture="/ui/frames/roundframe.tga" color="0 0 0 1" borderthickness="0.6h"/>
												<label height="100%" textalign="center" textvalign="center" font="dyn_11" color="1 1 1 1" shadow="true" content="globby_purchase_btn" noclick="true"
													watch="GameLobbyHeroPurchase" ontrigger="If(param1, SetText(Translate('globby_eap_btn')), SetText(Translate('globby_purchase_btn')));"
												/>
											</panel>

											<!-- Use Gold -->
											<panel width="-1.4h" height="2.6h" align="center" noclick="true" visible="true" watch="GameLobbyHeroPurchase" ontrigger="SetVisible(param6 gt 0);" >

												<panel width="6.5h" noclick="true"
													onload=""
												>
													<frame texture="/ui/frames/rounded_bg_white.tga" borderthickness="0.6h" color="0 0 0 1" noclick="true"/>
													<frame texture="/ui/frames/roundframe.tga" borderthickness="0.6h" color=".2 .2 .2 1" noclick="true" />
													<image x="0.4h" width="1.8h" height="1.8h" valign="center" texture="/ui/fe2/store/gold_coins.tga"/>
													<label
														width="4.4h"
														height="100%"
														align="right"
														textalign="center"
														textvalign="center"
														font="dyn_10"
														color="white"
														shadow="true"
														noclick="true"
														watch="GameLobbyHeroPurchase"
														ontrigger="SetText(param6);"
														content=""
													/>
												</panel>

												<instance name="button2" button_name="globby_PurchaseHero_4_button_needcoins"
													width="-7.5h"
													height="-0.4h"
													align="right" valign="center"
													borderthickness="0.6h"
													label="mstore_needcoins"
													font="dyn_10"
													enabled="false"
													watch="GameLobbyHeroPurchase"
													ontrigger="SetVisible(GoldCoins lt param6);"
												/>

												<instance
													name="button2" button_name="gameLobbyHeroPurchaseGoldButton" width="-7.5h"
													height="-0.4h"
													align="right" valign="center"
													borderthickness="0.6h"
													label="globby_purchase_gold"
													font="dyn_10"
													enabled="true"
													watch="GameLobbyHeroPurchase"
													ontrigger="
														If(
															GoldCoins ge param6,
															Split(
																SetOnClick('CallEventParams(name, \''#param0#'\', '#param1#');'),
																SetVisible(true)
															),
															Split(
																SetOnClick('PlaySound(\'/shared/sounds/ui/ccpanel/button_click_02.wav\');'),
																SetVisible(false)
															)
														);
													"
													onevent="
														PlaySound('/shared/sounds/ui/ccpanel/button_click_02.wav');
														Set('_gLobbyHeroPurchaseEntity', param0);
														SubmitForm('gLobbyBuyHero', 'account_id', GetAccountID(), 'request_code', 8, 'cookie', GetCookie(), 'hero_name', param0, 'avatar_code', If(param1, 'eap', 'Hero'), 'type', If(param1, 'EAP', 'Hero'), 'currency', 0);
													"
												/>

											</panel>

											<!-- EAP Redirect -->
											<panel sticky="1" stickytoinvis="0" width="-1.4h" height="2.6h" align="center" noclick="1" visible="0" watch="GameLobbyHeroPurchase" ontrigger="SetVisible(param1);" >
												<instance name="button2" button_name="gameLobbyHeroGoToEAPButton"
													width="-7.5h"
													height="-0.4h"
													align="right" valign="center"
													borderthickness="0.6h"
													label="globby_purchase_eap"
													font="dyn_10"
													enabled="true"
													onclick="
														Set('microStore_targetCategory', 58);
														HideWidget('globby_PurchaseHero');
														"
													onclicklua="
														local store = GetCvarBool('cg_store2_') and 'store_container2' or 'store_container'
														UIManager.GetInterface('main'):HoNMainF('MainMenuPanelToggle', store, nil, false)"
												/>
											</panel>

											<!-- Use Silver -->
											<panel sticky="1" stickytoinvis="0" width="-1.4h" height="2.6h" align="center" noclick="true" visible="true"  watch="GameLobbyHeroPurchase" ontrigger="SetVisible(!param1);" >

												<panel width="6.5h" noclick="true"
													onload=""
												>
													<frame texture="/ui/frames/rounded_bg_white.tga" borderthickness="0.6h" color="0 0 0 1" noclick="true"/>
													<frame texture="/ui/frames/roundframe.tga" borderthickness="0.6h" color=".2 .2 .2 1" noclick="true" />
													<image x="0.4h" width="1.8h" height="1.8h" valign="center" texture="/ui/fe2/store/silver_coins.tga"/>
													<label
														width="4.4h"
														height="100%"
														align="right"
														textalign="center"
														textvalign="center"
														font="dyn_10"
														color="white"
														shadow="true"
														noclick="true"
														watch="GameLobbyHeroPurchase"
														ontrigger="SetText(param4);"
														content=""
													/>
												</panel>

												<instance name="button2" button_name="globby_PurchaseHero_4_button_needcoinsSilver"
													width="-7.5h"
													height="-0.4h"
													align="right" valign="center"
													borderthickness="0.6h"
													label="mstore_needcoins"
													font="dyn_10"
													enabled="false"
													watch="GameLobbyHeroPurchase"
													ontrigger="SetVisible(SilverCoins lt param4);"
												/>

												<instance name="button2" button_name="gameLobbyHeroPurchaseSilverButton"
													width="-7.5h"
													height="-0.4h"
													align="right" valign="center"
													borderthickness="0.6h"
													label="globby_purchase_silver"
													font="dyn_10"
													enabled="true"

													watch="GameLobbyHeroPurchase"
													ontrigger="
														If(
															SilverCoins ge param4,
															Split(
																SetOnClick('CallEventParams(name, \''#param0#'\', '#param1#');'),
																SetVisible(true)
															),
															Split(
																SetOnClick('PlaySound(\'/shared/sounds/ui/ccpanel/button_click_02.wav\');'),
																SetVisible(false)
															)
														);
													"
													onevent="
														PlaySound('/shared/sounds/ui/ccpanel/button_click_02.wav');
														Set('_gLobbyHeroPurchaseEntity', param0);
														SubmitForm('gLobbyBuyHero', 'account_id', GetAccountID(), 'request_code', 8, 'cookie', GetCookie(), 'hero_name', param0, 'avatar_code', If(param1, 'eap', 'Hero'), 'type', If(param1, 'EAP', 'Hero'), 'currency', 1);
													"
												/>

											</panel>

											<panel sticky="1" stickytoinvis="0" width="-1.4h" height="0" align="center" noclick="true"/>
										</panel>
									</panel>

									<panel width="-1.0h" height="0" align="center" noclick="true"/>

									<!-- Rent -->
									<panel grow="true" width="-1.0h" align="center" noclick="true"
											watch="GameLobbyHeroPurchase"
											ontrigger="SetVisible(param7 and !param1 and !StringEquals(param9, 'BanHero'));"
									>
										<frame texture="/ui/frames/rounded_bg_white.tga" borderthickness="0.6h" color="#1d243f"/>
										<frame texture="/ui/frames/roundframe.tga" color="0 0 0 1" borderthickness="0.6h"/>
										<panel grow="true" width="100%" float="bottom" padding="0.7h" noclick="true">
											<panel y="0.7h" width="-1.4h" height="2.4h" align="center" noclick="true">
												<frame texture="/ui/frames/rounded_bg_white.tga" borderthickness="0.6h" color="#212f6b"/>
												<frame texture="/ui/frames/roundframe.tga" color="0 0 0 1" borderthickness="0.6h"/>
												<label height="100%" textalign="center" textvalign="center" font="dyn_11" color=".8 .8 .8 1" shadow="true" content="This Match Only" noclick="true" />
											</panel>

											<!-- Use Token -->
											<panel width="-1.4h" height="2.6h" align="center" valign="bottom" noclick="true" visible="true">

												<panel width="6.5h" noclick="true"
													onload=""
												>
													<frame texture="/ui/frames/rounded_bg_white.tga" borderthickness="0.6h" color="0 0 0 1" noclick="true"/>
													<frame texture="/ui/frames/roundframe.tga" borderthickness="0.6h" color=".2 .2 .2 1" noclick="true" />
													<image x="0.4h" width="1.6h" height="1.6h" valign="center" texture="/ui/fe2/store/icons/hero_token.tga"/>
													<label
														width="4.4h"
														height="100%"
														align="right"
														textalign="center"
														textvalign="center"
														font="dyn_10"
														color="white"
														shadow="true"
														noclick="true"
														watch="GameLobbyHeroPurchase"
														ontrigger="SetText(param8);"
														content=""
													/>
												</panel>

												<instance name="button2" button_name="gameLobbyPurchaseHeroButtonUseToken"
													width="-7.5h"
													height="-0.4h"
													align="right" valign="center"
													borderthickness="0.6h"
													label="globby_play_token"
													font="dyn_10"
													enabled="true"
													labelwatch="GameLobbyHeroPurchase"
													labelontrigger="If(param10, SetText(Translate('globby_play_pass')), SetText(Translate('globby_play_token')));"
													watch="GameLobbyHeroPurchase"
													ontrigger="
													SetOnclick(param9 # '(\'' # param0 # '\'); PlaySound(\'/shared/sounds/ui/hero_select/button_select.wav\'); Call(\'globby_PurchaseHero\', \'FadeOut(250);\');  ');

													"
												/>

											</panel>

											<panel width="-1.4h" height="0" align="center" noclick="true"/>
										</panel>
									</panel>

								</panel>

							</panel>

							<!-- Hero Name -->
							<panel y="-1.1h" width="96%" height="5.0h" align="center" noclick="true">
								<image x="-50@" height="100%" width="-80@" align="right" utile="true" uscale=".4" texture="/ui/fe2/store/store_tab_center.tga" noclick="true"
									resourcecontext="lobby" watch="GameLobbyHeroPurchase" ontrigger="If(param1, SetTexture('/ui/fe2/store/store_tab_premium_center.tga'), SetTexture('/ui/fe2/store/store_tab_center.tga'));"
								/>
								<image height="100%" width="50@" texture="/ui/fe2/store/store_tab_left.tga" noclick="true"
									resourcecontext="lobby" watch="GameLobbyHeroPurchase" ontrigger="If(param1, SetTexture('/ui/fe2/store/store_tab_premium_left.tga'), SetTexture('/ui/fe2/store/store_tab_left.tga'));"
								/>
								<image align="right" height="100%" width="50@" texture="/ui/fe2/store/store_tab_right.tga" noclick="true"
									resourcecontext="lobby" watch="GameLobbyHeroPurchase" ontrigger="If(param1, SetTexture('/ui/fe2/store/store_tab_premium_right.tga'), SetTexture('/ui/fe2/store/store_tab_right.tga'));"
								/>
								<image x="8%" y="10%" align="left" valign="top" height="50%" width="50@" texture="/ui/fe2/store/store_tab_connector.tga" noclick="true" />
								<image x="-8%" y="10%" align="right" valign="top" height="50%" width="50@" texture="/ui/fe2/store/store_tab_connector.tga" noclick="true" />
								<label
									y="-8%"
									height="50%"
									width="100%"
									valign="bottom"
									textalign="center"
									textvalign="center"
									font="dyn_12"
									color="white"
									outline="true"
									noclick="true"
									watch="GameLobbyHeroPurchase"
									ontrigger="SetText(GetEntityDisplayName(param0));"
									content=""
								/>
							</panel>

						</panel>

						<instance name="button2" button_name="gameLobbyPurchaseHeroRepick"
							y="45.0h"
							height="2.4h" width="22.0h"
							align="center"
							borderthickness="0.6h"
							label="globby_purchase_repick"
							onclick="PlaySound('/shared/sounds/ui/ccpanel/button_close_02.wav'); Call('globby_PurchaseHero', 'FadeOut(250);');"
							font="dyn_10"
							enabled="true"
							watch=""
							ontrigger=""
						/>

						<!-- Status -->
						<panel watch="gLobbyBuyHeroStatus" ontrigger="SetVisible(param0 == 1);" color="0 0 0 0.75" visible="false">
							<panel align="center" valign="center" width="25h" height="6h" color="black">
								<frame color="invisible" bordercolor="#455166" borderthickness="1" noclick="true" />
								<animatedimage valign="center" x="0.5h" width="5h" height="5h" texture="/ui/elements/throb/throb.tga" noclick="true" loop="1" fps="30" onshow="StartAnim(1);" />
								<label align="right" x="-0.5h" width="-7h" shadow="true" color="white" font="dyn_12" textvalign="center" content="mstore_processing_elipses"/>
							</panel>
						</panel>

						<!-- Error -->
						<panel name="globbyBuyHeroError" watch="gLobbyBuyHeroStatus" ontrigger="If(param0 == 3, DoEvent(0));" color="0 0 0 0.75" visible="false"
							onevent0="FadeIn(200);"
							onevent1="FadeOut(200);"
						>
							<panel width="35h" grow="true" regrow="true" align="center" valign="center" noclick="true" color="black">
								<frame color="invisible" bordercolor="#455166" borderthickness="1" noclick="true" />
								<panel float="bottom" width="35h" grow="true" regrow="true">
									<instance
										name="header_bar"
										buttonsize="1.8h"
										height="2.4h"
										lbl="mstore_error_generic"
										show_close="true"
										onmouseover="PlaySound('/shared/sounds/ui/ccpanel/button_over_02.wav');"
										onclick="PlaySound('/shared/sounds/ui/ccpanel/button_click_02.wav'); CallEvent('gLobbyBuyAvatarError', 1);"
									/>
									<panel height="0.5h"/>
									<panel grow="true" regrow="true" width="100%">
										<panel width="-1h" align="center" grow="true" regrow="true" float="bottom" padding="0.5h">
											<label font="dyn_10" wrap="true" fity="true" color="white" shadow="true" watch0="gLobbyBuyHeroResults" ontrigger0="If(param2 ge 0, SetText(Translate('mstore_error' # param2))); If(param3 ge 0, SetText(Translate('mstore_error' # param3)));" watch1="gLobbyBuyHeroStatus" ontrigger1="If(param0 == 3, SetText(Translate('mstore_error_connect')));"/>
											<panel height="2.4h" width="100%">
												<instance name="button2" button_name="globbyBuyHeroErrorOK"
													width="6h" height="100%"
													align="center"
													label="general_ok"
													onclick="CallEvent('globbyBuyHeroError', 1);"
												/>
											</panel>
										</panel>
									</panel>
									<panel height="0.5h"/>
								</panel>
							</panel>
						</panel>
					</panel>

					<!-- Success -->
					<panel width="100%" height="100%" color="0 0 0 0.5" name="gLobbyBuyHeroSuccess" onevent0="FadeIn(150);" onevent1="FadeOut(150);" visible="false">
						<panel width="30h" grow="true" align="center" valign="center" noclick="1">
						<frame color="0 0 0 .8" bordercolor="#455166" borderthickness="1" noclick="1" />
							<panel float="bottom" width="100%" grow="true">
								<instance
									name="header_bar"
									buttonsize="1.8h"
									height="2.4h"
									lbl="mstore_buyitem_success"
									show_close="true"
									onmouseover="PlaySound('/shared/sounds/ui/ccpanel/button_over_02.wav');"
									onclick="PlaySound('/shared/sounds/ui/ccpanel/button_click_02.wav'); CallEvent('gLobbyBuyHeroSuccess', 1);"
								/>
								<panel height="0.5h"/>
								<panel width="100%" grow="true">
									<panel width="-1.0h" align="center" grow="true" noclick="1">
										<frame texture="/ui/frames/tooltip_bg.tga" color="#2c4b6c" noclick="1"/>
										<frame color="invisible" bordercolor="#455166" borderthickness="1" noclick="1" />
										<panel width="-1.0h" align="center" color="invisible" noclick="1" grow="true" float="bottom">
											<panel height="0.5h"/>
											<label font="dyn_10" wrap="true" fity="true" color="white" shadow="true" textalign="center" content="mstore_buyitem_success_body"/>
											<panel height="0.5h"/>
											<panel width="100%" grow="true">
												<instance name="button2" button_name="gLobbyBuyHeroSuccessPlayHero"
													width="12h" height="2.5h" x="-7h"
													align="center"
													label="general_play_hero"
													onclick="PlaySound('/ui/fe2/store/sounds/purchase_avatar.wav'); SpawnHero(_gLobbyHeroPurchaseEntity); Set('_gLobbyHeroPurchaseEntity', ''); Call('globby_PurchaseHero', 'FadeOut(250);'); CallEvent('gLobbyBuyHeroSuccess', 1);"
												/>
												<instance name="button2" button_name="gLobbyBuyHeroSuccessOK"
													width="12h" height="2.5h" x="7h"
													align="center"
													label="general_ok"
													onclick="PlaySound('/ui/fe2/store/sounds/purchase_avatar.wav'); Set('_gLobbyHeroPurchaseEntity', ''); Call('globby_PurchaseHero', 'FadeOut(250);'); CallEvent('gLobbyBuyHeroSuccess', 1);"
												/>
											</panel>
											<panel height="0.5h"/>
										</panel>
									</panel>
								</panel>
								<panel height="0.5h"/>
							</panel>
						</panel>
					</panel>
					<!-- / F2P Purchase Hero -->
				</panel>
			</panel>

			<!-- Arcade countdown -->
			<panel noclick="1"
				watch="GamePhase"
				ontrigger="SetVisible(param0 == 3 || param0 == 2)"
			>
				<panel y="5h" width="80h" height="30h" align="center" noclick="1"
					watch="HeroSelectTimer"
					ontrigger="If(param2 and param3 and (param0 le 5000), PlaySound('/shared/sounds/ui/hero_select/button_clock.wav'));"
				>
					<modelpanel name="game_lobby_countdown_modelpanel"
						visible="false"
						noclick="1"
						anim="idle"
						camerapos="0 350 0"
						cameraangles="0 0 180"
						camerafov="50"
						cameranear="1"
						carmerafar="5000"
						depthclear="false"
						depthcompress="true"
						sunazimuth="-90"
						sunaltitude="180"
						suncolor="4 1 1"
						onshow="SetModel('/ui/common/models/arcade_text/countdown.mdf'); SetEffect('/ui/common/models/arcade_text/countdown.effect'); SetAnim('idle'); "
						watch="HeroSelectTimer"
						ontrigger="
							If(!param2 or param0 gt 6000, SetVisible(false));
							If(param2 and param3 and (param0 le 6000), SetVisible(true));
							If(param2 and param3 and (param0 le 1000), PlaySound('/shared/sounds/announcer/startgame.wav'));
						"
					/>
				</panel>
			</panel>

			<panel  name="asset_loading_center" watch="GamePhase" ontrigger="SetVisible(param0 == 4);" color="invisible" y="-110h"  align="center" width="29.1h" height="58.2h" noclick="1" visible="0">
				<panel  y="-3.6h" noclick="1">
					<panel color="white"
						resourcecontext="lobby" watch9="MainRegisterTextures"
						ontrigger9lua="ResourceManager.RegisterTexture('/ui/fe2/lobby/pod_race_post.tga', 'lobby', self)"
					/>
					<panel align="center" width="7h"  float="bottom" padding="4.89h">
						<panel y="7.8h" height="4h">
							<panel width="40%" align="left" >
								<label name="race_result_0" width="100%" height="100%" textvalign="center" textalign="center" valign="center" align="center" font="dyn_14" color="yellow" shadow="true"></label>
							</panel>
							<panel width="40%" x="-4%" align="right" >
								<label name="race_result_5" width="100%" height="100%" textvalign="center" textalign="center" valign="center" align="center" font="dyn_14" color="yellow" shadow="true"></label>
							</panel>
						</panel>

						<panel  height="4h">
							<panel width="40%" align="left" >
								<label name="race_result_1" width="100%" height="100%" textvalign="center" textalign="center" valign="center" align="center" font="dyn_14" color="yellow" shadow="true"></label>
							</panel>
							<panel width="40%" x="-4%" align="right" >
								<label name="race_result_6" width="100%" height="100%" textvalign="center" textalign="center" valign="center" align="center" font="dyn_14" color="yellow" shadow="true"></label>
							</panel>
						</panel>

						<panel  height="4h">
							<panel width="40%" align="left" >
								<label name="race_result_2" width="100%" height="100%" textvalign="center" textalign="center" valign="center" align="center" font="dyn_14" color="yellow" shadow="true"></label>
							</panel>
							<panel width="40%" x="-4%" align="right" >
								<label name="race_result_7" width="100%" height="100%" textvalign="center" textalign="center" valign="center" align="center" font="dyn_14" color="yellow" shadow="true"></label>
							</panel>
						</panel>
						<panel  height="4h">
							<panel width="40%" align="left" >
								<label name="race_result_3" width="100%" height="100%" textvalign="center" textalign="center" valign="center" align="center" font="dyn_14" color="yellow" shadow="true"></label>
							</panel>
							<panel width="40%" x="-4%" align="right" >
								<label name="race_result_8" width="100%" height="100%" textvalign="center" textalign="center" valign="center" align="center" font="dyn_14" color="yellow" shadow="true"></label>
							</panel>
						</panel>
						<panel  height="4h">
							<panel width="40%" align="left" >
								<label name="race_result_4" width="100%" height="100%" textvalign="center" textalign="center" valign="center" align="center" font="dyn_14" color="yellow" shadow="true"></label>
							</panel>
							<panel width="40%" x="-4%" align="right" >
								<label name="race_result_9" width="100%" height="100%" textvalign="center" textalign="center" valign="center" align="center" font="dyn_14" color="yellow" shadow="true"></label>
							</panel>
						</panel>
					</panel>
				</panel>
			</panel>
		</panel>

		<panel width="100%" height="100%" color="0 0 0 0.5" name="gLobbyBuyAvatarSuccess" onevent0="FadeIn(150);" onevent1="FadeOut(150);" visible="false">
			<panel width="30h" grow="true" align="center" valign="center" noclick="1">
			<frame color="0 0 0 .8" bordercolor="#455166" borderthickness="1" noclick="1" />
				<panel float="bottom" width="100%" grow="true">
					<instance
						name="header_bar"
						buttonsize="1.8h"
						height="2.4h"
						lbl="mstore_buyitem_success"
						show_close="true"
						onmouseover="PlaySound('/shared/sounds/ui/ccpanel/button_over_02.wav');"
						onclick="PlaySound('/shared/sounds/ui/ccpanel/button_click_02.wav'); CallEvent('gLobbyBuyAvatarSuccess', 1);"
					/>
					<panel height="0.5h"/>
					<panel width="100%" grow="true">
						<panel width="-1.0h" align="center" grow="true" noclick="1">
							<frame texture="/ui/frames/tooltip_bg.tga" color="#2c4b6c" noclick="1"/>
							<frame color="invisible" bordercolor="#455166" borderthickness="1" noclick="1" />
							<panel width="-1.0h" align="center" color="invisible" noclick="1" grow="true" float="bottom">
								<panel height="0.5h"/>
								<label font="dyn_10" wrap="true" fity="true" color="white" shadow="true" textalign="center" content="mstore_buyitem_success_body"/>
								<panel height="0.5h"/>
								<panel width="100%" grow="true">
									<instance name="button2" button_name="gLobbyBuyAvatarOK"
										width="6h" height="2.5h"
										align="center"
										label="general_ok"
										onclick="PlaySound('/ui/fe2/store/sounds/purchase_avatar.wav'); CallEvent('gLobbyBuyAvatarSuccess', 1);"
									/>
								</panel>
								<panel height="0.5h"/>
							</panel>
						</panel>
					</panel>
					<panel height="0.5h"/>
				</panel>
			</panel>
		</panel>

		<panel width="100%" height="100%" color="0 0 0 0.5" name="gLobbyBuyAvatarError" onevent0="FadeIn(150);" onevent1="FadeOut(150);" visible="false">
			<panel width="35h" grow="true" regrow="true" align="center" valign="center" noclick="1">
			<frame color="0 0 0 .8" bordercolor="#455166" borderthickness="1" noclick="1" />
				<panel float="bottom" width="100%" grow="true" regrow="true">
					<instance
						name="header_bar"
						buttonsize="1.8h"
						height="2.4h"
						lbl="mstore_error_generic"
						show_close="true"
						onmouseover="PlaySound('/shared/sounds/ui/ccpanel/button_over_02.wav');"
						onclick="PlaySound('/shared/sounds/ui/ccpanel/button_click_02.wav'); CallEvent('gLobbyBuyAvatarError', 1);"
					/>
					<panel height="0.5h"/>
					<panel width="100%" grow="true" regrow="true">
						<panel width="-1.0h" align="center" grow="true" noclick="1" regrow="true">
							<frame texture="/ui/frames/tooltip_bg.tga" color="#2c4b6c" noclick="1"/>
							<frame color="invisible" bordercolor="#455166" borderthickness="1" noclick="1" />
							<panel width="-1.0h" align="center" color="invisible" noclick="1" grow="true" regrow="true" float="bottom">
								<panel height="0.5h"/>
								<label font="dyn_10" wrap="true" fity="true" color="white" shadow="true" watch0="gLobbyBuyAvatarResults" ontrigger0="If((param1 == 0 or param1 == 1) and param2 ge 0, SetText(Translate('mstore_error' # param2)));" watch1="gLobbyBuyAvatarStatus" ontrigger1="If(param0 == 3, SetText(Translate('mstore_error_connect')));"/>
								<panel height="0.5h"/>
								<panel width="100%" grow="true">
									<instance name="button2" button_name="gLobbyBuyAvatarErrorOK"
										width="6h" height="2.5h"
										align="center"
										label="general_ok"
										onclick="CallEvent('gLobbyBuyAvatarError', 1);"
									/>
								</panel>
								<panel height="0.5h"/>
							</panel>
						</panel>
					</panel>
					<panel height="0.5h"/>
				</panel>
			</panel>
		</panel>

		<panel width="100%" height="100%" color="0 0 0 0.5" name="globby_buyavatar_confirmation" onevent0="FadeIn(150);" onevent1="FadeOut(150);" visible="false">
			<panel width="35h" grow="true" regrow="true" align="center" valign="center" noclick="1">
			<frame color="0 0 0 .8" bordercolor="#455166" borderthickness="1" noclick="1" />
				<panel float="bottom" width="100%" grow="true" regrow="true">
					<instance
						name="header_bar"
						buttonsize="1.8h"
						height="2.4h"
						lbl="globby_purchase"
						show_close="true"
						onmouseover="PlaySound('/shared/sounds/ui/ccpanel/button_over_02.wav');"
						onclick="PlaySound('/shared/sounds/ui/ccpanel/button_click_02.wav'); CallEvent('globby_buyavatar_confirmation', 1);"
					/>
					<panel height="0.5h"/>
					<panel width="100%" grow="true" regrow="true">
						<panel width="-1.0h" align="center" grow="true" noclick="1" regrow="true">
							<frame texture="/ui/frames/tooltip_bg.tga" color="#2c4b6c" noclick="1"/>
							<frame color="invisible" bordercolor="#455166" borderthickness="1" noclick="1" />
							<panel width="-1.0h" align="center" color="invisible" noclick="1" grow="true" regrow="true" float="bottom">
								<panel height="0.5h"/>
								<label font="dyn_11" wrap="true" fity="true" textalign="center" color="#00FF00" shadow="true" name="globby_buyavatar_conf_heroname" onevent0="SetText(_globby_buyavatar_avatarname);"/>
								<panel height="0.5h"/>
								<label font="dyn_12" wrap="true" fity="true" textalign="center" color="white" shadow="true" content="globby_purchase_avatar"/>
								<panel height="0.25h"/>
								<panel height="2.5h">
									<panel width="18h" align="center"
										onmouseover="
											ShowWidget('mstore_tip_costbreakdown');
										"
										onmouseout="
											HideWidget('mstore_tip_costbreakdown');
										"
										onhide="
											HideWidget('mstore_tip_costbreakdown');
										"
									>
										<panel align="left" width="48%" color="0 0 0 1" noclick="true">
											<frame color="0 0 0 .8" bordercolor="#455166" borderthickness="1" noclick="1" />
											<panel align="center" valign="center" width="-0.5h" height="-0.5h" noclick="true">
												<image height="100%" width="100@" align="right" noclick="true" texture="/ui/fe2/store/gold_coins.tga"/>


												<label noclick="true" font="dyn_10" width="-120@" height="100%" textalign="center" textvalign="center" color="#FFCC00" name="globby_buyavatar_conf_goldcost"
												onevent0="
													if(
														_globby_buyavatar_premium,
														if(
															_gLobbyLastTotalCoins lt _globby_buyavatar_cost,
															SetText('-'),
															SetText(_globby_buyavatar_cost)
														),
														if(
															(_gLobbyLastTotalCoins + _gLobbyLastTotalSilverCoins) lt _globby_buyavatar_cost,
															SetText('-'),
															if(
																_gLobbyLastTotalSilverCoins ge _globby_buyavatar_cost,
																SetText('0'),
																SetText(
																	Ceil(_globby_buyavatar_cost - _gLobbyLastTotalSilverCoins)
																)
															)
														)
													);

												"/>

											</panel>
										</panel>
										<panel align="right" width="48%" color="0 0 0 1" noclick="true">
											<frame color="0 0 0 .8" bordercolor="#455166" borderthickness="1" noclick="1" />
											<panel align="center" valign="center" width="-0.5h" height="-0.5h" noclick="true">
												<image height="100%" width="100@" align="right" noclick="true" texture="/ui/fe2/store/silver_coins.tga"/>
												<label noclick="true" font="dyn_10" width="-120@" height="100%" textalign="center" textvalign="center" color="#c0d5ed"
													name="globby_buyavatar_conf_silvercost"
													onevent0="
														if(
															_globby_buyavatar_premium,
															SetText('-'),
															SetText(
																if(
																	_gLobbyLastTotalSilverCoins ge _globby_buyavatar_cost,
																	_globby_buyavatar_cost,
																	if(
																		_gLobbyLastTotalSilverCoins + _gLobbyLastTotalCoins ge _globby_buyavatar_cost,
																		_gLobbyLastTotalSilverCoins,
																		'-'
																	)
																)
															)
														);
													"
												/>
											</panel>
										</panel>
									</panel>
								</panel>
								<panel height="0.5h"/>
								<panel width="100%" grow="true">
									<panel height="2.5h" grow="true" align="center" float="right" padding="0.5h">
										<instance name="button2" button_name="globbyBuyAvatarPurchase"
											width="9h" height="2.5h"
											label="mstore_purchase"
											onclick="
												PlaySound('/ui/fe2/store/sounds/purchase_avatar.wav');
												SubmitForm('gLobbyBuyAvatar', 'account_id', GetAccountID(), 'request_code', 8, 'cookie', GetCookie(), 'hero_name', _globby_buyavatar_heroname, 'avatar_code', _globby_buyavatar_avatarcode, 'type', 'Alt Avatar');
												CallEvent('globby_buyavatar_confirmation', 1);
											"
										/>
										<instance name="button2" button_name="globbyBuyAvatarCancel"
											label="general_cancel"
											width="7h" height="2.5h"
											onclick="
												CallEvent('globby_buyavatar_confirmation', 1);
											"
										/>
									</panel>


								</panel>
								<panel height="0.5h"/>
							</panel>
						</panel>
					</panel>
					<panel height="0.5h"/>
				</panel>
			</panel>
		</panel>

		<panel width="100%" height="100%" color="0 0 0 0.5" name="globby_buyavatar_confirmationPrem" visible="false"
			onevent0="FadeIn(150);Trigger('CardListRefresh');"
			onevent1="FadeOut(150);"
		>
			<panel width="35h" grow="true" regrow="true" align="center" valign="center" noclick="1">
			<frame color="0 0 0 .8" bordercolor="#455166" borderthickness="1" noclick="1" />
				<panel float="bottom" width="100%" grow="true" regrow="true">
					<instance
						name="header_bar"
						buttonsize="1.8h"
						height="2.4h"
						lbl="globby_purchase"
						show_close="true"
						onmouseover="PlaySound('/shared/sounds/ui/ccpanel/button_over_02.wav');"
						onclick="PlaySound('/shared/sounds/ui/ccpanel/button_click_02.wav'); CallEvent('globby_buyavatar_confirmationPrem', 1);"
					/>
					<panel height="0.5h"/>
					<panel width="100%" grow="true" regrow="true">
						<panel width="-1.0h" align="center" grow="true" noclick="1" regrow="true">
							<frame texture="/ui/frames/tooltip_bg.tga" color="#2c4b6c" noclick="1"/>
							<frame color="invisible" bordercolor="#455166" borderthickness="1" noclick="1" />
							<panel width="-1.0h" align="center" color="invisible" noclick="1" grow="true" regrow="true" float="bottom">
								<panel height="0.5h"/>
								<label font="dyn_11" wrap="true" fity="true" textalign="center" color="#00FF00" shadow="true" name="globby_buyavatar_confPrem_heroname" onevent0="SetText(_globby_buyavatar_avatarname);"/>
								<panel height="0.5h"/>
								<label font="dyn_12" wrap="true" fity="true" textalign="center" color="white" shadow="true" content="globby_purchase_avatar"/>
								<panel height="0.25h"/>
								<panel float="bottom" grow="true" regrow="true" growinvis="false" width="100%">
									<panel grow="true" align="center" width="-1h" color="0 0 0 1" sticky="true" stickytoinvis="false">
										<frame color="invisible" bordercolor="#455166" borderthickness="1" noclick="1" />
										<panel float="bottom" width="100%" grow="true">
											<panel height="0.5h"/>
											<label name="globby_buyavatar_confPrem_costDesc" font="dyn_10" align="center" width="-0.5h" wrap="true" fity="true" textalign="center" color="white" shadow="true" content="mstore_purchase_choosecurrency_desc"
												onevent="
													SetText(
														Translate(
															If(
																_globby_buyavatar_cost == 9006,
																'mstore_purchase_silveronly',
																If(
																	_globby_buyavatar_SilverCost == 9002,
																	'mstore_purchase_goldonly',
																	'mstore_purchase_choosecurrency_desc'
																)
															)
														)
													);
												"
											/>
											<panel height="0.3h"/>
										</panel>
									</panel>
									<panel height="0.5h" sticky="true" stickytoinvis="false"/>
									<panel name="CardListPannel_lobby" grow="true" width="-1h" color="0 0 0 1" sticky="true" stickytoinvis="false">
										<frame color="invisible" bordercolor="#455166" borderthickness="1" noclick="1" />
										<instance name="CardListControl" surffix="lobby" sticky="true" stickytoinvis="false" height="14.0h" width="100%"
											y="1h"
											itemheight="3.0h"
											label_y="10.0h"
											highlightcolor="#46adff42"
											selectedcolor="#438799a0"
											backgroundimage="/ui/fe2/elements/comm_item_bg.tga"
											backgroundimagecolor="#1d2f3b"
											backcolor="invisible"
											framecolor="invisible"
											textcolor="#aaaaaa"
											onselectlua="UIManager.GetInterface('main'):HoNGameLobbyF('OnCardListSelect', self:GetSelectedItemIndex())"
											watch="CardListRefresh"
											ontrigger="Clear();"
											ontriggerlua="
												UIManager.GetInterface('main'):HoNGameLobbyF('AddCardsListItems', GetCvarString('_globby_buyavatar_heroname'), GetCvarString('_globby_buyavatar_avatarcode'))
												"
										/>
									</panel>
								</panel>

								<panel height="0.5h"/>

								<panel height="6h">
									<panel name="globby_buyavatar_confPrem_costContainers" width="-33.3%">
										<panel height="100%" float="right" align="center" grow="true" regrow="true" growinvis="false">
											<panel name="globby_buyavatar_confPrem_goldContainer" width="10.85h" sticky="true" stickytoinvis="false"><!-- Gold Cost -->
												<panel vmargin="0.5h" width="10h" align="center">
													<panel height="2h" color="0 0 0 1">
														<frame color="invisible" bordercolor="#455166" borderthickness="1" noclick="1" />
														<panel hmargin="0.25h" vmargin="0.25h">
															<label noclick="true" font="dyn_10" width="-120@" height="100%" textalign="center" textvalign="center" outline="true" name="globby_buyavatar_confPrem_goldcost" color="#FFCC00" onevent0="SetText(_globby_buyavatar_cost);"/>
															<image height="100%" width="100@" align="right" noclick="true" texture="/ui/fe2/store/gold_coins.tga"/>
														</panel>
													</panel>
													<panel height="3h" valign="bottom">
														<instance name="button2" button_name="globby_buyavatar_confPrem_goldbtn_needcoins" watch1="MicroStoreUpdateSelection" ontrigger1="SetVisible((_gLobbyLastTotalCoins) lt _globby_buyavatar_cost);" visible="false" enabled="false" label="mstore_needcoins" />
														<instance name="button2" button_name="globby_buyavatar_confPrem_goldbtn"
															onevent="
																SetVisible((_gLobbyLastTotalCoins) ge _globby_buyavatar_cost);
																Call('globby_buyavatar_confPrem_goldContainer', 'SetVisible(_globby_buyavatar_cost != 9006);');
																CallEvent('globby_buyavatar_confPrem_costDesc')
															"
															visible="false" label="mstore_purchase_gold"
															onclick="
																PlaySound('/ui/fe2/store/sounds/purchase_avatar.wav');
																SubmitForm('gLobbyBuyAvatar', 'account_id', GetAccountID(), 'request_code', 8, 'cookie', GetCookie(), 'hero_name', _globby_buyavatar_heroname, 'avatar_code', _globby_buyavatar_avatarcode, 'currency', 0, 'type', 'Alt Avatar', 'discount', _globby_buyavatar_discount);
																CallEvent('globby_buyavatar_confirmationPrem', 1);
															"
														/>
													</panel>
												</panel>
											</panel>
											<panel width="10.85h" sticky="true" stickytoinvis="false"><!-- Silver Cost -->
												<panel vmargin="0.5h" width="10h" align="center">
													<panel name="game_lobby_avatar_purchase_silver_box" height="2h" color="0 0 0 1">
														<frame color="invisible" bordercolor="#455166" borderthickness="1" noclick="1" />
														<panel hmargin="0.25h" vmargin="0.25h">
															<label noclick="true" font="dyn_10" width="-120@" height="100%" textalign="center" textvalign="center" outline="true" name="globby_buyavatar_confPrem_silvercost" color="#c0d5ed" onevent0="SetText(_globby_buyavatar_SilverCost); SetVisible(_globby_buyavatar_SilverCost != 9002); Call('game_lobby_avatar_purchase_silver_box', 'SetVisible(_globby_buyavatar_SilverCost != 9002)');"/>
															<image height="100%" width="100@" align="right" noclick="true" texture="/ui/fe2/store/silver_coins.tga"/>
														</panel>
													</panel>
													<panel height="3h" valign="bottom">
														<instance name="button2" button_name="globby_buyavatar_confPrem_silverbtn" onevent="SetVisible((_gLobbyLastTotalSilverCoins) ge _globby_buyavatar_SilverCost and _globby_buyavatar_SilverCost gt 0 and (_globby_buyavatar_SilverCost != 9002));" visible="false" label="mstore_purchase_silver"
															onclick="
																PlaySound('/ui/fe2/store/sounds/purchase_avatar.wav');
																SubmitForm('gLobbyBuyAvatar', 'account_id', GetAccountID(), 'request_code', 8, 'cookie', GetCookie(), 'hero_name', _globby_buyavatar_heroname, 'avatar_code', _globby_buyavatar_avatarcode, 'currency', 1, 'type', 'Alt Avatar', 'discount', _globby_buyavatar_discount);
																CallEvent('globby_buyavatar_confirmationPrem', 1);
															"
														/>
														<instance name="button2" button_name="globby_buyavatar_confPrem_silverbtn_needcoins" watch1="MicroStoreUpdateSelection" ontrigger1="SetVisible((_gLobbyLastTotalSilverCoins) lt _globby_buyavatar_SilverCost);" visible="false" label="mstore_needcoins" enabled="false"/>
													</panel>
												</panel>
											</panel>

										</panel>
									</panel>




									<panel align="right" width="33.3%">
										<instance name="button2" button_name="globby_buyavatar_confPrem_cancel"
											width="7h" height="2.5h"
											label="general_cancel"
											align="center" valign="center"
											onclick="
												CallEvent('globby_buyavatar_confirmationPrem', 1);
											"
										/>
									</panel>
								</panel>

								<panel height="0.5h"/>
							</panel>
						</panel>
					</panel>
					<panel height="0.5h"/>
				</panel>
			</panel>
		</panel>

		<panel width="100%" height="100%" color="0 0 0 0.5" name="globby_buyeap_confirmation" onevent0="FadeIn(150);" onevent1="FadeOut(150);" visible="false">
			<panel width="35h" grow="true" regrow="true" align="center" valign="center" noclick="1">
			<frame color="0 0 0 .8" bordercolor="#455166" borderthickness="1" noclick="1" />
				<panel float="bottom" width="100%" grow="true" regrow="true">
					<instance
						name="header_bar"
						buttonsize="1.8h"
						height="2.4h"
						lbl="globby_purchase"
						show_close="true"
						onmouseover="PlaySound('/shared/sounds/ui/ccpanel/button_over_02.wav');"
						onclick="PlaySound('/shared/sounds/ui/ccpanel/button_click_02.wav'); CallEvent('globby_buyeap_confirmation', 1);"
					/>
					<panel height="0.5h"/>
					<panel width="100%" grow="true" regrow="true">
						<panel width="-1.0h" align="center" grow="true" noclick="1" regrow="true">
							<frame texture="/ui/frames/tooltip_bg.tga" color="#2c4b6c" noclick="1"/>
							<frame color="invisible" bordercolor="#455166" borderthickness="1" noclick="1" />
							<panel width="-1.0h" align="center" color="invisible" noclick="1" grow="true" regrow="true" float="bottom">
								<panel height="0.5h"/>
								<label font="dyn_11" wrap="true" fity="true" textalign="center" color="#00FF00" shadow="true" name="globby_buyeap_conf_heroname" onevent0="SetText(_globby_buyeap_avatarname);"/>
								<panel height="0.5h"/>
								<label font="dyn_12" wrap="true" fity="true" textalign="center" color="white" shadow="true" content="globby_purchase_eap_is"/>
								<panel height="0.25h"/>
								<panel height="2.5h">
									<panel width="18h" align="center" >
										<panel align="center" width="48%" color="0 0 0 1" noclick="true">
											<frame color="0 0 0 .8" bordercolor="#455166" borderthickness="1" noclick="1" />
											<panel align="center" valign="center" width="-0.5h" height="-0.5h" noclick="true">
												<image height="100%" width="100@" align="right" noclick="true" texture="/ui/fe2/store/gold_coins.tga"/>


												<label noclick="true" font="dyn_10" width="-120@" height="100%" textalign="center" textvalign="center" color="#FFCC00" name="globby_buyeap_conf_goldcost"
													onevent0="SetText(_globby_buyeap_cost);"
												/>

											</panel>
										</panel>
									</panel>
								</panel>
								<panel height="0.5h"/>
								<panel width="100%" grow="true">
									<panel height="2.5h" grow="true" align="center" float="right" padding="0.5h">
										<instance name="button2" button_name="globby_buyeap_confirmation_purchase"
											width="9h" height="2.5h"
											label="mstore_purchase"
											onclick="
												PlaySound('/ui/fe2/store/sounds/purchase_avatar.wav');
												SubmitForm('MicroStore',
													'account_id', GetAccountID(),
													'request_code', '4',
													'cookie', GetCookie(),
													'product_id', _globby_buyeap_productID,
													'category_id', '58',
													'hostTime', HostTime,
													'currency', 0
												);
												CallEvent('globby_buyeap_confirmation', 1);
											"
										/>
										<instance name="button2" button_name="globby_buyeap_confirmation_cancel"
											width="7h" height="2.5h"
											label="general_cancel"
											onclick="
												CallEvent('globby_buyeap_confirmation', 1);
											"
										/>
									</panel>


								</panel>
								<panel height="0.5h"/>
							</panel>
						</panel>
					</panel>
					<panel height="0.5h"/>
				</panel>
			</panel>
		</panel>

	</template>

</package>
